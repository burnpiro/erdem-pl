{"componentChunkName":"component---src-templates-post-template-js","path":"/2019/08/v-8-function-optimization","result":{"data":{"markdownRemark":{"fields":{"slug":"/2019/08/v-8-function-optimization","tagSlugs":["/tag/engines/","/tag/javascript/","/tag/performance/","/tag/internals/"],"readTime":{"text":"34 min read","minutes":33.9}},"frontmatter":{"description":"JS engines are complicated piece of software. I want to quickly explain one of the optimization techniques V8 is using to speed up your code execution.","tags":["Engines","Javascript","Performance","Internals"],"date":"2019-08-06","title":"V8 function optimization"},"html":"<h2 id=\"setup-optional\" style=\"position:relative;\"><a href=\"#setup-optional\" aria-label=\"setup optional permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Setup (optional)</h2>\n<blockquote>\n<p>If you don’t want to run it on your computer, please skip to <a href=\"#what-are-we-trying-to-optimize\">this section</a></p>\n</blockquote>\n<p>First, we need to install V8 to be able to run it without whole package (node or web browser). I’ve created gist describing the process for Linux users.</p>\n<p><a href=\"https://gist.github.com/burnpiro/d85d836200df93af892877c2cf37f12c\" target=\"_blank\">https://gist.github.com/burnpiro/d85d836200df93af892877c2cf37f12c</a></p>\n<p>If you’re a Mac user, it should apply to you as well. If you have any problems with installation process, please refer to <a href=\"https://v8.dev/docs/build\">Official Docs</a></p>\n<p>After installing you should be able to run code like</p>\n<pre class=\"grvsc-container quiet-light\" data-language=\"javascript\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// index.js</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7 mtkb\">console</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">log</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">it works</span><span class=\"mtk6\">&#39;</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span></code></pre>\n<p>by calling</p>\n<pre class=\"grvsc-container quiet-light\" data-language=\"bash\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">d8 index.js</span></span></span></code></pre>\n<h2 id=\"what-are-we-trying-to-optimize\" style=\"position:relative;\"><a href=\"#what-are-we-trying-to-optimize\" aria-label=\"what are we trying to optimize permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>What are we trying to optimize?</h2>\n<p>Our test function looks like that:</p>\n<pre class=\"grvsc-container quiet-light\" data-language=\"javascript\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">function</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtkb\">test</span><span class=\"mtk6\">(</span><span class=\"mtk7\">obj</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk7\">any</span><span class=\"mtk6\">):</span><span class=\"mtk1\"> </span><span class=\"mtk7\">string</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">let</span><span class=\"mtk1\"> </span><span class=\"mtk7\">result</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;&#39;;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk7\">let</span><span class=\"mtk1\"> </span><span class=\"mtk7\">i</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">0</span><span class=\"mtk6\">;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">i</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&lt;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">N</span><span class=\"mtk6\">;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">i</span><span class=\"mtk1\"> </span><span class=\"mtk6\">+=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">1</span><span class=\"mtk1\">) </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">result</span><span class=\"mtk1\"> </span><span class=\"mtk6\">+=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">obj</span><span class=\"mtk6\">.</span><span class=\"mtk7\">a</span><span class=\"mtk1\"> </span><span class=\"mtk6\">+</span><span class=\"mtk1\"> </span><span class=\"mtk7\">obj</span><span class=\"mtk6\">.</span><span class=\"mtk7\">b</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">return</span><span class=\"mtk1\"> </span><span class=\"mtk7\">result</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">}</span></span></span></code></pre>\n<p>Let’s assume this function is called thousands of times during our script execution so it’s important to run quickly. Before I explain how that is optimized in V8 we need to know what are Shapes and how Inline Cache (IC) works.</p>\n<h2 id=\"shapes-maps-in-v8\" style=\"position:relative;\"><a href=\"#shapes-maps-in-v8\" aria-label=\"shapes maps in v8 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Shapes (Maps in V8)</h2>\n<blockquote>\n<p>Academic name of the Shape is “Hidden Class” which might be confusing especially in JS so everyone calls it differently, but name introduced by FF team is probably best.</p>\n</blockquote>\n<p><code>Shape</code> contain a lot of staff, but when people use that name they mostly referring to it as a table of <code>descriptors</code> for object properties. Shape stores other information as well, like size of the object and pointers to constructors and prototypes. I’m going to show you that in the example soon.</p>\n<p>Let’s start with a simple object:</p>\n<pre class=\"grvsc-container quiet-light\" data-language=\"javascript\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">obj</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  x</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">1</span><span class=\"mtk6\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  y</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">1</span><span class=\"mtk6\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">};</span></span></span></code></pre>\n<p>It’s representation in V8 looks like</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 581px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.3125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC+UlEQVQoz5WSy09TQRTGT2kxGCFu/At0y4IYExM3LllJXIk7F0Z3LExcQIIJ4aGoIWDAWyi0YEsppQ+xpY9boPR1aQu0FFCgpS0UWiwotKU8Wi7xOIOJcetJvuTLTOZ3vpkzAP9ZaadDFLWaITUzrc76ZnFRp+E5pQKP5nxoH5QiLO4sCNk5i9CxbBdS/0HR8fdwxuUQbtusoo0JgzDrcYkKXk7gU6uEmNwGr0qp96tVSOD8oZdDDK8hBRNgAMadn8G2wF76d5LX/wIhZjLCN70W8l4OYoZxaHz+rAwRwcR81A21tqDy7ZuCvquTj1lM/IxsgIfgzjzj/Grv48LufuI7pF96bxCWgEiYcc68TNunBpM2K5PzuD6deFx3KYwqMckaNlkrxlkLhicMeDjrQceQDCGUDKLFa8KpgA2J58fsw7foAVJXCGQpOUXWtWOY5dzIz/me4lGG7pVsT7IPM7OeZgKqP+DcDWeB+Qa2r7cBEunN1uNCHqliqY0X55lfNEGJSaeHbZ/3fjFzmCvmspjd2WHr7tyuoI0eVVeX/fS4AONR2DBPQFA7Bri+CvNqFZnabrru9OQUT0/OMJlI1hbOCxDfipeurq8DF1q6eXR8XCTC/YMDHU3eVl9/9SIUpFeu/eF2vrdJ+pq0nR3N3x32ZlbS2wypVOpJPp/fzB/nE4nE1oPz4jns7+2LQqEQLC4s3MzlcoGjXC61l05307d9XFNzPaAZg5jNakxMT2LEasa4zYoXK8voVsgRenp6SkdGRspHR0fLu7q6RDKZDCQSCbS1tUFTU5NgeHj4mtFoLGcYpqyyshLuVVVV0KQkjd7E9KBfpSxEzRN8cTHAcwo5D2KxGDQaDWi1Wuju7ga5XA5SqRTa29uhpaUFSCMwm81AwJfTFb9qLMX0LniVCv3UQD8SMG/pZTBOks7Qj+33+yEcDgsikYiA4zjqIRgMXkIMBgOsra0JotGoYGVl5c/fnPUIQzoNHYZ6k1w1brXwFEbeE81iBn8DsIoSDwgX1CkAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Object\"\n        title=\"Object\"\n        src=\"/static/259952ab89a53e4be50f41810e15d7c3/92d15/Shapes.png\"\n        srcset=\"/static/259952ab89a53e4be50f41810e15d7c3/72799/Shapes.png 320w,\n/static/259952ab89a53e4be50f41810e15d7c3/92d15/Shapes.png 581w\"\n        sizes=\"(max-width: 581px) 100vw, 581px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>If you look on it, there is an obvious distinction between object values and their description. Every property on that object is stored in memory according to <code>offset</code> defined in shape. In our case property <code>x</code> is stored with <code>offset: 12</code> which tells v8 to look for <code>obj.x</code> value by offsetting pointer by 12.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 604px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 15%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAzklEQVQI123NOw/BYBQG4NMN4QwWQiQSf8xosBssDAwsNouJxMDmB6hbI4Re3Fq+NqSVCANpIzF+js6GJycn75u8IAhCAgAyJElSJFAvNeBpfmA7ZT62dGA0mAPnnGJIkxgJVYo14C6Hg2RR7wS7mQnQbfUhl81HqRwkobvuhZXhAbcThpvJyaeODLTVR6TT7EXLhWr811NEHVXRwLN8w71koTY+Io2jv6ovrDaTbc7W9ouuZ8q2+5fieNpMfx9XF+o4nqVeXU0yXPp/me8LQ6iS5gG37C8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Object\"\n        title=\"Object\"\n        src=\"/static/024a2dd52718fd7d45927b3b1ddd0e6b/87254/memory-example.png\"\n        srcset=\"/static/024a2dd52718fd7d45927b3b1ddd0e6b/72799/memory-example.png 320w,\n/static/024a2dd52718fd7d45927b3b1ddd0e6b/87254/memory-example.png 604w\"\n        sizes=\"(max-width: 604px) 100vw, 604px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>Ok, so now you know what a Shape is but why is it so useful?</p>\n<h3 id=\"shapes-usefulness\" style=\"position:relative;\"><a href=\"#shapes-usefulness\" aria-label=\"shapes usefulness permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Shape’s usefulness</h3>\n<p>When you create an object, you don’t really want to store all information about it again if you have a similar object in your system. That’s why V8 is reusing its shapes.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 581px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 86.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAAEcklEQVQ4y21Ua0xbZRh+27MwxhZNvMSZaDTLpibDPxAjZvzRRM1+ONmM+2GCiRmgU6PJ/mjiH5Ntxkg2yKJmQgCB2nEr0NIWSi/0RmmhpxfojdKWnrbnlLbQjssBSjdev9Poj01P8uQ9+c55n+/9vvd5H6BT9lPuFH2osMpR7VChK+ksDemlZwFAVFtXUwmPPZFJFaxqJiGkVEB8egoc96Rgl0ogbTSA6vffAGTev44HuKWpSDqMkfQK+tklFVk7gYjw7HPPVD1O+MDrBvQvwR69IMKAT2z8s1s80PqLGIN+sXd0RAyFrQJkuExjcb+IAtbYtU/WC+ugnlIfIfn/qRATcUBmFTAcAlzjwCrpg56bN+DQtwiukWEAfocHlmO/5nkeBaTY1NXtrW2QyWT/S0iORmUtJmBn9D8U5mZtc1KJWtvZodmYtWh0XZ0aQA7BH/S/QogaBfgD/lOhUAiaWlrEddXVVfigKGZUE9Sm2Uil1UpRwqCnGL0WAkqFcmVKjTGtBjnTDJLjo0XSh+CIz4Iv6QVmIw6r2RhwuRQI9/d01XGREBm1EtDthF2bBZaHB+Hnb7+pENbH77SP9ty4jqPtbby5t6eYs5iKJhLBydjPL3LuD/2ZxY9cifn32cNoxcUrl8qks12d7/B2W0OJXvhg22pu4E0zJ8mpKeFbUCEfd48MIT00iDZJP6b0Opzp7kIgksFx8xhOEskI8rk33ffqP9dVuW2z+JlJFdJSCRYsJjxwzF3F0n55M0LwY8FmdREY8jarqehymvRdnSZYTgdlyfUECgiwvs63ml6vuFxzWSwk+Sfk3/Hx1WIhGsHNgD8QGZC+Jqyfrz93rDBrAdzdAUIInEEHuJGDpG4aIMvlmvb3iGQIOCZ9IZfPCRUc4TIZ+OnuH2d29vfz/N4+ZgsFiUD2+aeNVUJcGh05E1LI62Vtt97svXm9jrzXydpu1wGX5q79KxkmwXwm/Jy9n6kolQ5gXCar2dkmz9YW5rLZMWF6rrW0nAiSKWGNhuF1mxUX5WMPadkw7rppNPX1Ivj8vhfZBHsum8rVLo0Gj4bWAjAbNZcvsbm5+alkMlnPMMy7wWCwWtisvrbmScSHYOnrHbX09+KKWlkiGkQMBcrNAW/UDZaE/jSRzxd0Yv5LL+f63pm0v7eDmwBiqPR4PMBxHEQikfImVy5dPCoQazruysgRcfj2rT0ioVJErSqRLpcgfD8ES2ue1oXYPA5OD6AlYEYv6zIJSU1fNR0jURwOh6lYLCYqj150haKJHkkDlMQckBgFRifVuGm3obGnG6F9uBUGzP0vsflUMLuZQS7P5udXbG+H2IDQHNHL1c8/MnrEXURbjjkITsjfWLeaPyaSuUBiAyFsUPx6p6GcJFTDb/OGg+IB7vK7cZPC/IRRZwSPyyM6XfPCo+ZATIBAtOucB4xFAONRoeqyaQhWVhZpecQYxkoagIlEIqnVa09qdVqgXbTIih2PEO4sOMoglYlLHhdV8rqpopumcDlIEaOg/gafxUDm47Y/vAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Object\"\n        title=\"Object\"\n        src=\"/static/dcf8b8ccf851959e54fbd4a4c8a48bf1/92d15/multiple-object-shape.png\"\n        srcset=\"/static/dcf8b8ccf851959e54fbd4a4c8a48bf1/72799/multiple-object-shape.png 320w,\n/static/dcf8b8ccf851959e54fbd4a4c8a48bf1/92d15/multiple-object-shape.png 581w\"\n        sizes=\"(max-width: 581px) 100vw, 581px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>code responsible for this situation might look like</p>\n<pre class=\"grvsc-container quiet-light\" data-language=\"javascript\" data-index=\"4\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">obj1</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  x</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">1</span><span class=\"mtk6\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  y</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">1</span><span class=\"mtk6\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">obj2</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  x</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  y</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">4</span><span class=\"mtk6\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">obj3</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  x</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">5</span><span class=\"mtk6\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  y</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">6</span><span class=\"mtk6\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">};</span></span></span></code></pre>\n<h3 id=\"not-all-objects-with-the-same-structure-have-the-same-shape\" style=\"position:relative;\"><a href=\"#not-all-objects-with-the-same-structure-have-the-same-shape\" aria-label=\"not all objects with the same structure have the same shape permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Not all objects with the same “structure” have the same Shape</h3>\n<p>If you compare these two objects</p>\n<pre class=\"grvsc-container quiet-light\" data-language=\"javascript\" data-index=\"5\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">obj1</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  x</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">1</span><span class=\"mtk6\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  y</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">1</span><span class=\"mtk6\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">obj2</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">obj2</span><span class=\"mtk6\">.</span><span class=\"mtk7\">x</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">1</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">obj2</span><span class=\"mtk6\">.</span><span class=\"mtk7\">y</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">1</span><span class=\"mtk6\">;</span></span></span></code></pre>\n<p>they might look the same, but they have a different shape. Shape of the first one we’ve already discussed. Shape of the second one is here</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 581px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 65.625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAADkUlEQVQ4y21S3U+bZRQ/peAm2mk0C1zqbpx/gNGL3bjEi1144TLi3STMKLvRRRMTxbCJi9NIixvIOiatQoFaipZS+v2Wtm9f2jKgZdCPbQXavrRlLW+/6AejlePzNuqF2ZP88pw8T87v/H7nHID/HUXfNcCDqqDgW4GsY8H4cG4Ww7Ma3JyfwxJDf15maOAWqGazdBioESnsWEyAgXXwq5Qg/boHnnomBiQCROQJ+wiR+4FWY9qlLN4i7Xiv6nbBgWexSXnju2fHv/3mRGBmWoT+VZFvakIk7flS9DQ+AYHw/fPnBQkbBVuUFXjyBop5wMp+85bJALtO+8/FJU9uWaWM2OSyaN7rjtrko1HwsStCV5AWHmG96Wp/b0tb+0khn7z2hxrydupsZoH6NDI3eyVjs36SNhtf5ysi/gXuqQnt4qQCg6QlhBwxFEBmYhx5QnBuOOAAqw0VMWThctfFZj7OOe3MfbUKfcrJo229DosuZ++/ao3S2zPTkn7UDt6qmEfuHCYo66FdLjuE5bj3K/cj5tq9bc/15Zj3s5vj/S/ytpFNAktZ3i2zLJaTCSxsRuIm8Y+8QtE/DiwPdHMY1GqQxJgmKhfko+Qj4UMtrUWj14B8PG6QnyZJTXxS35SylcsXNFwut5pMp3/g395+680XMBGHqNl4KcvQMs5F39pzOYeqK/eGiNIh2Ew9kuRKWcyWOAyzwZ56CuG1U6ePvXrqlRavWgVP9jL/DWVLq4Hjz7Qcu3O1V1jwuoH0jXcBEYMeMByEJeUkwG5i93KlXMFqpYrxKHuBJdU/utT1HE9Adu4DsmeyiE47krKaZXm77UyD/KgOm0b9O3HKckUvHf5YPSDpJnH3/O3hbkgmE937pf1yqVSqxmLRjp2dBHzY2dlKbDeTCdMBzZ94n/RoyzCPT5Y8XzQIiZoYZdFnGBojJgM+JH/19TWkFWMIDoejdWNjoy0QCLRbLJbjBpMJhiXiRg+XZ9RvHHB72SrHYYFlPeLOiydfbmtvVXx/A+ix36bIpHFV9XuVtZprR+trNUYxVgOapiEUCkE4HAaKosBkNsN2nBXcHBwExbz+pWKpzJUqFcxwnJkv0nHu3An+pkbvzs78NIAqcX9tWiLGEJm29Ze7CEQZpFIpAQ+/3w8+AhtFCRiGAYNO117I5yP5XK6efvxYw7ehq+PC8/xi79is6oJnEQlqHLFeX/MhPfYr/g001Y0agAq8XAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Object\"\n        title=\"Object\"\n        src=\"/static/c7ee17c162fc4e6a44d5e4bc2e7c18e0/92d15/shape-transition.png\"\n        srcset=\"/static/c7ee17c162fc4e6a44d5e4bc2e7c18e0/72799/shape-transition.png 320w,\n/static/c7ee17c162fc4e6a44d5e4bc2e7c18e0/92d15/shape-transition.png 581w\"\n        sizes=\"(max-width: 581px) 100vw, 581px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>During code execution V8 is creating 3 different shapes and transitions between them to describe end result.</p>\n<pre class=\"grvsc-container quiet-light\" data-language=\"javascript\" data-index=\"6\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">obj2</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// Shape M0</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// add &quot;x&quot;: Transition to M1, offset 12</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">obj2</span><span class=\"mtk6\">.</span><span class=\"mtk7\">x</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">1</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// Shape M1</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// &quot;x&quot;: at offset 12</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// add &quot;y&quot;: Transition to M2, offset 16</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">obj2</span><span class=\"mtk6\">.</span><span class=\"mtk7\">y</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">1</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// Shape M2</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// &quot;x&quot;: at offset 12</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// &quot;y&quot;: at offset 16</span></span></span></code></pre>\n<p>the same goes when you’re creating classes</p>\n<pre class=\"grvsc-container quiet-light\" data-language=\"javascript\" data-index=\"7\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">class</span><span class=\"mtk1\"> </span><span class=\"mtk7 mtkb\">MyComponent</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">constructor</span><span class=\"mtk6\">(</span><span class=\"mtk7\">size</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> </span><span class=\"mtk7\">name</span><span class=\"mtk6\">)</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">    </span><span class=\"mtk3 mtki\">// Shape M0</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk5\">this</span><span class=\"mtk6\">.</span><span class=\"mtk7\">size</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">size</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">    </span><span class=\"mtk3 mtki\">// Shape M1</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">    </span><span class=\"mtk3 mtki\">// &quot;size&quot;: at some offset</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk5\">this</span><span class=\"mtk6\">.</span><span class=\"mtk7\">name</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">name</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">    </span><span class=\"mtk3 mtki\">// Shape M2</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">    </span><span class=\"mtk3 mtki\">// &quot;size&quot;: at some offset</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">    </span><span class=\"mtk3 mtki\">// &quot;name&quot;: at some other offset</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">}</span></span></span></code></pre>\n<p>To be 100% honest V8 doesn’t store whole shapes when it does transitions between them.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 366px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 104.06249999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFWElEQVQ4y31Va0yTZxR+WxDRORNnFo3bdFv2Q0tNpnPJZFmyZYn+XLYfyy6/tgR1Y4kMXaaLskTNQLmIhUK5lYJQ7qWlN6AX6P0ClbZULlKVFoqt3MqllfJ99Ox9q7CZLDvJyel3vu97vnPe8zynaEnXt7Ko74dlo54OG3Qb8/3aGP4Ni+qerKjNgiJWcxI8mkDE+NevIeGtPNR4Mxd73pY35OWi1sICVPjbRYQW8MvqmmrQ1taAqfEuiEvuwJRGDZTNkgv+SUR53EnohQHQTABgArXGDGjVzMignRnS9eHcxvP8lI+Jlg26obBRPxro7R4PadUTS0a9e9lk8C+qe3+I2q0IO3MLMLKMQQHB/Cwy1PLRgLABxxoE4YXn+QdjCJn/vJIKoUDqhS+/2P/VyY8OgdWYOlxU8ErxG/sYrvxclJ/50yYec1wqyZlW9/JxLJdzS3mqqgqesryM51XIeHMGHU8vqOWhpx2taLJFmPgCNgaJ061NaLK2Ggn/uIyOsdMYLwCT563myfiIB8J2G9ham6G/vg50d+vhqdkIJO8SiwD5m4WHYdCWNtpY/3FPYf5n4HQcCYra3/cKanY3YMB/WdK4XOq0tzTBhFIRW7CYqHXXEAVjI1TUMUhRbifl7hRRaLZfu6zklcX6+NXrpvq6dQmnOBLQqICymC6Sag+/+85eJoOxA/ub+rraB023bkJXCWcDO4xIOuGBXApzeLAYGIY7OwCt2iywYDKAqU4ABkEtzOr66NUBG0RMhjwCeJx1ZM+e3a8ytqek7DTUCzwybimoqyvp7opyaL9dBJqaKnB2tAGeNox0iQEt6Pvb1sZGY3ND9zYCNitFeSdgyW51xfo0nxLAD9NYOzdbtjU1Dmn51YBB1+RlXKq7gkeJim9Tw7jVEYmYwsAUapbK9kei0XWapmF1dRWIWazWnwnYiRMn9qampGx/AbgNd+JbuzcI0UE7rNqtiRjB3TxzDMCG2wkecScgrUbzVjAYHAyFQg99Pt/4ysqK326zfUsAs7Ozt0nKy7ZoM6GQ5cz0afiY1OU48gJaDY9Ev7qXh8+Rp68T8JCmnLttoK015fP09H0njx87eOPXrB0KbmkKATx5lI3khfnoH6XA//vSIkKzqh6kKOG8dONRlxhtmPRoSiljrFnNW4BXzmSg679koqtnzyDOpd+RuqoS6/gvlJt1PpE///13CIWU8gy/rCtzuFl4yVRTddUnlZwN9SizF7oVaRGjHk0rZJvERi0Ft94Tc4qPdhQXpamqKtluUTvb3HCXjYfExkNi83KusNEcHrcaj16DF4QFL4euUg5MqVUQs5iuwcMJ5NeoNpdDckjf74wNOQDHGKYNLeWWJjyIqUa7huih9lYa4RUFqxZT3CTgUxr80Iyq51nMYYdFrfoGjHiQo60leRNwRt/vmbWYYMFm2QgZDRDAxYQwh8N44ngrgZNIL6CQnVn2Tkyv+CZhdmx07dn0FMy7nH3htua36y9kbWo8QZt77a1uzDvQCWrpwZbmOJ5sPOoYiOM1Fscfj3vEonjihej6+mPCv/lwOMFDr3+KS/KfpKe/xmQydxG0QwcOMPCRJAB7KytoohhCcquwER73KAG3/JyHBZcv7Xzo9eaEgsGqmenpkuCTJ3ynw/ENAfwxIyMpOSnpdYy3C8eD+JzHpNwSEN25TYs5d4Dour2oEIM2wH2saw9p+dy5c//JKWIsFgt9wGIxvj59mkx6h1ch95BqRqUSmlTjVcrBLepI6Pgp/htxdbQDyszMRIn1/bIn9uKpU6cQ+B5vKWXJanbHh11EZjSRGmmTXBM5wuj9RIV/A+NeFWoeZdgdAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Object\"\n        title=\"Object\"\n        src=\"/static/00f6b9dd30376984b5b47ddba6d848f1/8b153/honest-shapes.png\"\n        srcset=\"/static/00f6b9dd30376984b5b47ddba6d848f1/72799/honest-shapes.png 320w,\n/static/00f6b9dd30376984b5b47ddba6d848f1/8b153/honest-shapes.png 366w\"\n        sizes=\"(max-width: 366px) 100vw, 366px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>It doesn’t copy information about <code>x</code> property into <code>Shape M2</code>. That allows it to be shaped in a tree like structure when having different objects.</p>\n<pre class=\"grvsc-container quiet-light\" data-language=\"javascript\" data-index=\"8\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">obj1</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">obj1</span><span class=\"mtk6\">.</span><span class=\"mtk7\">x</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">1</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">obj2</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">obj2</span><span class=\"mtk6\">.</span><span class=\"mtk7\">x</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">1</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">obj2</span><span class=\"mtk6\">.</span><span class=\"mtk7\">y</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">1</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">obj3</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">obj3</span><span class=\"mtk6\">.</span><span class=\"mtk7\">x</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">1</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">obj3</span><span class=\"mtk6\">.</span><span class=\"mtk7\">z</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">1</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">obj3</span><span class=\"mtk6\">.</span><span class=\"mtk7\">k</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">1</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">obj4</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">obj4</span><span class=\"mtk6\">.</span><span class=\"mtk7\">i</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">1</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">obj4</span><span class=\"mtk6\">.</span><span class=\"mtk7\">j</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">test</span><span class=\"mtk6\">&#39;;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">obj4</span><span class=\"mtk6\">.</span><span class=\"mtk7\">k</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">1</span><span class=\"mtk6\">;</span></span></span></code></pre>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 677px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 72.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAADs0lEQVQ4y4VTbWxaVRh+710pOJdF90+njW5Rs1RnZ5f5Q7MZZ7P+MbGL2WLnEuvH3xn/bYkzM3FxJks2l9hCt6VAgdK1hZKWj3uBS4FCgZZi+RS6ArZ8tPJxgVJoi+Z4D0tM45+d5Lm558l7nvu8z30PwJ5VsVuJunMWtuccr6dog9o/MaZapQ2Ta3rtBwgh+O5SbwtX1sqBR3APPodFmiLeOPsRAYdfJhx6HbFXD/Chrd8XCRR/DAt6XXOvEYuB9bib78eOHsVl+zi0APHkbISm4ML5HnixrQ3ClB7+L0hsmGhAPm97RDXOaH+9ow2NPzJxjs+yVktTFAuSJMm/cvlzEu/TlP76nGTIyIgGVFwnqr16+77u+YSHi5KTqrcLLuc/yVkbKsy7UZbSf4z5q1/28bA7TpH//slOPuY2GNO9DbcLpeacqOJxJwGxefLDd08JTnd27n+vo4P/2cWLAly4upa6sdto1HL5vBpn9upLh3k9XV2Ck+3t+69c6sUfJu7dvQuPpqYP1Ot1X7Va3ckXixfANzrSbMX6YBBcw5Km1bdOnIBRpVIgk8ufUygUz2Lu4Q/fAy0cAM5ts947IoeRX34my7YZgFPdxGtd5w4mlHKAtEE3YBEJB+eHpeKc2fhFdoYBi0RMKDQa0FEUDKjUgHZqgCJB/p+66ZuOoYf33RKxlMu6L2M2Amtlehdk0iGLsP+3NYOuH4qztpJPM4lilAFVXU5R448wsD4v6WDM4PF4iGWblUAOG6AZsyBvtwaXpjRoxUSjsnP2Qc3nha05x60YpUdB3TRiXc5dWE8mu2ubFbRVKdcS0eg7a4k4rMbjpKXvcrP9wK2bUCwUyEq5DJl4vLteraIKy+5kEvGO1eVl8Cpk/EqxuIL5XDp9Hayxx60rqfQriWy2jfEHeI7FRXAtLcHKfWFTMDM+CpFQCBrb2zg70uR2H5mg6CM4Rwzbndtg9QdemNDrj1UREoA5lYF0vgCZYhGmQ2Fw+nwwHwhATjvVFMxOjD35CWYzFJTy1p8+PX/w2+5zzyOnvRWZKCho1C2ir/oOfHPm9KGQqP8ZiEajkMvlCAy/3w/BYBDC4fB/w1liTIDWU4D+3m7JGKl5l1TccEslKG8x01z+sOmw3wiMjSLLoLCUMdG78LTFcjcnjQeYQ8Ht+rEQjaK/wiG0teS71ohFoea0n2Ej4dJ6JIxqsejCUwU3OReUTkua8QgNy96csdmQiWGQTD15XKJUAioVwWA02q0cr9Hqbv8LompKLkgFzoAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Object\"\n        title=\"Object\"\n        src=\"/static/f308570cd2897cd9ddfd63e125ec184f/68de2/shape-tree.png\"\n        srcset=\"/static/f308570cd2897cd9ddfd63e125ec184f/72799/shape-tree.png 320w,\n/static/f308570cd2897cd9ddfd63e125ec184f/6af66/shape-tree.png 640w,\n/static/f308570cd2897cd9ddfd63e125ec184f/68de2/shape-tree.png 677w\"\n        sizes=\"(max-width: 677px) 100vw, 677px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>Notice that even if we using the same attribute name as 3rd property, in <code>obj3</code> and <code>obj4</code>, these are two different shapes. Reason for that is because shape is related to transition. If you could have a global shape that represents <code>k</code> property, it requires defined <code>offset</code> property. That might work with the same object structures in memory (offset is set base on how much space rest of the object takes before property). So if you have an object like <code>obj4</code> then property <code>k</code> might have a different offset than property <code>k</code> on <code>obj3</code> (transition to Shape M7 is different).</p>\n<h2 id=\"inline-cache-ic\" style=\"position:relative;\"><a href=\"#inline-cache-ic\" aria-label=\"inline cache ic permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Inline Cache (IC)</h2>\n<p>Maybe start with some code this time?</p>\n<pre class=\"grvsc-container quiet-light\" data-language=\"javascript\" data-index=\"9\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">N</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">1000000</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">obj1</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">obj1</span><span class=\"mtk6\">.</span><span class=\"mtk7\">name</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">Jake</span><span class=\"mtk6\">&#39;;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">function</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtkb\">getMeName</span><span class=\"mtk6\">(</span><span class=\"mtk7\">o</span><span class=\"mtk6\">)</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">return</span><span class=\"mtk1\"> </span><span class=\"mtk7\">o</span><span class=\"mtk6\">.</span><span class=\"mtk7\">name</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk7\">let</span><span class=\"mtk1\"> </span><span class=\"mtk7\">i</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">0</span><span class=\"mtk6\">;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">i</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&lt;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">N</span><span class=\"mtk6\">;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">i</span><span class=\"mtk1\"> </span><span class=\"mtk6\">+=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">1</span><span class=\"mtk1\">) </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtkb\">getMeName</span><span class=\"mtk1\">(</span><span class=\"mtk7\">obj1</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">}</span></span></span></code></pre>\n<p>and then run this code like</p>\n<pre class=\"grvsc-container quiet-light\" data-language=\"bash\" data-index=\"10\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">d8 --trace-ic index.js</span></span></span></code></pre>\n<blockquote>\n<p>Off-topic: you might wonder why we’re running function that many times. It’s because V8 won’t try to optimise function unless that function is marked as <code>hot</code>. And you get <code>hot</code> status when running function many times.</p>\n</blockquote>\n<p>Now you can open <code>path/to/v8/tools/ic-explorer.html</code> in your browser. That page allows you to explore what is happening with inline cache.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 350px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 132.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaCAYAAAC3g3x9AAAACXBIWXMAAAsTAAALEwEAmpwYAAADlElEQVRIx4VVaVPiUBD0/3/f/Ql7lKVVu5/0y7qHiiBXEETlyEmAAMoRbmW2ezRUQNh9VSEhDP2mu2fmHTSbTfE8T5q+L5ZlyXgykWrlQdLpjGQzGclks5LP56VarclsOhWul5cXWa1WenFFd66DKYIGg6EMh0N5enqSZwQHQVvBbdsWx3H0areDjT9Ga/vdwcnpqZj1un5ZLhdSr9VksXxeBzw/vz6Pw1Bc1xO/4YtjO9IAqxHevcvww4ePSo1rMg6lVCqB9nQdMBqNsNESGbalXC4rfcMwpNFoyEpWG9QV0MZu3U5H5vO50mbgBDoSaDweS7/f1+dWqyWPj4/6jnGz2Ww3ZX483N/J0dGRtIOOlG4MSVwlkc2dVEHfcV1QdaGjLb1eT4GoddyQjQz5QSoXFxevOi5mkoYEfRgVXwQiYDJ5JcViURaLxf4MqZ0DR6mPCQkm0LBaqWh2pmmq46RMHUmfZRMHe5dhOp2Wr1+/KBUXJfLz1y+YcwutRqpXEAQKyHo9Pz9HXH+DbhxYARlcrVVfqaEuacx0OlsH0mXWa4gyIShN47t4ZtGzAroQPAPdUtAnlzckl8upKaScur5Gl1Slgu4poqTIgBJYlg1d57szNIyCnKLAuaaTUC4TCQk63Y3iZlYdlNef378V0DTrutEtDI0MXAOGEJqlEaBs2Nvdbld1i7Sju3zu4PcoI1KmOXrfzrBQMOT4+EgeIbZjmZpt+e5BQagZ76RK4KgB9vW0AtoILqG2lB77Gb09RNbx4KgzaEwEuNdl17Hgcl0HQ6lUFAs1SZ1ub8s6aSzb0kx3ubq9FPAaTh4eHuqLLkbXj7Mz8TBV3v6p2bGPWU6Xl5eaZXwuxrNVwOFgoEYMcB+8PT9hKJBayAEx6GvR04CI+r6ZqIC5bFq+ff+u4udzWUmmUnJ3f4/aq4iPSU66ntfQDdh+vDqIbeMabOmpgKynVCqpPyzmUzEKhZ3DwW/6ks1mtOdLxRttgLppvQccjYZwtqZTx28FYqN0POjFDNmSrFGvgWntNzFllv+nzOHw+fMnPU963Y6cnJwAyFTNwnG4psoseRGAhuw1hS3lQqe1QSjgaCpz7rHt6Oy/DikFjDKsQcPEVUJPtoKRk2wurz1KbTkPWYs8Abkx5yE3Ysdsz8U15ULhRk5B8/V0GwL8CsOhtw4idQK12y2tQ27Cblosl+8Bt6s//n3zQN/dGdsy/AUMArXHdd0eUAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Object\"\n        title=\"Object\"\n        src=\"/static/1babf57079d1b038ded7d155f1a003ec/13ae7/trace-ic.png\"\n        srcset=\"/static/1babf57079d1b038ded7d155f1a003ec/72799/trace-ic.png 320w,\n/static/1babf57079d1b038ded7d155f1a003ec/13ae7/trace-ic.png 350w\"\n        sizes=\"(max-width: 350px) 100vw, 350px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>Important part of it is <code>state</code> which can be one of the following states:</p>\n<ul>\n<li>0 uninitialized</li>\n<li>. premonomorphic</li>\n<li>1 monomorphic</li>\n<li>^ recompute handler</li>\n<li>P polymorphic</li>\n<li>N megamorphic</li>\n<li>G generic</li>\n</ul>\n<p>In our case <code>state</code> is set to be monomorphic which means that function is optimized to receive only objects with one defined shape.</p>\n<p>Now let’s define what IC really is…</p>\n<p>Unfortunately, we have to do it in the hard way. By looking into some bytecode (There’s a <a href=\"https://medium.com/dailyjs/understanding-v8s-bytecode-317d46c94775\">blog post</a> about understanding bytecode by <a href=\"https://twitter.com/fhinkel\">Franziska Hinkelmann</a> if you’re interested). To do that just run</p>\n<pre class=\"grvsc-container quiet-light\" data-language=\"bash\" data-index=\"11\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">d8 --print-bytecode index.js</span></span></span></code></pre>\n<p>Output of that is quite long but we’re interested in last part. Look for <code>generated bytecode for function getMeName</code>.</p>\n<pre class=\"grvsc-container quiet-light\" data-language=\"\" data-index=\"12\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">...</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">[generated bytecode for function: getMeName]</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Parameter count 2</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Register count 0</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Frame size 0</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">   69 E&gt; 0x2d34c959f9d6 @    0 : a5                StackCheck</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">   86 S&gt; 0x2d34c959f9d7 @    1 : 28 02 00 00       LdaNamedProperty a0, [0], [0]</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">   91 S&gt; 0x2d34c959f9db @    5 : a9                Return</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Constant pool (size = 1)</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">0x2d34c959f989: [FixedArray] in OldSpace</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"> - map: 0x0741c8840789 &lt;Map&gt;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"> - length: 1</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">           0: 0x0741c8843eb9 &lt;String[#4]: name&gt;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Handler Table (size = 0)</span></span></code></pre>\n<p>Look on <code>LdaNamedProperty</code>. This method is responsible for extracting named property from <code>a0</code>(argument 0). Property name (in our case <code>name</code>) is determined by <code>[0]</code> constant from <code>Constant pool</code>.</p>\n<pre class=\"grvsc-container quiet-light\" data-language=\"\" data-index=\"13\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"> - map: 0x0741c8840789 &lt;Map&gt;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"> - length: 1</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">           0: 0x0741c8843eb9 &lt;String[#4]: name&gt;</span></span></code></pre>\n<p>After getting property value from argument, function stores it in the accumulator (function returns accumulator at the end).</p>\n<p>That process generates sth we call <code>Inline Cache</code> (<code>IC</code>). Every time function runs with a different object shape it creates a new IC entry.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 567px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 83.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAAD9klEQVQ4y4WTbUxTZxTHT1sVWgpZOyOgbPIyk300kG3EZNmHLYsx+mXsg1nIMG6LukUyYck0RjNkjijRBRgDxkvrFXCgUBAoMHXY9zfsCuWtt7S3taVQKC8CJaWKZ/cpwval20n+956ce55fznPyv7DRlQ/4RyHYa08Aj8sBEo3uHyCv+AhsheKWhKO+TUFPVWXSvFY9O6dWopKSbuiaG18ENCr0PHqgRUQggo2us2J8eEE8XPO1OD1lnzg9KSVBZr+ekHv5sIhl8QiQNKpYYECrTjK2/j5rutuCk329G/M6zYuQxYxs/V/A7nNvoTxvL97OSGDPJrKKO4XHBCdKjr7B5jsJ8O20tFj2tYMquXqgo7xsVlb2M3aWlz3XNzWu+wYe4ZxKodoGBuXlMNWnenO8TfapgZJ+Pnq35bhHdv+Djy9+uH3ltJR9AtLs7OtNHmq7t6ZrakQVJUVTyx109vfi9OM/LdvA9UEzhAzakonOduypKEfNLQnOKx/PrLZK+GhURoApiYl80my40yQKqJXdM4oB46JWo3mm16pWjPpBdsrqbeBCTxcs9vVkBYYsDPNkEKeHh3DZ/OQa+XilrJwbaQLg7xGLuV/mfAJbB6OJPHgkCSw9u+n1+ZZ8fv+03mp9l9Sys7PjCIwo6cBHEQscynpPOGO08Y4fy4k9d/JMDNvHwefIzS2m4cy1GYCX8i4IdLRxBjo7BN3t7aLC/Pxk6uaNXfvT0zcXyIl9tcmDsHc/cOPjIAYgC9j3ruTdxAWniQ8i+uz7adgeVa/Xg1wuh60rCoVCLl8QB3EJByO1Cy15bPk1dto9OzdbRAKA5JjN/B4BcnK+8/8DdLvd0N/fzyF5RkYGuZ6AnY6sg3PJ4IDCatePhTUT1qJmr/JKs1dzUeIwXaYYQ1GTV3OJ8mjOS93GL4p9EviviI8XkR1ym+8/hLO/jNX/1GrHql4vVrOqlHvxV1aVPR6s6PbgdRmDp0q8lqgwMmnR+avwzVffptbekLzzW1Xr6UnG+9Lhng4PjdDhkXFHeGTCGR61MeFxuys0ZnOiyUIfiQo0PLDw/lKMwYjGfnRUO7lImxnf6soyBoMruLS4gHOzfgwEZiM5qS8uzKPnKXM4KtBl9sOUdR5ok1tgU3h2D2qHDq2trdGh0LotGFyzORmGdrlc9PLysi0cDo+vrK66HA7m/ajAMQ0DtOEpTBqnwKqiAYMI9fX1wrq6OqFOp+OXlpaKpFJpgsFgEJBabW2tsKKighcVOKygWZAdRtVOsCjGOTiD0NDQsGWriG9eKeKMmpoaoCgK/jeUSmVEubm5EVhmZuYOsVgcz4aY9errbAhTU1PJHwMFBQXwN3WmfLGpcg18AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Object\"\n        title=\"Object\"\n        src=\"/static/dc7336f187d4a7389e1ae63e15d1e592/8710b/ic-create.png\"\n        srcset=\"/static/dc7336f187d4a7389e1ae63e15d1e592/72799/ic-create.png 320w,\n/static/dc7336f187d4a7389e1ae63e15d1e592/8710b/ic-create.png 567w\"\n        sizes=\"(max-width: 567px) 100vw, 567px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>We’ve called <code>getMeName</code> with an object that has given shape M0. First run of the function works as described before so V8 has to look up for named property on <code>a0</code> and store it into <code>acc</code>. After running bytecode it creates IC which contain two things:</p>\n<ul>\n<li>Shape</li>\n<li>Way to get to property</li>\n</ul>\n<p>Now if we call the same function again with an object that has the same shape:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 567px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 83.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAAD3UlEQVQ4y4WSe0hbVxzHf1f3MC6NGu1wtEq6tbDB2MCxyRgd7I+OUrbu4WBtJ5TSwVZox5BCO4btSgnilI421TU+Y6a2pi9f0cXUpnnf+Kg3MZomWXJjEo3GGF2iIabqb/emTv+Z8wvfe378zvl97jm/c+Bp5xlA9Tn4+ch7wOqNd/NB6rkIleof4OX8LCj4+HV40tVJKOtqoLu6KnfOoAuGdBpUN0lWja3NKyG9Fn39SgMiAmtIdJzORk0p/+LxA9k8Dj/js6IPebftZVkVj85k5OzOTH/ro72gbpUQQZ0G5klD7qCsLTgga0NaqVgNk4aVOPUYQwbdJvBp54/78OG3uw7sBh6zwZ2M087jN7xy1em83D3Zme9/8ib0NlYTa6NmQKslt1N0LXD/6m+oEP+eIFual6dU/TirVWs3gIvyq+Dr1ea7Ojq+Mkklx6mbrUcD7T37vxQeAsGeHDh14lOYVqkIphCYo71C3b0dG5bdQrK1GQdutSKt6MXAo4fUBnB5aATiJkOZrf0eykXX0CCV4LTqQejCsSI+21NcWQGmV4SmqRHUkkY+07/u6ABJ/k0atRGTURM1GYeYn93YAIblXTD/p/ydkJmi3UNDGBi1YHjQVMmwUgSv7U2Hdf1bsJ3ZTyobzC4sXAnMzMwxDkxGom+PW61QWFjI3cFJSwIP/0SDWBZm16f8l4svO+BU+TTAWk8XrPUriV5Z20sjJMnT9vXx9PfuPM9CiJQUDhBpsOvV79k9butj5wKbR1EoFOD1eoGiKBAKhZCXl0ewN86Cj5xAcCHJFjE5FTMqGDsZD617IjlXdHZmE2iz2cDv9xNOp5NI9iKpVE4IkSgl3XBW7BWel0xYLrX4tZdafPoLf/j0vzQ/c6nUp2PmBk5enmqE/1Nm5k5O99FK6B92QEmNp778Lo3VPT680evH63IfVjFxFTOKun34630avyvzU1vCDh/8nD3yC85hf4ZD796nVJi/dnkmV10TUwmz1ZGw2lyJsSfuxJidTticnvi43Y2DlOPQlsAR9Xjy9vvbtV8Y+x4HLQbb5GI0gktLUVyYD+NscAZDoWAyZvPz4Tn0eemDWwIXJ9ag5ooErAZnulnpzBnUUx/EYjFHPL5sX1qK2d007fB4PI5IJGJPJBK26OKix+Wi928JnP8rDk3Xb8K4zg2U2gYYRaivr+fW1dVxjUYjp6KiIksikfBMJlM6m6utreWKRKLULYEWtQNGtU4YewYkcBqhoaEBNl8AZK07+SrEYjFIpVLYVhqNJuni4uIkrKCg4Dk+n7+DEZ/L5WYz4goEghfZuZKSEvgHo9OZsSfUCUIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Object\"\n        title=\"Object\"\n        src=\"/static/b5c56cb4407f5e9f85ae18a3e7c545d4/8710b/ic-use.png\"\n        srcset=\"/static/b5c56cb4407f5e9f85ae18a3e7c545d4/72799/ic-use.png 320w,\n/static/b5c56cb4407f5e9f85ae18a3e7c545d4/8710b/ic-use.png 567w\"\n        sizes=\"(max-width: 567px) 100vw, 567px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>V8 compares current shape with shape stored in IC and skipping whole process of calling <code>LdaNamedProperty</code>, because there is a “shortcut” for this “kind” of shape, stored in IC. That way we have nice optimisation of the function call. But what if we call that function with a different object (different shape)?</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 607px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 97.50000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEoklEQVQ4y42Ta0yTZxSADwULgoMRrahl2Zgx7OKPzTizH3MhbCRLDJoJcfu1LGi26YYwsepmJplm4sChi9LhhYuAMuRSoFcuLf2Q2qJIKaIi4lr4Cv1KaSn3QkvP3u8D+Yme5OQ9Oe97npzbC35ZGiCrinTY+f4mYIXPD+TOyx0iSD4az9l7tscDIvLw0UOwapr/GW/X472Kcq+urMRnb9UiQ7V0kHsAAnyNAIWoSBN8sX3Lhi1vvr1227uxkTHrheuL7p1alyyKjyQ8HgvNPX4siA1qryi/ZpLU4PNGldfdbvDNmYw4fs+wDIxA2eGNfsXRDSQmnGgAmyR3icD76khC5JIPYqKFa1h/9YXc4tKss3jzz6x5ufiyt08uRccd6v4LIGD5e7CgkwA+7P7gWX2tmCq4dulRdeWlSYr6urnmGlsqRK9dHxD30fawzsrb8FQuzTM3KLFfKfezMNICHG1r7eGAC9I0mGiVrZowtIObajmoKylGqqgQtYUFaJFLpeW5FzggqxsFgtXsOdCoOsloNY3P5DIJ3dwoIbBGS4PyJAds2LsbbC0auBG/E+r2JoY4LWbZhJ3BSYZx6+tqd7KPPt6xg/+WUMgnVQfeysmOcN5tczBkEIZ/b831yqWzbjKgPoXsEPEvAjMXM+CxwY6xsZt2hwOdY2Oz1QrlZta3devWkPCwsDUs8Nj+lI1USbFTW1yE/SqF32246/MYH6C1RZ0xbzISYNIeePzgAQsMYIPtDJM1ZLWarVarvqaqajM7kJiYmJAYoXAVe3/qh++jlPni0YrzOWQo5xYaruR72X7atJqfsaebWzFISUkBiUQCZWVlkJ6eHqTVavkJCQnhUVFRvLCwMO4NCzuT+hPkn/otgkzUSfqGI6TskVbKP6bXIa1uyvB0diwCMzIyQK1WQ21tLYjFYsjMzISl3QuGJTmQtBe6qivh7xPHA41Vtz99Iq37nGQW11Nb89lAU0O8/mZpNJn44mOVSsVl4PP5oLOzEzQaDVc+j8cLebGDij6E/b/KAzqXWoPoWp6+TXIV0HIQskv7AuElEsQuecS6aPjmZEXAoZzH8HvlNAfZfdoIWf8tAhPPmCCt0AG/FA7Aq8jqbfEHeKkX+yH1onND6l9Pkn/M6flSdGVk16Hs7qTvznbsE+UzuzLyBncfFVsTXwUY9GFcUuixkkcgukIfFhX04h+3LXheYsWzlYOYVUXjuWoaT1cM4IkbZlyRxG0+kQjBG6G519vhk3R6k0T7bFTXY0etcchLdQ37yLnQarL57nQz2NRhda4IzDt3HdJSRHD42yOhmnpdsaHhvszS3+eaHHfiEG322m20zz5M+5hhet5hH8Jh2mxeEWhQmEBZQkH1VWWIpq6tRafqoB0jLvST1OfnvTjqdKHLNYaeuTlc8PtxembGtSLQqO4FvdQE+noT39w1nP3caC13OlzqWc+sbmZ6ppVhmDs2m61tamqK8ng8BrfbLVkRaOm2wVPDIPTpaZh2zMOUw7PcV/Zfs+0lum7Jfrk876LBRD2FLk0vjFrHeSO0iwuMfSc2IDg4OJSYrxON5PP5qwUCAbuz8D/ord1uasMx+QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Object\"\n        title=\"Object\"\n        src=\"/static/77cc23586d0294c630c08cebd59f42b7/ef9e5/ic-add.png\"\n        srcset=\"/static/77cc23586d0294c630c08cebd59f42b7/72799/ic-add.png 320w,\n/static/77cc23586d0294c630c08cebd59f42b7/ef9e5/ic-add.png 607w\"\n        sizes=\"(max-width: 607px) 100vw, 607px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>V8 created another IC for shape M1. After that we have “shortcut” for two types of shapes. But how many IC can V8 create for one function? A lot… only problem is, every time it does that there is a deoptimization going one.</p>\n<h3 id=\"function-states\" style=\"position:relative;\"><a href=\"#function-states\" aria-label=\"function states permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Function states</h3>\n<p>There are different states your function can be in, but we’re mostly interested in 3 of them:</p>\n<ul>\n<li>Monomorphic - 1 IC</li>\n<li>Polymorphic - 2-4 IC</li>\n<li>Megamorphic - >5 IC</li>\n</ul>\n<p>While V8 decides if function should be optimized, it check current function state. Only two of them can be optimized: Monomorphic and Polymorphic. Reaching 5 ICs V8 basically means <strong><em>“I have no idea what I’m going, so call it a day”</em></strong>. At this point <strong>TurboFan</strong> is not going to store anything into IC, instead it fall back to global cache. Usually it doesn’t matter if your function is Megamorphic, but if that function runs very often you might think about optimizing it by reducing a number of different shapes it accepts.</p>\n<h2 id=\"back-to-our-function\" style=\"position:relative;\"><a href=\"#back-to-our-function\" aria-label=\"back to our function permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Back to our function</h2>\n<pre class=\"grvsc-container quiet-light\" data-language=\"javascript\" data-index=\"14\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">N</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">10000</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">let</span><span class=\"mtk1\"> </span><span class=\"mtk7\">a</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span><span class=\"mtk1\"> a</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">Jack</span><span class=\"mtk6\">&#39;,</span><span class=\"mtk1\"> b</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">Sparrow</span><span class=\"mtk6\">&#39;</span><span class=\"mtk1\"> </span><span class=\"mtk6\">};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">let</span><span class=\"mtk1\"> </span><span class=\"mtk7\">b</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span><span class=\"mtk1\"> tmp</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> a</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">Charles</span><span class=\"mtk6\">&#39;,</span><span class=\"mtk1\"> b</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">Xavier</span><span class=\"mtk6\">&#39;</span><span class=\"mtk1\"> </span><span class=\"mtk6\">};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">let</span><span class=\"mtk1\"> </span><span class=\"mtk7\">c</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span><span class=\"mtk1\"> tmp</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp2</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> a</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">Frodo</span><span class=\"mtk6\">&#39;,</span><span class=\"mtk1\"> b</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">Baggins</span><span class=\"mtk6\">&#39;</span><span class=\"mtk1\"> </span><span class=\"mtk6\">};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">let</span><span class=\"mtk1\"> </span><span class=\"mtk7\">d</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span><span class=\"mtk1\"> tmp</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp2</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp3</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> a</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">Legolas</span><span class=\"mtk6\">&#39;,</span><span class=\"mtk1\"> b</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">Thranduilion</span><span class=\"mtk6\">&#39;</span><span class=\"mtk1\"> </span><span class=\"mtk6\">};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">let</span><span class=\"mtk1\"> </span><span class=\"mtk7\">e</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span><span class=\"mtk1\"> tmp</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp2</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp3</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp4</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> a</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">Indiana</span><span class=\"mtk6\">&#39;,</span><span class=\"mtk1\"> b</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">Jones</span><span class=\"mtk6\">&#39;</span><span class=\"mtk1\"> </span><span class=\"mtk6\">};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">let</span><span class=\"mtk1\"> </span><span class=\"mtk7\">f</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span><span class=\"mtk1\"> tmp</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp2</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp3</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp4</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp5</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> a</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">Gandalf</span><span class=\"mtk6\">&#39;,</span><span class=\"mtk1\"> b</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">The Grey</span><span class=\"mtk6\">&#39;</span><span class=\"mtk1\"> </span><span class=\"mtk6\">};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">let</span><span class=\"mtk1\"> </span><span class=\"mtk7\">f2</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span><span class=\"mtk1\"> tmp</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp2</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp3</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp4</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp5</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> a</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">Jack</span><span class=\"mtk6\">&#39;,</span><span class=\"mtk1\"> b</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">Sparrow</span><span class=\"mtk6\">&#39;</span><span class=\"mtk1\"> </span><span class=\"mtk6\">};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">let</span><span class=\"mtk1\"> </span><span class=\"mtk7\">f3</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span><span class=\"mtk1\"> tmp</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp2</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp3</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp4</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp5</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> a</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">Charles</span><span class=\"mtk6\">&#39;,</span><span class=\"mtk1\"> b</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">Xavier</span><span class=\"mtk6\">&#39;</span><span class=\"mtk1\"> </span><span class=\"mtk6\">};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">let</span><span class=\"mtk1\"> </span><span class=\"mtk7\">f4</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span><span class=\"mtk1\"> tmp</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp2</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp3</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp4</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp5</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> a</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">Frodo</span><span class=\"mtk6\">&#39;,</span><span class=\"mtk1\"> b</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">Baggins</span><span class=\"mtk6\">&#39;</span><span class=\"mtk1\"> </span><span class=\"mtk6\">};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">let</span><span class=\"mtk1\"> </span><span class=\"mtk7\">f5</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span><span class=\"mtk1\"> tmp</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp2</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp3</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp4</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp5</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> a</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">Legolas</span><span class=\"mtk6\">&#39;,</span><span class=\"mtk1\"> b</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">Thranduilion</span><span class=\"mtk6\">&#39;</span><span class=\"mtk1\"> </span><span class=\"mtk6\">};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">let</span><span class=\"mtk1\"> </span><span class=\"mtk7\">f6</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span><span class=\"mtk1\"> tmp</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp2</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp3</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp4</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp5</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> a</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">Indiana</span><span class=\"mtk6\">&#39;,</span><span class=\"mtk1\"> b</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">Jones</span><span class=\"mtk6\">&#39;</span><span class=\"mtk1\"> </span><span class=\"mtk6\">};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">function</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtkb\">test</span><span class=\"mtk6\">(</span><span class=\"mtk7\">obj</span><span class=\"mtk6\">)</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">let</span><span class=\"mtk1\"> </span><span class=\"mtk7\">result</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;&#39;;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk7\">let</span><span class=\"mtk1\"> </span><span class=\"mtk7\">i</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">0</span><span class=\"mtk6\">;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">i</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&lt;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">N</span><span class=\"mtk6\">;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">i</span><span class=\"mtk1\"> </span><span class=\"mtk6\">+=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">1</span><span class=\"mtk1\">) </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">result</span><span class=\"mtk1\"> </span><span class=\"mtk6\">+=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">obj</span><span class=\"mtk6\">.</span><span class=\"mtk7\">a</span><span class=\"mtk1\"> </span><span class=\"mtk6\">+</span><span class=\"mtk1\"> </span><span class=\"mtk7\">obj</span><span class=\"mtk6\">.</span><span class=\"mtk7\">b</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">return</span><span class=\"mtk1\"> </span><span class=\"mtk7\">result</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">function</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtkb\">test2</span><span class=\"mtk6\">(</span><span class=\"mtk7\">obj</span><span class=\"mtk6\">)</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">let</span><span class=\"mtk1\"> </span><span class=\"mtk7\">result</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;&#39;;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk7\">let</span><span class=\"mtk1\"> </span><span class=\"mtk7\">i</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">0</span><span class=\"mtk6\">;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">i</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&lt;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">N</span><span class=\"mtk6\">;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">i</span><span class=\"mtk1\"> </span><span class=\"mtk6\">+=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">1</span><span class=\"mtk1\">) </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">result</span><span class=\"mtk1\"> </span><span class=\"mtk6\">+=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">obj</span><span class=\"mtk6\">.</span><span class=\"mtk7\">a</span><span class=\"mtk1\"> </span><span class=\"mtk6\">+</span><span class=\"mtk1\"> </span><span class=\"mtk7\">obj</span><span class=\"mtk6\">.</span><span class=\"mtk7\">b</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">return</span><span class=\"mtk1\"> </span><span class=\"mtk7\">result</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">startT1</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7 mtkb\">Date</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">now</span><span class=\"mtk1\">()</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">for</span><span class=\"mtk1\">(</span><span class=\"mtk7\">let</span><span class=\"mtk1\"> </span><span class=\"mtk7\">i</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">0</span><span class=\"mtk6\">;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">i</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&lt;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">N</span><span class=\"mtk6\">;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">i</span><span class=\"mtk1\"> </span><span class=\"mtk6\">+=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">1</span><span class=\"mtk1\">) </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk9 mtkb\">test</span><span class=\"mtk1\">(</span><span class=\"mtk7\">f</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk9 mtkb\">test</span><span class=\"mtk1\">(</span><span class=\"mtk7\">f2</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk9 mtkb\">test</span><span class=\"mtk1\">(</span><span class=\"mtk7\">f3</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk9 mtkb\">test</span><span class=\"mtk1\">(</span><span class=\"mtk7\">f4</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk9 mtkb\">test</span><span class=\"mtk1\">(</span><span class=\"mtk7\">f5</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk9 mtkb\">test</span><span class=\"mtk1\">(</span><span class=\"mtk7\">f6</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7 mtkb\">console</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">log</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;</span><span class=\"mtk4\">test with one shape:</span><span class=\"mtk6\">&quot;,</span><span class=\"mtk1\"> </span><span class=\"mtk7 mtkb\">Date</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">now</span><span class=\"mtk1\">() </span><span class=\"mtk6\">-</span><span class=\"mtk1\"> </span><span class=\"mtk7\">startT1</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;</span><span class=\"mtk4\">ms.</span><span class=\"mtk6\">&quot;</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">startT2</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7 mtkb\">Date</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">now</span><span class=\"mtk1\">()</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">for</span><span class=\"mtk1\">(</span><span class=\"mtk7\">let</span><span class=\"mtk1\"> </span><span class=\"mtk7\">i</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">0</span><span class=\"mtk6\">;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">i</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&lt;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">N</span><span class=\"mtk6\">;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">i</span><span class=\"mtk1\"> </span><span class=\"mtk6\">+=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">1</span><span class=\"mtk1\">) </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk9 mtkb\">test2</span><span class=\"mtk1\">(</span><span class=\"mtk7\">a</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk9 mtkb\">test2</span><span class=\"mtk1\">(</span><span class=\"mtk7\">b</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk9 mtkb\">test2</span><span class=\"mtk1\">(</span><span class=\"mtk7\">c</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk9 mtkb\">test2</span><span class=\"mtk1\">(</span><span class=\"mtk7\">d</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk9 mtkb\">test2</span><span class=\"mtk1\">(</span><span class=\"mtk7\">e</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk9 mtkb\">test2</span><span class=\"mtk1\">(</span><span class=\"mtk7\">f</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7 mtkb\">console</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">log</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;</span><span class=\"mtk4\">test with multiple shape:</span><span class=\"mtk6\">&quot;,</span><span class=\"mtk1\"> </span><span class=\"mtk7 mtkb\">Date</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">now</span><span class=\"mtk1\">() </span><span class=\"mtk6\">-</span><span class=\"mtk1\"> </span><span class=\"mtk7\">startT2</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;</span><span class=\"mtk4\">ms.</span><span class=\"mtk6\">&quot;</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span></code></pre>\n<p>After executing this code it prints:</p>\n<pre class=\"grvsc-container quiet-light\" data-language=\"\" data-index=\"15\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">test with one shape: 3015 ms.</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">test with multiple shape: 12329 ms.</span></span></code></pre>\n<p>What just happen? First of all we’ve set number of operations to 6*10^8 for every test (6 x 10000 x 10000). First function <code>test</code> is called with the same shape all over again (different objects, same shape). Second function <code>test2</code> is called with 6 different shapes and because of that V8 is not optimising it.</p>\n<p>If you open <code>v8/tools/ic-explorer.html</code> and run above code with <code>d8 --trace-ic index.js</code>. You could be able to load <code>v8.log</code> into <code>ic-explorer</code>. For those who don’t want to do it, here is a screenshot.</p>\n<p><code>test(obj)</code>:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 225px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 17.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAtElEQVQI122OywqCQBSGfWpfxlcIok3RKkbblJe0i0TSZaEmXmq0IMdR/6ahRYs+OPwHPjjnV7abNQghMAyCfXBEmiSwrSXGkymyvICu6wijGI65gL3ycI1CuK6HqqpgWg445/jQ971MRdM0qKqKX3x/h9FwgBmZ4x+xOErLh9zrukaepbicT6ieLyiHIIDj2FK2XSczS1PRKkJR3GSDz/dOuO7rKb2DsUYMk75tOcqSgjUcb90w3jHCeY7tAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Object\"\n        title=\"Object\"\n        src=\"/static/324eb86220cec172bb7ad04ae55cb2ac/3684f/monomorphic-example.png\"\n        srcset=\"/static/324eb86220cec172bb7ad04ae55cb2ac/3684f/monomorphic-example.png 225w\"\n        sizes=\"(max-width: 225px) 100vw, 225px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p><code>test2(obj)</code>:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 231px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.484848484848484%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAACAElEQVQoz22S3U7iUBSF+77OxXgxJjyBhnsn40Po4AV6oxTkp0VxEEpLWyj9g7a0IoxQEoV2ze5hNJkMOzlpds7pl7XW3lyn00FTFMCXS/DDGTRFQqVSwVO3B9d1cHV9jYnnQazfQVI0mEMNrV9tDAZDNIQmskrTFB/FFQo/Ua1W2c/uxINlmeh22uArd/CDAOPJBL8XC+iaijCaIQoDOO4Yy+USuq5jmyRI6Mzncwbmvh0d4apYZHTTGKDeEBAEPsqlGyjqAPtKlmUGkuUeoucZPHIg9Xo7hfl8HjzPs+Y5iqBpGgEDSFIXwTT8tJSpyL5pmsD3fbxvNuxus91iHa8we3lBQs6545MT3N7esEvXtiA27zEajSCKImzH/QR+5JQmW8pvQKAE729vWK/XWMxnME0LGyJyuVwOxb+WJ2MX9w8t2AQWGnVYtvMPMN01lLPFlDn07nUVU64hZEXZWT49/Y5Gvc6awPfQo3w8GoQkSWR9ulehbdsZFzaBV/EaKxpQFhMDfj08xOVlYWfZsVEj+HBIw6lVYYys/4BEpPshG4quq5TdHGE4xQM5SzLLP87OIAgN9nZK01X6/d1Qul1amz0KCZitWEK96ziI45jlaBgGU80dHHzBxcU5e2yNDJT4Mvp9BbVajRSaey2rqsry7Dy1ael9RFGI1uMjU/gHTgbdC9Ve6CAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Object\"\n        title=\"Object\"\n        src=\"/static/ddccaaa9086e3ec9ea45d5a0cc740341/6e622/megamorphic-example.png\"\n        srcset=\"/static/ddccaaa9086e3ec9ea45d5a0cc740341/6e622/megamorphic-example.png 231w\"\n        sizes=\"(max-width: 231px) 100vw, 231px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>Result of that test is obvious and <code>test()</code> runs 7.8 times faster than <code>test2()</code>.</p>\n<p>You might ask why creating <code>test2()</code> if it looks the same? It’s because after running <code>test()</code> with one shape it’s already optimised for it. I didn’t want to affect performance of the second run, but still want to keep it in one file.</p>\n<h2 id=\"extra\" style=\"position:relative;\"><a href=\"#extra\" aria-label=\"extra permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Extra</h2>\n<p>I’ve mentioned that shape contains more than just information about added properties. Here is an example of created shape for <code>let b</code>:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 468px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 225.625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAtCAYAAACu/EtoAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFxElEQVRIx5WXiXLTZhSF85g8VEtfIAOTkpQtU1oYhg5TmEBJh2YhkHi35d1abcuytW+n58oOTQNMhGY0jmXp1/nv/e65N1uGpmE1n6PbakGp1+GPxkhUDeZshtVyiSiKcHh4iBZ/D4IArusWZ6/Xw2KxKP72fR8z3q/rGrZ++vEHaP0+Jt0efMcBDt8jePQrJksH9nSGOI5x69YtbG9vF4vP+XLDMHD79m2Mx+Piuyx4dHSE3d1dbI1GI0R8yPU8qFTreD7kSJME7mqF+WyO7zm2LEofV2tofjiD2R8Ar98guHsPY1VFMFGRL1fAzi/I603kfCBPU+R5jizLis/r55Zumkj4oxwLKvKpFFSX8seYnzavpUFIyel6wWsLXB6fFzR6fQxrNVRPTtGvNxAzhtGzF5BQLAZDBNxy/vQF0B8WC2Lz8m9u2eDWEirIGMeEZ6bpyHqDQqEojfhbzoTBWa4XvKLq6wtOJtBGQyjNFuqMpddsI6nUoDGTU75sZk2RnlcAUVpmQUmEQ+4cwwTzD5ydI351gBVjh5XLawHyPw+A8WT9xE1blqR4gV+w1WbG3YWDnAu7hHgqzPFMZXGGo5zCbhdjJkXtKHBF5StiQ0yEyZxgi8p85z7yRqucQlEm6fY8Fyb/Xgki8hwxWbL0pKTSK2jcCLbBDA4qFbQ+nbP8ugT7LXyCPWSyfMY24aKXYJdSKKqkXuUQqD2p5ygmx2mBkahMBfYN2Ddjw0SodJLK8QmUiwrSo1NEL19BJTJzQu+bFvKXr4HRpCTYDL7HLEqNxilLbjBCWmsgINTycCjZJZdggsopJF8W46U0m2hVq3CVXlEplmXCoj3NdAMpr4EmUW7BwQA2XcXWdcaKYJ9+LGrZoXFCTsYTz/5AzpeUw4Zgr/jg3LbR6XWxJNi0mcIf5ZoupUfISyfFVLpQ6TJ91vEl2OHOHjRRzIRAMixgN8uCbVmQW8S1pY94tPlCCE8pyRkx+j6wiU3v4gKNs48YsfxScezdB+jTDz3GNpLa3n0I0IVKY5MTkYxnTFMI5/Y6GVSThiF8Zjcr4hqXx0Zl16uLSqITf7pAdPAXJkzWjAodUXjwjvalbhTelJThECvpK66HnNgkdJX07BM8fgeNQqwrOzkDmO2SCsdwmJgey69Fk/CkxAjzgj5osulPaRAZz8JoSy1IhQa3bHORUGL3/gTh/hNMxSQEdDGO/d+Qt5XyYEvntwnxkIs70ofFeTbXTLKYbhYph42iYMKZRmEjmjPw4ofBnZ+LJhVTdaHy7l55PxSwpdHLuy0qkl4ih1wLCLlsPU2zInb/a/TfgH3j2FVUj08xbrWRvnmH8PETDAn2cjhCbC+QP2YMO11cfTTfjCK4liiCrReDkWwlikIk9L1ManqzvYCxTFUdCNclGVK1R+C/rZDYjNlLGgI2/dA/r9K1T9AbDlBnOVbZa6K3h3BrdbTabRgcTxzilLN3S4VdR6kA25tO4ZI7yJvp1vnxByxdDk68LrDLzBgTG5kFIcBL9Ujzl51dX1BnNh0OlzI8NjodeMQkY1UsxQ/pPiZru7CxKy70ebtf27I0eo1eZ3EroQyXkpQH+5CJAvNFYRT5/X2C3VkvkG0yvsn8l0mhQmmZMi9P2FtW/gYbbkeuTbntL/xQPi/PLxakQmn0CtGRgItj+9s7GLGNRgQ7k4Hpzr0ituUavTiN+CFvXDKWMtUXMzZVR0ySqEyT9D+FN5qDDEvsKZWjY/TYV7K//0H4+/Ni+zZHvVD68dPnnGAHJR2b/1sIvAW0cYRkMmYf7iDeCAmoMmv2AbvkBGtqBvSxhladmdZMxBa3b6V0HgXtRg11GkdgcYJNnJILqgZsi6bgrGMH0pIoHntSFXPLWD+vvyfgWkmD5ZYXNt2ZfbjZamKps3fMp7BZDYVrM2mpwcYVRGUn2B40usyAiXGlItiQwr1HEONN5LuU2t5D5LynDDb/ArKleLb+MVVhAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Object\"\n        title=\"Object\"\n        src=\"/static/c1c6d744d27740eafca5339c43cc1d86/90372/full-maps.png\"\n        srcset=\"/static/c1c6d744d27740eafca5339c43cc1d86/72799/full-maps.png 320w,\n/static/c1c6d744d27740eafca5339c43cc1d86/90372/full-maps.png 468w\"\n        sizes=\"(max-width: 468px) 100vw, 468px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>If you want, you can generate that for your code by running</p>\n<pre class=\"grvsc-container quiet-light\" data-language=\"bash\" data-index=\"16\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">d8 --trace-maps index.js</span></span></span></code></pre>\n<p>and uploading <code>v8.log</code> into <code>v8/tools/map-processor.html</code>. When it generates chart, click on <code>Transitions</code> and explore a list of them at the bottom of the page.</p>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .quiet-light { background-color: #F5F5F5; }\n  .quiet-light .mtkb { font-weight: bold; }\n  .quiet-light .mtki { font-style: italic; }\n  .quiet-light .mtk3 { color: #AAAAAA; }\n  .quiet-light .mtk7 { color: #7A3E9D; }\n  .quiet-light .mtk6 { color: #777777; }\n  .quiet-light .mtk9 { color: #AA3731; }\n  .quiet-light .mtk1 { color: #333333; }\n  .quiet-light .mtk4 { color: #448C27; }\n  .quiet-light .mtk10 { color: #4B69C6; }\n  .quiet-light .mtk5 { color: #9C5D27; }\n  .quiet-light .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(0, 0, 0, 0.05));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(0, 0, 0, 0.2));\n  }\n</style>","htmlAst":{"type":"root","children":[{"type":"element","tagName":"h2","properties":{"id":"setup-optional","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#setup-optional","ariaLabel":"setup optional permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Setup (optional)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"If you don’t want to run it on your computer, please skip to "},{"type":"element","tagName":"a","properties":{"href":"#what-are-we-trying-to-optimize"},"children":[{"type":"text","value":"this section"}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"First, we need to install V8 to be able to run it without whole package (node or web browser). I’ve created gist describing the process for Linux users."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://gist.github.com/burnpiro/d85d836200df93af892877c2cf37f12c","target":"_blank"},"children":[{"type":"text","value":"https://gist.github.com/burnpiro/d85d836200df93af892877c2cf37f12c"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"If you’re a Mac user, it should apply to you as well. If you have any problems with installation process, please refer to "},{"type":"element","tagName":"a","properties":{"href":"https://v8.dev/docs/build"},"children":[{"type":"text","value":"Official Docs"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"After installing you should be able to run code like"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"className":["grvsc-container","quiet-light"],"dataLanguage":"javascript","dataIndex":"0"},"children":[{"type":"element","tagName":"code","properties":{"className":["grvsc-code"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3","mtki"]},"children":[{"type":"text","value":"// index.js"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7","mtkb"]},"children":[{"type":"text","value":"console"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk9","mtkb"]},"children":[{"type":"text","value":"log"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"it works"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"by calling"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"className":["grvsc-container","quiet-light"],"dataLanguage":"bash","dataIndex":"1"},"children":[{"type":"element","tagName":"code","properties":{"className":["grvsc-code"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"d8 index.js"}]}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"what-are-we-trying-to-optimize","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#what-are-we-trying-to-optimize","ariaLabel":"what are we trying to optimize permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"What are we trying to optimize?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Our test function looks like that:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"className":["grvsc-container","quiet-light"],"dataLanguage":"javascript","dataIndex":"2"},"children":[{"type":"element","tagName":"code","properties":{"className":["grvsc-code"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"function"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk9","mtkb"]},"children":[{"type":"text","value":"test"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"any"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"):"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"string"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"  "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"let"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"result"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'';"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"  "}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"for"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" ("}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"let"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"i"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"0"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"i"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"<"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"N"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"i"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"+="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":") "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"    "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"result"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"+="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"a"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"+"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"b"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"  "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"}"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"  "}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"return"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"result"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Let’s assume this function is called thousands of times during our script execution so it’s important to run quickly. Before I explain how that is optimized in V8 we need to know what are Shapes and how Inline Cache (IC) works."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"shapes-maps-in-v8","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#shapes-maps-in-v8","ariaLabel":"shapes maps in v8 permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Shapes (Maps in V8)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Academic name of the Shape is “Hidden Class” which might be confusing especially in JS so everyone calls it differently, but name introduced by FF team is probably best."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"Shape"}]},{"type":"text","value":" contain a lot of staff, but when people use that name they mostly referring to it as a table of "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"descriptors"}]},{"type":"text","value":" for object properties. Shape stores other information as well, like size of the object and pointers to constructors and prototypes. I’m going to show you that in the example soon."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Let’s start with a simple object:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"className":["grvsc-container","quiet-light"],"dataLanguage":"javascript","dataIndex":"3"},"children":[{"type":"element","tagName":"code","properties":{"className":["grvsc-code"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"const"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"  x"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"  y"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"};"}]}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"It’s representation in V8 looks like"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 581px; "},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 55.3125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC+UlEQVQoz5WSy09TQRTGT2kxGCFu/At0y4IYExM3LllJXIk7F0Z3LExcQIIJ4aGoIWDAWyi0YEsppQ+xpY9boPR1aQu0FFCgpS0UWiwotKU8Wi7xOIOJcetJvuTLTOZ3vpkzAP9ZaadDFLWaITUzrc76ZnFRp+E5pQKP5nxoH5QiLO4sCNk5i9CxbBdS/0HR8fdwxuUQbtusoo0JgzDrcYkKXk7gU6uEmNwGr0qp96tVSOD8oZdDDK8hBRNgAMadn8G2wF76d5LX/wIhZjLCN70W8l4OYoZxaHz+rAwRwcR81A21tqDy7ZuCvquTj1lM/IxsgIfgzjzj/Grv48LufuI7pF96bxCWgEiYcc68TNunBpM2K5PzuD6deFx3KYwqMckaNlkrxlkLhicMeDjrQceQDCGUDKLFa8KpgA2J58fsw7foAVJXCGQpOUXWtWOY5dzIz/me4lGG7pVsT7IPM7OeZgKqP+DcDWeB+Qa2r7cBEunN1uNCHqliqY0X55lfNEGJSaeHbZ/3fjFzmCvmspjd2WHr7tyuoI0eVVeX/fS4AONR2DBPQFA7Bri+CvNqFZnabrru9OQUT0/OMJlI1hbOCxDfipeurq8DF1q6eXR8XCTC/YMDHU3eVl9/9SIUpFeu/eF2vrdJ+pq0nR3N3x32ZlbS2wypVOpJPp/fzB/nE4nE1oPz4jns7+2LQqEQLC4s3MzlcoGjXC61l05307d9XFNzPaAZg5jNakxMT2LEasa4zYoXK8voVsgRenp6SkdGRspHR0fLu7q6RDKZDCQSCbS1tUFTU5NgeHj4mtFoLGcYpqyyshLuVVVV0KQkjd7E9KBfpSxEzRN8cTHAcwo5D2KxGDQaDWi1Wuju7ga5XA5SqRTa29uhpaUFSCMwm81AwJfTFb9qLMX0LniVCv3UQD8SMG/pZTBOks7Qj+33+yEcDgsikYiA4zjqIRgMXkIMBgOsra0JotGoYGVl5c/fnPUIQzoNHYZ6k1w1brXwFEbeE81iBn8DsIoSDwgX1CkAAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"Object","title":"Object","src":"/static/259952ab89a53e4be50f41810e15d7c3/92d15/Shapes.png","srcSet":["/static/259952ab89a53e4be50f41810e15d7c3/72799/Shapes.png 320w","/static/259952ab89a53e4be50f41810e15d7c3/92d15/Shapes.png 581w"],"sizes":["(max-width:","581px)","100vw,","581px"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy"},"children":[]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"If you look on it, there is an obvious distinction between object values and their description. Every property on that object is stored in memory according to "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"offset"}]},{"type":"text","value":" defined in shape. In our case property "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"x"}]},{"type":"text","value":" is stored with "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"offset: 12"}]},{"type":"text","value":" which tells v8 to look for "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"obj.x"}]},{"type":"text","value":" value by offsetting pointer by 12."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 604px; "},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 15%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAzklEQVQI123NOw/BYBQG4NMN4QwWQiQSf8xosBssDAwsNouJxMDmB6hbI4Re3Fq+NqSVCANpIzF+js6GJycn75u8IAhCAgAyJElSJFAvNeBpfmA7ZT62dGA0mAPnnGJIkxgJVYo14C6Hg2RR7wS7mQnQbfUhl81HqRwkobvuhZXhAbcThpvJyaeODLTVR6TT7EXLhWr811NEHVXRwLN8w71koTY+Io2jv6ovrDaTbc7W9ouuZ8q2+5fieNpMfx9XF+o4nqVeXU0yXPp/me8LQ6iS5gG37C8AAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"Object","title":"Object","src":"/static/024a2dd52718fd7d45927b3b1ddd0e6b/87254/memory-example.png","srcSet":["/static/024a2dd52718fd7d45927b3b1ddd0e6b/72799/memory-example.png 320w","/static/024a2dd52718fd7d45927b3b1ddd0e6b/87254/memory-example.png 604w"],"sizes":["(max-width:","604px)","100vw,","604px"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy"},"children":[]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Ok, so now you know what a Shape is but why is it so useful?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"shapes-usefulness","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#shapes-usefulness","ariaLabel":"shapes usefulness permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Shape’s usefulness"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"When you create an object, you don’t really want to store all information about it again if you have a similar object in your system. That’s why V8 is reusing its shapes."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 581px; "},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 86.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAAEcklEQVQ4y21Ua0xbZRh+27MwxhZNvMSZaDTLpibDPxAjZvzRRM1+ONmM+2GCiRmgU6PJ/mjiH5Ntxkg2yKJmQgCB2nEr0NIWSi/0RmmhpxfojdKWnrbnlLbQjssBSjdev9Poj01P8uQ9+c55n+/9vvd5H6BT9lPuFH2osMpR7VChK+ksDemlZwFAVFtXUwmPPZFJFaxqJiGkVEB8egoc96Rgl0ogbTSA6vffAGTev44HuKWpSDqMkfQK+tklFVk7gYjw7HPPVD1O+MDrBvQvwR69IMKAT2z8s1s80PqLGIN+sXd0RAyFrQJkuExjcb+IAtbYtU/WC+ugnlIfIfn/qRATcUBmFTAcAlzjwCrpg56bN+DQtwiukWEAfocHlmO/5nkeBaTY1NXtrW2QyWT/S0iORmUtJmBn9D8U5mZtc1KJWtvZodmYtWh0XZ0aQA7BH/S/QogaBfgD/lOhUAiaWlrEddXVVfigKGZUE9Sm2Uil1UpRwqCnGL0WAkqFcmVKjTGtBjnTDJLjo0XSh+CIz4Iv6QVmIw6r2RhwuRQI9/d01XGREBm1EtDthF2bBZaHB+Hnb7+pENbH77SP9ty4jqPtbby5t6eYs5iKJhLBydjPL3LuD/2ZxY9cifn32cNoxcUrl8qks12d7/B2W0OJXvhg22pu4E0zJ8mpKeFbUCEfd48MIT00iDZJP6b0Opzp7kIgksFx8xhOEskI8rk33ffqP9dVuW2z+JlJFdJSCRYsJjxwzF3F0n55M0LwY8FmdREY8jarqehymvRdnSZYTgdlyfUECgiwvs63ml6vuFxzWSwk+Sfk3/Hx1WIhGsHNgD8QGZC+Jqyfrz93rDBrAdzdAUIInEEHuJGDpG4aIMvlmvb3iGQIOCZ9IZfPCRUc4TIZ+OnuH2d29vfz/N4+ZgsFiUD2+aeNVUJcGh05E1LI62Vtt97svXm9jrzXydpu1wGX5q79KxkmwXwm/Jy9n6kolQ5gXCar2dkmz9YW5rLZMWF6rrW0nAiSKWGNhuF1mxUX5WMPadkw7rppNPX1Ivj8vhfZBHsum8rVLo0Gj4bWAjAbNZcvsbm5+alkMlnPMMy7wWCwWtisvrbmScSHYOnrHbX09+KKWlkiGkQMBcrNAW/UDZaE/jSRzxd0Yv5LL+f63pm0v7eDmwBiqPR4PMBxHEQikfImVy5dPCoQazruysgRcfj2rT0ioVJErSqRLpcgfD8ES2ue1oXYPA5OD6AlYEYv6zIJSU1fNR0jURwOh6lYLCYqj150haKJHkkDlMQckBgFRifVuGm3obGnG6F9uBUGzP0vsflUMLuZQS7P5udXbG+H2IDQHNHL1c8/MnrEXURbjjkITsjfWLeaPyaSuUBiAyFsUPx6p6GcJFTDb/OGg+IB7vK7cZPC/IRRZwSPyyM6XfPCo+ZATIBAtOucB4xFAONRoeqyaQhWVhZpecQYxkoagIlEIqnVa09qdVqgXbTIih2PEO4sOMoglYlLHhdV8rqpopumcDlIEaOg/gafxUDm47Y/vAAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"Object","title":"Object","src":"/static/dcf8b8ccf851959e54fbd4a4c8a48bf1/92d15/multiple-object-shape.png","srcSet":["/static/dcf8b8ccf851959e54fbd4a4c8a48bf1/72799/multiple-object-shape.png 320w","/static/dcf8b8ccf851959e54fbd4a4c8a48bf1/92d15/multiple-object-shape.png 581w"],"sizes":["(max-width:","581px)","100vw,","581px"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy"},"children":[]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"code responsible for this situation might look like"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"className":["grvsc-container","quiet-light"],"dataLanguage":"javascript","dataIndex":"4"},"children":[{"type":"element","tagName":"code","properties":{"className":["grvsc-code"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"const"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"  x"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"  y"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"};"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"const"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"  x"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"  y"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"4"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"};"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"const"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"  x"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"5"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"  y"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"6"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"};"}]}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"not-all-objects-with-the-same-structure-have-the-same-shape","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#not-all-objects-with-the-same-structure-have-the-same-shape","ariaLabel":"not all objects with the same structure have the same shape permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Not all objects with the same “structure” have the same Shape"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"If you compare these two objects"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"className":["grvsc-container","quiet-light"],"dataLanguage":"javascript","dataIndex":"5"},"children":[{"type":"element","tagName":"code","properties":{"className":["grvsc-code"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"const"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"  x"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"  y"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"};"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"const"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{};"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"x"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"y"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"they might look the same, but they have a different shape. Shape of the first one we’ve already discussed. Shape of the second one is here"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 581px; "},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 65.625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAADkUlEQVQ4y21S3U+bZRQ/peAm2mk0C1zqbpx/gNGL3bjEi1144TLi3STMKLvRRRMTxbCJi9NIixvIOiatQoFaipZS+v2Wtm9f2jKgZdCPbQXavrRlLW+/6AejlePzNuqF2ZP88pw8T87v/H7nHID/HUXfNcCDqqDgW4GsY8H4cG4Ww7Ma3JyfwxJDf15maOAWqGazdBioESnsWEyAgXXwq5Qg/boHnnomBiQCROQJ+wiR+4FWY9qlLN4i7Xiv6nbBgWexSXnju2fHv/3mRGBmWoT+VZFvakIk7flS9DQ+AYHw/fPnBQkbBVuUFXjyBop5wMp+85bJALtO+8/FJU9uWaWM2OSyaN7rjtrko1HwsStCV5AWHmG96Wp/b0tb+0khn7z2hxrydupsZoH6NDI3eyVjs36SNhtf5ysi/gXuqQnt4qQCg6QlhBwxFEBmYhx5QnBuOOAAqw0VMWThctfFZj7OOe3MfbUKfcrJo229DosuZ++/ao3S2zPTkn7UDt6qmEfuHCYo66FdLjuE5bj3K/cj5tq9bc/15Zj3s5vj/S/ytpFNAktZ3i2zLJaTCSxsRuIm8Y+8QtE/DiwPdHMY1GqQxJgmKhfko+Qj4UMtrUWj14B8PG6QnyZJTXxS35SylcsXNFwut5pMp3/g395+680XMBGHqNl4KcvQMs5F39pzOYeqK/eGiNIh2Ew9kuRKWcyWOAyzwZ56CuG1U6ePvXrqlRavWgVP9jL/DWVLq4Hjz7Qcu3O1V1jwuoH0jXcBEYMeMByEJeUkwG5i93KlXMFqpYrxKHuBJdU/utT1HE9Adu4DsmeyiE47krKaZXm77UyD/KgOm0b9O3HKckUvHf5YPSDpJnH3/O3hbkgmE937pf1yqVSqxmLRjp2dBHzY2dlKbDeTCdMBzZ94n/RoyzCPT5Y8XzQIiZoYZdFnGBojJgM+JH/19TWkFWMIDoejdWNjoy0QCLRbLJbjBpMJhiXiRg+XZ9RvHHB72SrHYYFlPeLOiydfbmtvVXx/A+ix36bIpHFV9XuVtZprR+trNUYxVgOapiEUCkE4HAaKosBkNsN2nBXcHBwExbz+pWKpzJUqFcxwnJkv0nHu3An+pkbvzs78NIAqcX9tWiLGEJm29Ze7CEQZpFIpAQ+/3w8+AhtFCRiGAYNO117I5yP5XK6efvxYw7ehq+PC8/xi79is6oJnEQlqHLFeX/MhPfYr/g001Y0agAq8XAAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"Object","title":"Object","src":"/static/c7ee17c162fc4e6a44d5e4bc2e7c18e0/92d15/shape-transition.png","srcSet":["/static/c7ee17c162fc4e6a44d5e4bc2e7c18e0/72799/shape-transition.png 320w","/static/c7ee17c162fc4e6a44d5e4bc2e7c18e0/92d15/shape-transition.png 581w"],"sizes":["(max-width:","581px)","100vw,","581px"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy"},"children":[]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"During code execution V8 is creating 3 different shapes and transitions between them to describe end result."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"className":["grvsc-container","quiet-light"],"dataLanguage":"javascript","dataIndex":"6"},"children":[{"type":"element","tagName":"code","properties":{"className":["grvsc-code"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"const"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{};"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3","mtki"]},"children":[{"type":"text","value":"// Shape M0"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3","mtki"]},"children":[{"type":"text","value":"// add \"x\": Transition to M1, offset 12"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"x"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3","mtki"]},"children":[{"type":"text","value":"// Shape M1"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3","mtki"]},"children":[{"type":"text","value":"// \"x\": at offset 12"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3","mtki"]},"children":[{"type":"text","value":"// add \"y\": Transition to M2, offset 16"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"y"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3","mtki"]},"children":[{"type":"text","value":"// Shape M2"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3","mtki"]},"children":[{"type":"text","value":"// \"x\": at offset 12"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3","mtki"]},"children":[{"type":"text","value":"// \"y\": at offset 16"}]}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"the same goes when you’re creating classes"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"className":["grvsc-container","quiet-light"],"dataLanguage":"javascript","dataIndex":"7"},"children":[{"type":"element","tagName":"code","properties":{"className":["grvsc-code"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"class"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7","mtkb"]},"children":[{"type":"text","value":"MyComponent"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"  "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"constructor"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"size"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"    "}]},{"type":"element","tagName":"span","properties":{"className":["mtk3","mtki"]},"children":[{"type":"text","value":"// Shape M0"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"    "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"this"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"size"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"size"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"    "}]},{"type":"element","tagName":"span","properties":{"className":["mtk3","mtki"]},"children":[{"type":"text","value":"// Shape M1"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"    "}]},{"type":"element","tagName":"span","properties":{"className":["mtk3","mtki"]},"children":[{"type":"text","value":"// \"size\": at some offset"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"    "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"this"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"    "}]},{"type":"element","tagName":"span","properties":{"className":["mtk3","mtki"]},"children":[{"type":"text","value":"// Shape M2"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"    "}]},{"type":"element","tagName":"span","properties":{"className":["mtk3","mtki"]},"children":[{"type":"text","value":"// \"size\": at some offset"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"    "}]},{"type":"element","tagName":"span","properties":{"className":["mtk3","mtki"]},"children":[{"type":"text","value":"// \"name\": at some other offset"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"  "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"}"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"To be 100% honest V8 doesn’t store whole shapes when it does transitions between them."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 366px; "},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 104.06249999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFWElEQVQ4y31Va0yTZxR+WxDRORNnFo3bdFv2Q0tNpnPJZFmyZYn+XLYfyy6/tgR1Y4kMXaaLskTNQLmIhUK5lYJQ7qWlN6AX6P0ClbZULlKVFoqt3MqllfJ99Ox9q7CZLDvJyel3vu97vnPe8zynaEnXt7Ko74dlo54OG3Qb8/3aGP4Ni+qerKjNgiJWcxI8mkDE+NevIeGtPNR4Mxd73pY35OWi1sICVPjbRYQW8MvqmmrQ1taAqfEuiEvuwJRGDZTNkgv+SUR53EnohQHQTABgArXGDGjVzMignRnS9eHcxvP8lI+Jlg26obBRPxro7R4PadUTS0a9e9lk8C+qe3+I2q0IO3MLMLKMQQHB/Cwy1PLRgLABxxoE4YXn+QdjCJn/vJIKoUDqhS+/2P/VyY8OgdWYOlxU8ErxG/sYrvxclJ/50yYec1wqyZlW9/JxLJdzS3mqqgqesryM51XIeHMGHU8vqOWhpx2taLJFmPgCNgaJ061NaLK2Ggn/uIyOsdMYLwCT563myfiIB8J2G9ham6G/vg50d+vhqdkIJO8SiwD5m4WHYdCWNtpY/3FPYf5n4HQcCYra3/cKanY3YMB/WdK4XOq0tzTBhFIRW7CYqHXXEAVjI1TUMUhRbifl7hRRaLZfu6zklcX6+NXrpvq6dQmnOBLQqICymC6Sag+/+85eJoOxA/ub+rraB023bkJXCWcDO4xIOuGBXApzeLAYGIY7OwCt2iywYDKAqU4ABkEtzOr66NUBG0RMhjwCeJx1ZM+e3a8ytqek7DTUCzwybimoqyvp7opyaL9dBJqaKnB2tAGeNox0iQEt6Pvb1sZGY3ND9zYCNitFeSdgyW51xfo0nxLAD9NYOzdbtjU1Dmn51YBB1+RlXKq7gkeJim9Tw7jVEYmYwsAUapbK9kei0XWapmF1dRWIWazWnwnYiRMn9qampGx/AbgNd+JbuzcI0UE7rNqtiRjB3TxzDMCG2wkecScgrUbzVjAYHAyFQg99Pt/4ysqK326zfUsAs7Ozt0nKy7ZoM6GQ5cz0afiY1OU48gJaDY9Ev7qXh8+Rp68T8JCmnLttoK015fP09H0njx87eOPXrB0KbmkKATx5lI3khfnoH6XA//vSIkKzqh6kKOG8dONRlxhtmPRoSiljrFnNW4BXzmSg679koqtnzyDOpd+RuqoS6/gvlJt1PpE///13CIWU8gy/rCtzuFl4yVRTddUnlZwN9SizF7oVaRGjHk0rZJvERi0Ft94Tc4qPdhQXpamqKtluUTvb3HCXjYfExkNi83KusNEcHrcaj16DF4QFL4euUg5MqVUQs5iuwcMJ5NeoNpdDckjf74wNOQDHGKYNLeWWJjyIqUa7huih9lYa4RUFqxZT3CTgUxr80Iyq51nMYYdFrfoGjHiQo60leRNwRt/vmbWYYMFm2QgZDRDAxYQwh8N44ngrgZNIL6CQnVn2Tkyv+CZhdmx07dn0FMy7nH3htua36y9kbWo8QZt77a1uzDvQCWrpwZbmOJ5sPOoYiOM1Fscfj3vEonjihej6+mPCv/lwOMFDr3+KS/KfpKe/xmQydxG0QwcOMPCRJAB7KytoohhCcquwER73KAG3/JyHBZcv7Xzo9eaEgsGqmenpkuCTJ3ynw/ENAfwxIyMpOSnpdYy3C8eD+JzHpNwSEN25TYs5d4Dour2oEIM2wH2saw9p+dy5c//JKWIsFgt9wGIxvj59mkx6h1ch95BqRqUSmlTjVcrBLepI6Pgp/htxdbQDyszMRIn1/bIn9uKpU6cQ+B5vKWXJanbHh11EZjSRGmmTXBM5wuj9RIV/A+NeFWoeZdgdAAAAAElFTkSuQmCC'); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"Object","title":"Object","src":"/static/00f6b9dd30376984b5b47ddba6d848f1/8b153/honest-shapes.png","srcSet":["/static/00f6b9dd30376984b5b47ddba6d848f1/72799/honest-shapes.png 320w","/static/00f6b9dd30376984b5b47ddba6d848f1/8b153/honest-shapes.png 366w"],"sizes":["(max-width:","366px)","100vw,","366px"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy"},"children":[]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"It doesn’t copy information about "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"x"}]},{"type":"text","value":" property into "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"Shape M2"}]},{"type":"text","value":". That allows it to be shaped in a tree like structure when having different objects."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"className":["grvsc-container","quiet-light"],"dataLanguage":"javascript","dataIndex":"8"},"children":[{"type":"element","tagName":"code","properties":{"className":["grvsc-code"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"const"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{};"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"x"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"const"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{};"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"x"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"y"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"const"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{};"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"x"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"z"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"k"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"const"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj4"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{};"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj4"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"i"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj4"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"j"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"test"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"';"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj4"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"k"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 677px; "},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 72.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAADs0lEQVQ4y4VTbWxaVRh+710pOJdF90+njW5Rs1RnZ5f5Q7MZZ7P+MbGL2WLnEuvH3xn/bYkzM3FxJks2l9hCt6VAgdK1hZKWj3uBS4FCgZZi+RS6ArZ8tPJxgVJoi+Z4D0tM45+d5Lm558l7nvu8z30PwJ5VsVuJunMWtuccr6dog9o/MaZapQ2Ta3rtBwgh+O5SbwtX1sqBR3APPodFmiLeOPsRAYdfJhx6HbFXD/Chrd8XCRR/DAt6XXOvEYuB9bib78eOHsVl+zi0APHkbISm4ML5HnixrQ3ClB7+L0hsmGhAPm97RDXOaH+9ow2NPzJxjs+yVktTFAuSJMm/cvlzEu/TlP76nGTIyIgGVFwnqr16+77u+YSHi5KTqrcLLuc/yVkbKsy7UZbSf4z5q1/28bA7TpH//slOPuY2GNO9DbcLpeacqOJxJwGxefLDd08JTnd27n+vo4P/2cWLAly4upa6sdto1HL5vBpn9upLh3k9XV2Ck+3t+69c6sUfJu7dvQuPpqYP1Ot1X7Va3ckXixfANzrSbMX6YBBcw5Km1bdOnIBRpVIgk8ufUygUz2Lu4Q/fAy0cAM5ts947IoeRX34my7YZgFPdxGtd5w4mlHKAtEE3YBEJB+eHpeKc2fhFdoYBi0RMKDQa0FEUDKjUgHZqgCJB/p+66ZuOoYf33RKxlMu6L2M2Amtlehdk0iGLsP+3NYOuH4qztpJPM4lilAFVXU5R448wsD4v6WDM4PF4iGWblUAOG6AZsyBvtwaXpjRoxUSjsnP2Qc3nha05x60YpUdB3TRiXc5dWE8mu2ubFbRVKdcS0eg7a4k4rMbjpKXvcrP9wK2bUCwUyEq5DJl4vLteraIKy+5kEvGO1eVl8Cpk/EqxuIL5XDp9Hayxx60rqfQriWy2jfEHeI7FRXAtLcHKfWFTMDM+CpFQCBrb2zg70uR2H5mg6CM4Rwzbndtg9QdemNDrj1UREoA5lYF0vgCZYhGmQ2Fw+nwwHwhATjvVFMxOjD35CWYzFJTy1p8+PX/w2+5zzyOnvRWZKCho1C2ir/oOfHPm9KGQqP8ZiEajkMvlCAy/3w/BYBDC4fB/w1liTIDWU4D+3m7JGKl5l1TccEslKG8x01z+sOmw3wiMjSLLoLCUMdG78LTFcjcnjQeYQ8Ht+rEQjaK/wiG0teS71ohFoea0n2Ej4dJ6JIxqsejCUwU3OReUTkua8QgNy96csdmQiWGQTD15XKJUAioVwWA02q0cr9Hqbv8LompKLkgFzoAAAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"Object","title":"Object","src":"/static/f308570cd2897cd9ddfd63e125ec184f/68de2/shape-tree.png","srcSet":["/static/f308570cd2897cd9ddfd63e125ec184f/72799/shape-tree.png 320w","/static/f308570cd2897cd9ddfd63e125ec184f/6af66/shape-tree.png 640w","/static/f308570cd2897cd9ddfd63e125ec184f/68de2/shape-tree.png 677w"],"sizes":["(max-width:","677px)","100vw,","677px"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy"},"children":[]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Notice that even if we using the same attribute name as 3rd property, in "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"obj3"}]},{"type":"text","value":" and "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"obj4"}]},{"type":"text","value":", these are two different shapes. Reason for that is because shape is related to transition. If you could have a global shape that represents "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"k"}]},{"type":"text","value":" property, it requires defined "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"offset"}]},{"type":"text","value":" property. That might work with the same object structures in memory (offset is set base on how much space rest of the object takes before property). So if you have an object like "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"obj4"}]},{"type":"text","value":" then property "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"k"}]},{"type":"text","value":" might have a different offset than property "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"k"}]},{"type":"text","value":" on "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"obj3"}]},{"type":"text","value":" (transition to Shape M7 is different)."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"inline-cache-ic","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#inline-cache-ic","ariaLabel":"inline cache ic permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Inline Cache (IC)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Maybe start with some code this time?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"className":["grvsc-container","quiet-light"],"dataLanguage":"javascript","dataIndex":"9"},"children":[{"type":"element","tagName":"code","properties":{"className":["grvsc-code"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"const"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"N"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"1000000"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"const"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{};"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"Jake"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"';"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"function"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk9","mtkb"]},"children":[{"type":"text","value":"getMeName"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"o"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"  "}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"return"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"o"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"}"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"for"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" ("}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"let"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"i"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"0"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"i"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"<"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"N"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"i"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"+="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":") "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"  "}]},{"type":"element","tagName":"span","properties":{"className":["mtk9","mtkb"]},"children":[{"type":"text","value":"getMeName"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"and then run this code like"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"className":["grvsc-container","quiet-light"],"dataLanguage":"bash","dataIndex":"10"},"children":[{"type":"element","tagName":"code","properties":{"className":["grvsc-code"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"d8 --trace-ic index.js"}]}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Off-topic: you might wonder why we’re running function that many times. It’s because V8 won’t try to optimise function unless that function is marked as "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"hot"}]},{"type":"text","value":". And you get "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"hot"}]},{"type":"text","value":" status when running function many times."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Now you can open "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"path/to/v8/tools/ic-explorer.html"}]},{"type":"text","value":" in your browser. That page allows you to explore what is happening with inline cache."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 350px; "},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 132.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaCAYAAAC3g3x9AAAACXBIWXMAAAsTAAALEwEAmpwYAAADlElEQVRIx4VVaVPiUBD0/3/f/Ql7lKVVu5/0y7qHiiBXEETlyEmAAMoRbmW2ezRUQNh9VSEhDP2mu2fmHTSbTfE8T5q+L5ZlyXgykWrlQdLpjGQzGclks5LP56VarclsOhWul5cXWa1WenFFd66DKYIGg6EMh0N5enqSZwQHQVvBbdsWx3H0areDjT9Ga/vdwcnpqZj1un5ZLhdSr9VksXxeBzw/vz6Pw1Bc1xO/4YtjO9IAqxHevcvww4ePSo1rMg6lVCqB9nQdMBqNsNESGbalXC4rfcMwpNFoyEpWG9QV0MZu3U5H5vO50mbgBDoSaDweS7/f1+dWqyWPj4/6jnGz2Ww3ZX483N/J0dGRtIOOlG4MSVwlkc2dVEHfcV1QdaGjLb1eT4GoddyQjQz5QSoXFxevOi5mkoYEfRgVXwQiYDJ5JcViURaLxf4MqZ0DR6mPCQkm0LBaqWh2pmmq46RMHUmfZRMHe5dhOp2Wr1+/KBUXJfLz1y+YcwutRqpXEAQKyHo9Pz9HXH+DbhxYARlcrVVfqaEuacx0OlsH0mXWa4gyIShN47t4ZtGzAroQPAPdUtAnlzckl8upKaScur5Gl1Slgu4poqTIgBJYlg1d57szNIyCnKLAuaaTUC4TCQk63Y3iZlYdlNef378V0DTrutEtDI0MXAOGEJqlEaBs2Nvdbld1i7Sju3zu4PcoI1KmOXrfzrBQMOT4+EgeIbZjmZpt+e5BQagZ76RK4KgB9vW0AtoILqG2lB77Gb09RNbx4KgzaEwEuNdl17Hgcl0HQ6lUFAs1SZ1ub8s6aSzb0kx3ubq9FPAaTh4eHuqLLkbXj7Mz8TBV3v6p2bGPWU6Xl5eaZXwuxrNVwOFgoEYMcB+8PT9hKJBayAEx6GvR04CI+r6ZqIC5bFq+ff+u4udzWUmmUnJ3f4/aq4iPSU66ntfQDdh+vDqIbeMabOmpgKynVCqpPyzmUzEKhZ3DwW/6ks1mtOdLxRttgLppvQccjYZwtqZTx28FYqN0POjFDNmSrFGvgWntNzFllv+nzOHw+fMnPU963Y6cnJwAyFTNwnG4psoseRGAhuw1hS3lQqe1QSjgaCpz7rHt6Oy/DikFjDKsQcPEVUJPtoKRk2wurz1KbTkPWYs8Abkx5yE3Ysdsz8U15ULhRk5B8/V0GwL8CsOhtw4idQK12y2tQ27Cblosl+8Bt6s//n3zQN/dGdsy/AUMArXHdd0eUAAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"Object","title":"Object","src":"/static/1babf57079d1b038ded7d155f1a003ec/13ae7/trace-ic.png","srcSet":["/static/1babf57079d1b038ded7d155f1a003ec/72799/trace-ic.png 320w","/static/1babf57079d1b038ded7d155f1a003ec/13ae7/trace-ic.png 350w"],"sizes":["(max-width:","350px)","100vw,","350px"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy"},"children":[]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Important part of it is "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"state"}]},{"type":"text","value":" which can be one of the following states:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"0 uninitialized"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":". premonomorphic"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"1 monomorphic"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"^ recompute handler"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"P polymorphic"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"N megamorphic"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"G generic"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"In our case "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"state"}]},{"type":"text","value":" is set to be monomorphic which means that function is optimized to receive only objects with one defined shape."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Now let’s define what IC really is…"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Unfortunately, we have to do it in the hard way. By looking into some bytecode (There’s a "},{"type":"element","tagName":"a","properties":{"href":"https://medium.com/dailyjs/understanding-v8s-bytecode-317d46c94775"},"children":[{"type":"text","value":"blog post"}]},{"type":"text","value":" about understanding bytecode by "},{"type":"element","tagName":"a","properties":{"href":"https://twitter.com/fhinkel"},"children":[{"type":"text","value":"Franziska Hinkelmann"}]},{"type":"text","value":" if you’re interested). To do that just run"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"className":["grvsc-container","quiet-light"],"dataLanguage":"bash","dataIndex":"11"},"children":[{"type":"element","tagName":"code","properties":{"className":["grvsc-code"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"d8 --print-bytecode index.js"}]}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Output of that is quite long but we’re interested in last part. Look for "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"generated bytecode for function getMeName"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"className":["grvsc-container","quiet-light"],"dataLanguage":"","dataIndex":"12"},"children":[{"type":"element","tagName":"code","properties":{"className":["grvsc-code"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"text","value":"..."}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"text","value":"[generated bytecode for function: getMeName]"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"text","value":"Parameter count 2"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"text","value":"Register count 0"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"text","value":"Frame size 0"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"text","value":"   69 E> 0x2d34c959f9d6 @    0 : a5                StackCheck"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"text","value":"   86 S> 0x2d34c959f9d7 @    1 : 28 02 00 00       LdaNamedProperty a0, [0], [0]"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"text","value":"   91 S> 0x2d34c959f9db @    5 : a9                Return"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"text","value":"Constant pool (size = 1)"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"text","value":"0x2d34c959f989: [FixedArray] in OldSpace"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"text","value":" - map: 0x0741c8840789 <Map>"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"text","value":" - length: 1"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"text","value":"           0: 0x0741c8843eb9 <String[#4]: name>"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"text","value":"Handler Table (size = 0)"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Look on "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"LdaNamedProperty"}]},{"type":"text","value":". This method is responsible for extracting named property from "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"a0"}]},{"type":"text","value":"(argument 0). Property name (in our case "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"name"}]},{"type":"text","value":") is determined by "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"[0]"}]},{"type":"text","value":" constant from "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"Constant pool"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"className":["grvsc-container","quiet-light"],"dataLanguage":"","dataIndex":"13"},"children":[{"type":"element","tagName":"code","properties":{"className":["grvsc-code"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"text","value":" - map: 0x0741c8840789 <Map>"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"text","value":" - length: 1"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"text","value":"           0: 0x0741c8843eb9 <String[#4]: name>"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"After getting property value from argument, function stores it in the accumulator (function returns accumulator at the end)."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"That process generates sth we call "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"Inline Cache"}]},{"type":"text","value":" ("},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"IC"}]},{"type":"text","value":"). Every time function runs with a different object shape it creates a new IC entry."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 567px; "},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 83.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAAD9klEQVQ4y4WTbUxTZxTHT1sVWgpZOyOgbPIyk300kG3EZNmHLYsx+mXsg1nIMG6LukUyYck0RjNkjijRBRgDxkvrFXCgUBAoMHXY9zfsCuWtt7S3taVQKC8CJaWKZ/cpwval20n+956ce55fznPyv7DRlQ/4RyHYa08Aj8sBEo3uHyCv+AhsheKWhKO+TUFPVWXSvFY9O6dWopKSbuiaG18ENCr0PHqgRUQggo2us2J8eEE8XPO1OD1lnzg9KSVBZr+ekHv5sIhl8QiQNKpYYECrTjK2/j5rutuCk329G/M6zYuQxYxs/V/A7nNvoTxvL97OSGDPJrKKO4XHBCdKjr7B5jsJ8O20tFj2tYMquXqgo7xsVlb2M3aWlz3XNzWu+wYe4ZxKodoGBuXlMNWnenO8TfapgZJ+Pnq35bhHdv+Djy9+uH3ltJR9AtLs7OtNHmq7t6ZrakQVJUVTyx109vfi9OM/LdvA9UEzhAzakonOduypKEfNLQnOKx/PrLZK+GhURoApiYl80my40yQKqJXdM4oB46JWo3mm16pWjPpBdsrqbeBCTxcs9vVkBYYsDPNkEKeHh3DZ/OQa+XilrJwbaQLg7xGLuV/mfAJbB6OJPHgkCSw9u+n1+ZZ8fv+03mp9l9Sys7PjCIwo6cBHEQscynpPOGO08Y4fy4k9d/JMDNvHwefIzS2m4cy1GYCX8i4IdLRxBjo7BN3t7aLC/Pxk6uaNXfvT0zcXyIl9tcmDsHc/cOPjIAYgC9j3ruTdxAWniQ8i+uz7adgeVa/Xg1wuh60rCoVCLl8QB3EJByO1Cy15bPk1dto9OzdbRAKA5JjN/B4BcnK+8/8DdLvd0N/fzyF5RkYGuZ6AnY6sg3PJ4IDCatePhTUT1qJmr/JKs1dzUeIwXaYYQ1GTV3OJ8mjOS93GL4p9EviviI8XkR1ym+8/hLO/jNX/1GrHql4vVrOqlHvxV1aVPR6s6PbgdRmDp0q8lqgwMmnR+avwzVffptbekLzzW1Xr6UnG+9Lhng4PjdDhkXFHeGTCGR61MeFxuys0ZnOiyUIfiQo0PLDw/lKMwYjGfnRUO7lImxnf6soyBoMruLS4gHOzfgwEZiM5qS8uzKPnKXM4KtBl9sOUdR5ok1tgU3h2D2qHDq2trdGh0LotGFyzORmGdrlc9PLysi0cDo+vrK66HA7m/ajAMQ0DtOEpTBqnwKqiAYMI9fX1wrq6OqFOp+OXlpaKpFJpgsFgEJBabW2tsKKighcVOKygWZAdRtVOsCjGOTiD0NDQsGWriG9eKeKMmpoaoCgK/jeUSmVEubm5EVhmZuYOsVgcz4aY9errbAhTU1PJHwMFBQXwN3WmfLGpcg18AAAAAElFTkSuQmCC'); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"Object","title":"Object","src":"/static/dc7336f187d4a7389e1ae63e15d1e592/8710b/ic-create.png","srcSet":["/static/dc7336f187d4a7389e1ae63e15d1e592/72799/ic-create.png 320w","/static/dc7336f187d4a7389e1ae63e15d1e592/8710b/ic-create.png 567w"],"sizes":["(max-width:","567px)","100vw,","567px"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy"},"children":[]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"We’ve called "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"getMeName"}]},{"type":"text","value":" with an object that has given shape M0. First run of the function works as described before so V8 has to look up for named property on "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"a0"}]},{"type":"text","value":" and store it into "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"acc"}]},{"type":"text","value":". After running bytecode it creates IC which contain two things:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Shape"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Way to get to property"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Now if we call the same function again with an object that has the same shape:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 567px; "},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 83.125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAAD3UlEQVQ4y4WSe0hbVxzHf1f3MC6NGu1wtEq6tbDB2MCxyRgd7I+OUrbu4WBtJ5TSwVZox5BCO4btSgnilI421TU+Y6a2pi9f0cXUpnnf+Kg3MZomWXJjEo3GGF2iIabqb/emTv+Z8wvfe378zvl97jm/c+Bp5xlA9Tn4+ch7wOqNd/NB6rkIleof4OX8LCj4+HV40tVJKOtqoLu6KnfOoAuGdBpUN0lWja3NKyG9Fn39SgMiAmtIdJzORk0p/+LxA9k8Dj/js6IPebftZVkVj85k5OzOTH/ro72gbpUQQZ0G5klD7qCsLTgga0NaqVgNk4aVOPUYQwbdJvBp54/78OG3uw7sBh6zwZ2M087jN7xy1em83D3Zme9/8ib0NlYTa6NmQKslt1N0LXD/6m+oEP+eIFual6dU/TirVWs3gIvyq+Dr1ea7Ojq+Mkklx6mbrUcD7T37vxQeAsGeHDh14lOYVqkIphCYo71C3b0dG5bdQrK1GQdutSKt6MXAo4fUBnB5aATiJkOZrf0eykXX0CCV4LTqQejCsSI+21NcWQGmV4SmqRHUkkY+07/u6ABJ/k0atRGTURM1GYeYn93YAIblXTD/p/ydkJmi3UNDGBi1YHjQVMmwUgSv7U2Hdf1bsJ3ZTyobzC4sXAnMzMwxDkxGom+PW61QWFjI3cFJSwIP/0SDWBZm16f8l4svO+BU+TTAWk8XrPUriV5Z20sjJMnT9vXx9PfuPM9CiJQUDhBpsOvV79k9butj5wKbR1EoFOD1eoGiKBAKhZCXl0ewN86Cj5xAcCHJFjE5FTMqGDsZD617IjlXdHZmE2iz2cDv9xNOp5NI9iKpVE4IkSgl3XBW7BWel0xYLrX4tZdafPoLf/j0vzQ/c6nUp2PmBk5enmqE/1Nm5k5O99FK6B92QEmNp778Lo3VPT680evH63IfVjFxFTOKun34630avyvzU1vCDh/8nD3yC85hf4ZD796nVJi/dnkmV10TUwmz1ZGw2lyJsSfuxJidTticnvi43Y2DlOPQlsAR9Xjy9vvbtV8Y+x4HLQbb5GI0gktLUVyYD+NscAZDoWAyZvPz4Tn0eemDWwIXJ9ag5ooErAZnulnpzBnUUx/EYjFHPL5sX1qK2d007fB4PI5IJGJPJBK26OKix+Wi928JnP8rDk3Xb8K4zg2U2gYYRaivr+fW1dVxjUYjp6KiIksikfBMJlM6m6utreWKRKLULYEWtQNGtU4YewYkcBqhoaEBNl8AZK07+SrEYjFIpVLYVhqNJuni4uIkrKCg4Dk+n7+DEZ/L5WYz4goEghfZuZKSEvgHo9OZsSfUCUIAAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"Object","title":"Object","src":"/static/b5c56cb4407f5e9f85ae18a3e7c545d4/8710b/ic-use.png","srcSet":["/static/b5c56cb4407f5e9f85ae18a3e7c545d4/72799/ic-use.png 320w","/static/b5c56cb4407f5e9f85ae18a3e7c545d4/8710b/ic-use.png 567w"],"sizes":["(max-width:","567px)","100vw,","567px"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy"},"children":[]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"V8 compares current shape with shape stored in IC and skipping whole process of calling "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"LdaNamedProperty"}]},{"type":"text","value":", because there is a “shortcut” for this “kind” of shape, stored in IC. That way we have nice optimisation of the function call. But what if we call that function with a different object (different shape)?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 607px; "},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 97.50000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEoklEQVQ4y42Ta0yTZxSADwULgoMRrahl2Zgx7OKPzTizH3MhbCRLDJoJcfu1LGi26YYwsepmJplm4sChi9LhhYuAMuRSoFcuLf2Q2qJIKaIi4lr4Cv1KaSn3QkvP3u8D+Yme5OQ9Oe97npzbC35ZGiCrinTY+f4mYIXPD+TOyx0iSD4az9l7tscDIvLw0UOwapr/GW/X472Kcq+urMRnb9UiQ7V0kHsAAnyNAIWoSBN8sX3Lhi1vvr1227uxkTHrheuL7p1alyyKjyQ8HgvNPX4siA1qryi/ZpLU4PNGldfdbvDNmYw4fs+wDIxA2eGNfsXRDSQmnGgAmyR3icD76khC5JIPYqKFa1h/9YXc4tKss3jzz6x5ufiyt08uRccd6v4LIGD5e7CgkwA+7P7gWX2tmCq4dulRdeWlSYr6urnmGlsqRK9dHxD30fawzsrb8FQuzTM3KLFfKfezMNICHG1r7eGAC9I0mGiVrZowtIObajmoKylGqqgQtYUFaJFLpeW5FzggqxsFgtXsOdCoOsloNY3P5DIJ3dwoIbBGS4PyJAds2LsbbC0auBG/E+r2JoY4LWbZhJ3BSYZx6+tqd7KPPt6xg/+WUMgnVQfeysmOcN5tczBkEIZ/b831yqWzbjKgPoXsEPEvAjMXM+CxwY6xsZt2hwOdY2Oz1QrlZta3devWkPCwsDUs8Nj+lI1USbFTW1yE/SqF32246/MYH6C1RZ0xbzISYNIeePzgAQsMYIPtDJM1ZLWarVarvqaqajM7kJiYmJAYoXAVe3/qh++jlPni0YrzOWQo5xYaruR72X7atJqfsaebWzFISUkBiUQCZWVlkJ6eHqTVavkJCQnhUVFRvLCwMO4NCzuT+hPkn/otgkzUSfqGI6TskVbKP6bXIa1uyvB0diwCMzIyQK1WQ21tLYjFYsjMzISl3QuGJTmQtBe6qivh7xPHA41Vtz99Iq37nGQW11Nb89lAU0O8/mZpNJn44mOVSsVl4PP5oLOzEzQaDVc+j8cLebGDij6E/b/KAzqXWoPoWp6+TXIV0HIQskv7AuElEsQuecS6aPjmZEXAoZzH8HvlNAfZfdoIWf8tAhPPmCCt0AG/FA7Aq8jqbfEHeKkX+yH1onND6l9Pkn/M6flSdGVk16Hs7qTvznbsE+UzuzLyBncfFVsTXwUY9GFcUuixkkcgukIfFhX04h+3LXheYsWzlYOYVUXjuWoaT1cM4IkbZlyRxG0+kQjBG6G519vhk3R6k0T7bFTXY0etcchLdQ37yLnQarL57nQz2NRhda4IzDt3HdJSRHD42yOhmnpdsaHhvszS3+eaHHfiEG322m20zz5M+5hhet5hH8Jh2mxeEWhQmEBZQkH1VWWIpq6tRafqoB0jLvST1OfnvTjqdKHLNYaeuTlc8PtxembGtSLQqO4FvdQE+noT39w1nP3caC13OlzqWc+sbmZ6ppVhmDs2m61tamqK8ng8BrfbLVkRaOm2wVPDIPTpaZh2zMOUw7PcV/Zfs+0lum7Jfrk876LBRD2FLk0vjFrHeSO0iwuMfSc2IDg4OJSYrxON5PP5qwUCAbuz8D/ord1uasMx+QAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"Object","title":"Object","src":"/static/77cc23586d0294c630c08cebd59f42b7/ef9e5/ic-add.png","srcSet":["/static/77cc23586d0294c630c08cebd59f42b7/72799/ic-add.png 320w","/static/77cc23586d0294c630c08cebd59f42b7/ef9e5/ic-add.png 607w"],"sizes":["(max-width:","607px)","100vw,","607px"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy"},"children":[]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"V8 created another IC for shape M1. After that we have “shortcut” for two types of shapes. But how many IC can V8 create for one function? A lot… only problem is, every time it does that there is a deoptimization going one."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"function-states","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#function-states","ariaLabel":"function states permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Function states"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"There are different states your function can be in, but we’re mostly interested in 3 of them:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Monomorphic - 1 IC"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Polymorphic - 2-4 IC"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Megamorphic - >5 IC"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"While V8 decides if function should be optimized, it check current function state. Only two of them can be optimized: Monomorphic and Polymorphic. Reaching 5 ICs V8 basically means "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"“I have no idea what I’m going, so call it a day”"}]}]},{"type":"text","value":". At this point "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"TurboFan"}]},{"type":"text","value":" is not going to store anything into IC, instead it fall back to global cache. Usually it doesn’t matter if your function is Megamorphic, but if that function runs very often you might think about optimizing it by reducing a number of different shapes it accepts."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"back-to-our-function","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#back-to-our-function","ariaLabel":"back to our function permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Back to our function"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"className":["grvsc-container","quiet-light"],"dataLanguage":"javascript","dataIndex":"14"},"children":[{"type":"element","tagName":"code","properties":{"className":["grvsc-code"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"const"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"N"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"10000"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"let"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"a"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" a"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"Jack"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"',"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" b"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"Sparrow"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"};"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"let"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"b"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" a"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"Charles"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"',"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" b"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"Xavier"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"};"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"let"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"c"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" a"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"Frodo"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"',"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" b"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"Baggins"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"};"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"let"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"d"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" a"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"Legolas"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"',"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" b"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"Thranduilion"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"};"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"let"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"e"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp4"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" a"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"Indiana"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"',"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" b"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"Jones"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"};"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"let"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"f"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp4"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp5"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" a"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"Gandalf"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"',"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" b"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"The Grey"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"};"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"let"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"f2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp4"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp5"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" a"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"Jack"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"',"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" b"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"Sparrow"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"};"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"let"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"f3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp4"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp5"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" a"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"Charles"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"',"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" b"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"Xavier"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"};"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"let"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"f4"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp4"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp5"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" a"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"Frodo"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"',"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" b"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"Baggins"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"};"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"let"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"f5"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp4"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp5"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" a"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"Legolas"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"',"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" b"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"Thranduilion"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"};"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"let"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"f6"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp4"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp5"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" a"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"Indiana"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"',"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" b"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"Jones"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"};"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"function"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk9","mtkb"]},"children":[{"type":"text","value":"test"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"  "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"let"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"result"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'';"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"  "}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"for"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" ("}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"let"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"i"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"0"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"i"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"<"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"N"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"i"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"+="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":") "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"    "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"result"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"+="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"a"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"+"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"b"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"  "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"}"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"  "}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"return"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"result"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"}"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"function"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk9","mtkb"]},"children":[{"type":"text","value":"test2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"  "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"let"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"result"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'';"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"  "}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"for"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" ("}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"let"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"i"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"0"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"i"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"<"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"N"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"i"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"+="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":") "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"    "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"result"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"+="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"a"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"+"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"b"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"  "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"}"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"  "}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"return"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"result"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"}"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"const"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"startT1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7","mtkb"]},"children":[{"type":"text","value":"Date"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk9","mtkb"]},"children":[{"type":"text","value":"now"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"()"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"for"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"let"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"i"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"0"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"i"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"<"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"N"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"i"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"+="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":") "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"\t"}]},{"type":"element","tagName":"span","properties":{"className":["mtk9","mtkb"]},"children":[{"type":"text","value":"test"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"f"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"\t"}]},{"type":"element","tagName":"span","properties":{"className":["mtk9","mtkb"]},"children":[{"type":"text","value":"test"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"f2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"\t"}]},{"type":"element","tagName":"span","properties":{"className":["mtk9","mtkb"]},"children":[{"type":"text","value":"test"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"f3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"\t"}]},{"type":"element","tagName":"span","properties":{"className":["mtk9","mtkb"]},"children":[{"type":"text","value":"test"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"f4"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"\t"}]},{"type":"element","tagName":"span","properties":{"className":["mtk9","mtkb"]},"children":[{"type":"text","value":"test"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"f5"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"\t"}]},{"type":"element","tagName":"span","properties":{"className":["mtk9","mtkb"]},"children":[{"type":"text","value":"test"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"f6"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"}"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7","mtkb"]},"children":[{"type":"text","value":"console"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk9","mtkb"]},"children":[{"type":"text","value":"log"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"\""}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"test with one shape:"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"\","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7","mtkb"]},"children":[{"type":"text","value":"Date"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk9","mtkb"]},"children":[{"type":"text","value":"now"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"() "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"-"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"startT1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"\""}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"ms."}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"\""}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"const"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"startT2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7","mtkb"]},"children":[{"type":"text","value":"Date"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk9","mtkb"]},"children":[{"type":"text","value":"now"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"()"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"for"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"let"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"i"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"0"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"i"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"<"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"N"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"i"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"+="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":") "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"\t"}]},{"type":"element","tagName":"span","properties":{"className":["mtk9","mtkb"]},"children":[{"type":"text","value":"test2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"a"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"\t"}]},{"type":"element","tagName":"span","properties":{"className":["mtk9","mtkb"]},"children":[{"type":"text","value":"test2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"b"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"\t"}]},{"type":"element","tagName":"span","properties":{"className":["mtk9","mtkb"]},"children":[{"type":"text","value":"test2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"c"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"\t"}]},{"type":"element","tagName":"span","properties":{"className":["mtk9","mtkb"]},"children":[{"type":"text","value":"test2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"d"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"\t"}]},{"type":"element","tagName":"span","properties":{"className":["mtk9","mtkb"]},"children":[{"type":"text","value":"test2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"e"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"\t"}]},{"type":"element","tagName":"span","properties":{"className":["mtk9","mtkb"]},"children":[{"type":"text","value":"test2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"f"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"}"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7","mtkb"]},"children":[{"type":"text","value":"console"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk9","mtkb"]},"children":[{"type":"text","value":"log"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"\""}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"test with multiple shape:"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"\","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7","mtkb"]},"children":[{"type":"text","value":"Date"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk9","mtkb"]},"children":[{"type":"text","value":"now"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"() "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"-"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"startT2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"\""}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"ms."}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"\""}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"After executing this code it prints:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"className":["grvsc-container","quiet-light"],"dataLanguage":"","dataIndex":"15"},"children":[{"type":"element","tagName":"code","properties":{"className":["grvsc-code"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"text","value":"test with one shape: 3015 ms."}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"text","value":"test with multiple shape: 12329 ms."}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"What just happen? First of all we’ve set number of operations to 6*10^8 for every test (6 x 10000 x 10000). First function "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"test"}]},{"type":"text","value":" is called with the same shape all over again (different objects, same shape). Second function "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"test2"}]},{"type":"text","value":" is called with 6 different shapes and because of that V8 is not optimising it."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"If you open "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"v8/tools/ic-explorer.html"}]},{"type":"text","value":" and run above code with "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"d8 --trace-ic index.js"}]},{"type":"text","value":". You could be able to load "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"v8.log"}]},{"type":"text","value":" into "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"ic-explorer"}]},{"type":"text","value":". For those who don’t want to do it, here is a screenshot."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"test(obj)"}]},{"type":"text","value":":"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 225px; "},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 17.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAtElEQVQI122OywqCQBSGfWpfxlcIok3RKkbblJe0i0TSZaEmXmq0IMdR/6ahRYs+OPwHPjjnV7abNQghMAyCfXBEmiSwrSXGkymyvICu6wijGI65gL3ycI1CuK6HqqpgWg445/jQ971MRdM0qKqKX3x/h9FwgBmZ4x+xOErLh9zrukaepbicT6ieLyiHIIDj2FK2XSczS1PRKkJR3GSDz/dOuO7rKb2DsUYMk75tOcqSgjUcb90w3jHCeY7tAAAAAElFTkSuQmCC'); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"Object","title":"Object","src":"/static/324eb86220cec172bb7ad04ae55cb2ac/3684f/monomorphic-example.png","srcSet":["/static/324eb86220cec172bb7ad04ae55cb2ac/3684f/monomorphic-example.png 225w"],"sizes":["(max-width:","225px)","100vw,","225px"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy"},"children":[]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"test2(obj)"}]},{"type":"text","value":":"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 231px; "},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 48.484848484848484%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAACAElEQVQoz22S3U7iUBSF+77OxXgxJjyBhnsn40Po4AV6oxTkp0VxEEpLWyj9g7a0IoxQEoV2ze5hNJkMOzlpds7pl7XW3lyn00FTFMCXS/DDGTRFQqVSwVO3B9d1cHV9jYnnQazfQVI0mEMNrV9tDAZDNIQmskrTFB/FFQo/Ua1W2c/uxINlmeh22uArd/CDAOPJBL8XC+iaijCaIQoDOO4Yy+USuq5jmyRI6Mzncwbmvh0d4apYZHTTGKDeEBAEPsqlGyjqAPtKlmUGkuUeoucZPHIg9Xo7hfl8HjzPs+Y5iqBpGgEDSFIXwTT8tJSpyL5pmsD3fbxvNuxus91iHa8we3lBQs6545MT3N7esEvXtiA27zEajSCKImzH/QR+5JQmW8pvQKAE729vWK/XWMxnME0LGyJyuVwOxb+WJ2MX9w8t2AQWGnVYtvMPMN01lLPFlDn07nUVU64hZEXZWT49/Y5Gvc6awPfQo3w8GoQkSWR9ulehbdsZFzaBV/EaKxpQFhMDfj08xOVlYWfZsVEj+HBIw6lVYYys/4BEpPshG4quq5TdHGE4xQM5SzLLP87OIAgN9nZK01X6/d1Qul1amz0KCZitWEK96ziI45jlaBgGU80dHHzBxcU5e2yNDJT4Mvp9BbVajRSaey2rqsry7Dy1ael9RFGI1uMjU/gHTgbdC9Ve6CAAAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"Object","title":"Object","src":"/static/ddccaaa9086e3ec9ea45d5a0cc740341/6e622/megamorphic-example.png","srcSet":["/static/ddccaaa9086e3ec9ea45d5a0cc740341/6e622/megamorphic-example.png 231w"],"sizes":["(max-width:","231px)","100vw,","231px"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy"},"children":[]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Result of that test is obvious and "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"test()"}]},{"type":"text","value":" runs 7.8 times faster than "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"test2()"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"You might ask why creating "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"test2()"}]},{"type":"text","value":" if it looks the same? It’s because after running "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"test()"}]},{"type":"text","value":" with one shape it’s already optimised for it. I didn’t want to affect performance of the second run, but still want to keep it in one file."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"extra","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#extra","ariaLabel":"extra permalink","className":["anchor","before"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Extra"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"I’ve mentioned that shape contains more than just information about added properties. Here is an example of created shape for "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"let b"}]},{"type":"text","value":":"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 468px; "},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 225.625%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAtCAYAAACu/EtoAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFxElEQVRIx5WXiXLTZhSF85g8VEtfIAOTkpQtU1oYhg5TmEBJh2YhkHi35d1abcuytW+n58oOTQNMhGY0jmXp1/nv/e65N1uGpmE1n6PbakGp1+GPxkhUDeZshtVyiSiKcHh4iBZ/D4IArusWZ6/Xw2KxKP72fR8z3q/rGrZ++vEHaP0+Jt0efMcBDt8jePQrJksH9nSGOI5x69YtbG9vF4vP+XLDMHD79m2Mx+Piuyx4dHSE3d1dbI1GI0R8yPU8qFTreD7kSJME7mqF+WyO7zm2LEofV2tofjiD2R8Ar98guHsPY1VFMFGRL1fAzi/I603kfCBPU+R5jizLis/r55Zumkj4oxwLKvKpFFSX8seYnzavpUFIyel6wWsLXB6fFzR6fQxrNVRPTtGvNxAzhtGzF5BQLAZDBNxy/vQF0B8WC2Lz8m9u2eDWEirIGMeEZ6bpyHqDQqEojfhbzoTBWa4XvKLq6wtOJtBGQyjNFuqMpddsI6nUoDGTU75sZk2RnlcAUVpmQUmEQ+4cwwTzD5ydI351gBVjh5XLawHyPw+A8WT9xE1blqR4gV+w1WbG3YWDnAu7hHgqzPFMZXGGo5zCbhdjJkXtKHBF5StiQ0yEyZxgi8p85z7yRqucQlEm6fY8Fyb/Xgki8hwxWbL0pKTSK2jcCLbBDA4qFbQ+nbP8ugT7LXyCPWSyfMY24aKXYJdSKKqkXuUQqD2p5ygmx2mBkahMBfYN2Ddjw0SodJLK8QmUiwrSo1NEL19BJTJzQu+bFvKXr4HRpCTYDL7HLEqNxilLbjBCWmsgINTycCjZJZdggsopJF8W46U0m2hVq3CVXlEplmXCoj3NdAMpr4EmUW7BwQA2XcXWdcaKYJ9+LGrZoXFCTsYTz/5AzpeUw4Zgr/jg3LbR6XWxJNi0mcIf5ZoupUfISyfFVLpQ6TJ91vEl2OHOHjRRzIRAMixgN8uCbVmQW8S1pY94tPlCCE8pyRkx+j6wiU3v4gKNs48YsfxScezdB+jTDz3GNpLa3n0I0IVKY5MTkYxnTFMI5/Y6GVSThiF8Zjcr4hqXx0Zl16uLSqITf7pAdPAXJkzWjAodUXjwjvalbhTelJThECvpK66HnNgkdJX07BM8fgeNQqwrOzkDmO2SCsdwmJgey69Fk/CkxAjzgj5osulPaRAZz8JoSy1IhQa3bHORUGL3/gTh/hNMxSQEdDGO/d+Qt5XyYEvntwnxkIs70ofFeTbXTLKYbhYph42iYMKZRmEjmjPw4ofBnZ+LJhVTdaHy7l55PxSwpdHLuy0qkl4ih1wLCLlsPU2zInb/a/TfgH3j2FVUj08xbrWRvnmH8PETDAn2cjhCbC+QP2YMO11cfTTfjCK4liiCrReDkWwlikIk9L1ManqzvYCxTFUdCNclGVK1R+C/rZDYjNlLGgI2/dA/r9K1T9AbDlBnOVbZa6K3h3BrdbTabRgcTxzilLN3S4VdR6kA25tO4ZI7yJvp1vnxByxdDk68LrDLzBgTG5kFIcBL9Ujzl51dX1BnNh0OlzI8NjodeMQkY1UsxQ/pPiZru7CxKy70ebtf27I0eo1eZ3EroQyXkpQH+5CJAvNFYRT5/X2C3VkvkG0yvsn8l0mhQmmZMi9P2FtW/gYbbkeuTbntL/xQPi/PLxakQmn0CtGRgItj+9s7GLGNRgQ7k4Hpzr0ituUavTiN+CFvXDKWMtUXMzZVR0ySqEyT9D+FN5qDDEvsKZWjY/TYV7K//0H4+/Ni+zZHvVD68dPnnGAHJR2b/1sIvAW0cYRkMmYf7iDeCAmoMmv2AbvkBGtqBvSxhladmdZMxBa3b6V0HgXtRg11GkdgcYJNnJILqgZsi6bgrGMH0pIoHntSFXPLWD+vvyfgWkmD5ZYXNt2ZfbjZamKps3fMp7BZDYVrM2mpwcYVRGUn2B40usyAiXGlItiQwr1HEONN5LuU2t5D5LynDDb/ArKleLb+MVVhAAAAAElFTkSuQmCC'); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"Object","title":"Object","src":"/static/c1c6d744d27740eafca5339c43cc1d86/90372/full-maps.png","srcSet":["/static/c1c6d744d27740eafca5339c43cc1d86/72799/full-maps.png 320w","/static/c1c6d744d27740eafca5339c43cc1d86/90372/full-maps.png 468w"],"sizes":["(max-width:","468px)","100vw,","468px"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy"},"children":[]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"If you want, you can generate that for your code by running"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"className":["grvsc-container","quiet-light"],"dataLanguage":"bash","dataIndex":"16"},"children":[{"type":"element","tagName":"code","properties":{"className":["grvsc-code"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"d8 --trace-maps index.js"}]}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"and uploading "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"v8.log"}]},{"type":"text","value":" into "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"v8/tools/map-processor.html"}]},{"type":"text","value":". When it generates chart, click on "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"Transitions"}]},{"type":"text","value":" and explore a list of them at the bottom of the page."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"style","properties":{"className":["grvsc-styles"]},"children":[{"type":"text","value":"\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .quiet-light { background-color: #F5F5F5; }\n  .quiet-light .mtkb { font-weight: bold; }\n  .quiet-light .mtki { font-style: italic; }\n  .quiet-light .mtk3 { color: #AAAAAA; }\n  .quiet-light .mtk7 { color: #7A3E9D; }\n  .quiet-light .mtk6 { color: #777777; }\n  .quiet-light .mtk9 { color: #AA3731; }\n  .quiet-light .mtk1 { color: #333333; }\n  .quiet-light .mtk4 { color: #448C27; }\n  .quiet-light .mtk10 { color: #4B69C6; }\n  .quiet-light .mtk5 { color: #9C5D27; }\n  .quiet-light .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(0, 0, 0, 0.05));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(0, 0, 0, 0.2));\n  }\n"}]}],"data":{"quirksMode":false}}}},"pageContext":{"slug":"/2019/08/v-8-function-optimization"}},"staticQueryHashes":["2857265606","3631363646"]}