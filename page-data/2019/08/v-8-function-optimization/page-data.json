{"componentChunkName":"component---src-templates-post-template-js","path":"/2019/08/v-8-function-optimization","result":{"data":{"markdownRemark":{"fields":{"slug":"/2019/08/v-8-function-optimization","tagSlugs":["/tag/engines/","/tag/javascript/","/tag/performance/","/tag/internals/"],"readTime":{"text":"34 min read","minutes":33.9}},"frontmatter":{"description":"JS engines are complicated piece of software. I want to quickly explain one of the optimization techniques V8 is using to speed up your code execution.","tags":["Engines","Javascript","Performance","Internals"],"date":"2019-08-06","title":"V8 function optimization"},"html":"<h2 id=\"setup-optional\"><a href=\"#setup-optional\" aria-label=\"setup optional permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Setup (optional)</h2>\n<blockquote>\n<p>If you don’t want to run it on your computer, please skip to <a href=\"#what-are-we-trying-to-optimize\">this section</a></p>\n</blockquote>\n<p>First, we need to install V8 to be able to run it without whole package (node or web browser). I’ve created gist describing the process for Linux users.</p>\n<p><a href=\"https://gist.github.com/burnpiro/d85d836200df93af892877c2cf37f12c\" target=\"_blank\">https://gist.github.com/burnpiro/d85d836200df93af892877c2cf37f12c</a></p>\n<p>If you’re a Mac user, it should apply to you as well. If you have any problems with installation process, please refer to <a href=\"https://v8.dev/docs/build\">Official Docs</a></p>\n<p>After installing you should be able to run code like</p>\n<pre class=\"grvsc-container quiet-light\" data-language=\"javascript\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// index.js</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7 mtkb\">console</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">log</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">it works</span><span class=\"mtk6\">&#39;</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span></code></pre>\n<p>by calling</p>\n<pre class=\"grvsc-container quiet-light\" data-language=\"bash\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">d8 index.js</span></span></span></code></pre>\n<h2 id=\"what-are-we-trying-to-optimize\"><a href=\"#what-are-we-trying-to-optimize\" aria-label=\"what are we trying to optimize permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>What are we trying to optimize?</h2>\n<p>Our test function looks like that:</p>\n<pre class=\"grvsc-container quiet-light\" data-language=\"javascript\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">function</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtkb\">test</span><span class=\"mtk6\">(</span><span class=\"mtk7\">obj</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk7\">any</span><span class=\"mtk6\">):</span><span class=\"mtk1\"> </span><span class=\"mtk7\">string</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">let</span><span class=\"mtk1\"> </span><span class=\"mtk7\">result</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;&#39;;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk7\">let</span><span class=\"mtk1\"> </span><span class=\"mtk7\">i</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">0</span><span class=\"mtk6\">;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">i</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&lt;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">N</span><span class=\"mtk6\">;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">i</span><span class=\"mtk1\"> </span><span class=\"mtk6\">+=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">1</span><span class=\"mtk1\">) </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">result</span><span class=\"mtk1\"> </span><span class=\"mtk6\">+=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">obj</span><span class=\"mtk6\">.</span><span class=\"mtk7\">a</span><span class=\"mtk1\"> </span><span class=\"mtk6\">+</span><span class=\"mtk1\"> </span><span class=\"mtk7\">obj</span><span class=\"mtk6\">.</span><span class=\"mtk7\">b</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">return</span><span class=\"mtk1\"> </span><span class=\"mtk7\">result</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">}</span></span></span></code></pre>\n<p>Let’s assume this function is called thousands of times during our script execution so it’s important to run quickly. Before I explain how that is optimized in V8 we need to know what are Shapes and how Inline Cache (IC) works.</p>\n<h2 id=\"shapes-maps-in-v8\"><a href=\"#shapes-maps-in-v8\" aria-label=\"shapes maps in v8 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Shapes (Maps in V8)</h2>\n<blockquote>\n<p>Academic name of the Shape is “Hidden Class” which might be confusing especially in JS so everyone calls it differently, but name introduced by FF team is probably best.</p>\n</blockquote>\n<p><code>Shape</code> contain a lot of staff, but when people use that name they mostly referring to it as a table of <code>descriptors</code> for object properties. Shape stores other information as well, like size of the object and pointers to constructors and prototypes. I’m going to show you that in the example soon.</p>\n<p>Let’s start with a simple object:</p>\n<pre class=\"grvsc-container quiet-light\" data-language=\"javascript\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">obj</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  x</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">1</span><span class=\"mtk6\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  y</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">1</span><span class=\"mtk6\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">};</span></span></span></code></pre>\n<p>It’s representation in V8 looks like</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 581px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.24956970740102%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAACjklEQVQoz5VSS08TYRSd4qhRjIZEtib+An+Amkh8BBdqXLn0J5goGxYmLIrUNkTEClEx+OBteRSYTttpZzrTDgwtBXkUBjoDBQatLZUZWkDb4nW+UdmoC77NuTn3kXPPdzHsgC9BeXCEqz6vGcQ5mO7vy7NvW+ELF4Cpvl7AJpVxPDBD4+wsg0+sRvAhoX+/OcP4S1KMH0+QBL4ZYnGNC5QsuAhj4Fh352PJQ0Lc7cpnRnmAuVkQiWE4qEDsQ73tKEJX83NbT70N2i11u30NTwrikLMw6egpYBNrkdqQyFlHFoJWPa4jwgNn9hXSvjsbAfrpJ8rzSAtxjdkge3l/da/btjf9ERS/D/T1YXs8DEtuErClnASh+SBwMRbkrTj4ptyX/jR9ZRkS5mMQ6+8FkBYhHxZsv1OmZY/72uZI6JkmjNSqo7xlZzxsifZ0W7AFZf6BtqMWv//4BiupRBOqBvhlxbLXc243lVIgl4XsujJDNTacRcNuX71S+l9PlIRyHfbAeOlkuhpxqUz6MMLqVy2lWi63gnIZVR3TqZK7t24aHsZdwxfTQfYh0/r6fpfNWiWRRFWkq7MKS6wkKrPZrJLbzm0mk5/voeJioXgIodPhKNNUld/a0tTMxsagCcOO36ioOGmop7w2WBRhjfbDeoABFK/SPsAcDscRmqZPcxxX7nQ6j6FiPTbU19TUmCiKKhMEoZwgiFOIq7xw/gRCX8tLK/umFYSOtl3Z7SruRCNFcWiw+JcF0WjUQLPZ/E+L2ix1hh38+3fWcFcHuF8054kmO8wNDoB+NoDxPI+JomiKx+OmSCRiNMmybKDdbsdisZhJkiQTQsQlWcY4bMlFmPUfBpl05WWSAJ3X1bbDT9RapbMCPXcrAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Object\"\n        title=\"Object\"\n        src=\"/static/259952ab89a53e4be50f41810e15d7c3/447d2/Shapes.png\"\n        srcset=\"/static/259952ab89a53e4be50f41810e15d7c3/733ef/Shapes.png 320w,\n/static/259952ab89a53e4be50f41810e15d7c3/447d2/Shapes.png 581w\"\n        sizes=\"(max-width: 581px) 100vw, 581px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>If you look on it, there is an obvious distinction between object values and their description. Every property on that object is stored in memory according to <code>offset</code> defined in shape. In our case property <code>x</code> is stored with <code>offset: 12</code> which tells v8 to look for <code>obj.x</code> value by offsetting pointer by 12.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 604px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 15.066225165562914%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsSAAALEgHS3X78AAAAkUlEQVQI12NgYGCQBmJFKC0DxKwM+IECEIsBMQdOFaU5VcL////n+v/jP8/Ty2/5Lhy4zn/58G3+y4cg+MKBG/xPr7zjmzdpiUh34wQJoFpukNjFgzf57597zn/lyB3+S4dugfWADbx+6t6GO+cf/7997tHHO+cefcaBPwHVfL545PrXW2cfAvmPP9+F8D8j8wGA0HGkywCGtAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Object\"\n        title=\"Object\"\n        src=\"/static/024a2dd52718fd7d45927b3b1ddd0e6b/663d9/memory-example.png\"\n        srcset=\"/static/024a2dd52718fd7d45927b3b1ddd0e6b/733ef/memory-example.png 320w,\n/static/024a2dd52718fd7d45927b3b1ddd0e6b/663d9/memory-example.png 604w\"\n        sizes=\"(max-width: 604px) 100vw, 604px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>Ok, so now you know what a Shape is but why is it so useful?</p>\n<h3 id=\"shapes-usefulness\"><a href=\"#shapes-usefulness\" aria-label=\"shapes usefulness permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Shape’s usefulness</h3>\n<p>When you create an object, you don’t really want to store all information about it again if you have a similar object in your system. That’s why V8 is reusing its shapes.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 581px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 86.23063683304647%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsSAAALEgHS3X78AAAD1ElEQVQ4y5VUXUybVRj+aL/NjZkU58VujAkkG2XRzF1Mr3Yz1IjRCxMz8cIbf+ISXZYs8cJsqETN+NlAzcBk6zRbthFoocCgf/SfstJS+t/SUfrDVz7afu3XrpTSNta+nvOtNYahiefmOXne97x5znmf9xCGoOqQk16O69wakFtlFU/SBWqXop1A64132g8Q/3eJLIOkm3aqvJQbHCE7eGjXum5F1YZjLUebD+3Oj6oUHIaVcl5q3kAujY6QczdvkHG9lnSNS0guGIlE2svl0p+AVjqd/g5zaMtDsKdCxqhv+E+VqOC7UFsMw1zDXOWPCn+vghGkjFOokL2VNhmHFu/dvTI7PNRHzSn7lsdG+7iklYBfmEqnetJsepCiqDcxl9vebnjxyJHGknmBl9VreDmDjpeQzzZQWjV3rbBKcQ3Ca5A0GYFZmAcIBWFDp4G9FTNUw3vHX8Jb/u6YRnRjH8bp679clQwOwMzw9YJdPFrOPDSVfVOTZcIcNjRHCqvCzQp13EnbWlOwsb9+eODC+RakUAjh4LEiwqxSLvi0s5NT6BwX9wQeTIPx9u+gvSWCkFwGHuk4EMgyVdnizM6s+cGOPWaraD2q0/WCj416ccaoA8fIvUzJugilxYc/1GMx9dxX7MJ8ASkLI6QKNivlmpBQhId2GgP0CgTjj8C36fGM6O40o3yui6vTk105jwsSjmXIOuzlxwbtWcyfFLY2eial+zW/iZ5zTkgEjnGxwC4ZE9zt7REQdHTzTLlUruIOswx7sWYZ7lqHXz7xfL5YDOBYNp/XY+5E6zHceb70av+B+z9+f7j3/BdNXZ983IT2TTcvX2oi1qn1s3XLJJKJK/hQnKWfwdj9TdcL+a0thiuYybifJfmN5zo/OMhdWav+OmsxV1yTE7Thzu1kamE+6ZmSJgn/ir+FSTLnMunsZ5FAVPjPjnZ0dDTF4/GPEonERWSn97GyM6+9KsCxZfFob3ROCSGFHPJLFoDVAKDpeWKb5lv7+IaQ+tSjnPd0ION72xIxnazVfMrYX37YyXHIzP2y4SGQ/vzTtuzXodKabKbknpCUuCR33PE5VYyCWD1WtYYt4Np0rGFe2NZ2EI8gTdMkUslNCOomWZuUgZLdhhTKIKJUQAGpxMgVlLunj4aYoD/GUhBOrIErZr+EeZ3JwNut0DclrY/e61sWc/+Ozfrt9pKlu2y3dSODd//d0Vw2J8KPX9wpbgWcgRbMbWzEeHtNEkRC//451H4VAnX4fhWqwLJswevzvoI5r9f7VEH0+E8w4OcBTZEQp0mgYySwKRIpJv8CS8J2AqR1kuYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Object\"\n        title=\"Object\"\n        src=\"/static/dcf8b8ccf851959e54fbd4a4c8a48bf1/447d2/multiple-object-shape.png\"\n        srcset=\"/static/dcf8b8ccf851959e54fbd4a4c8a48bf1/733ef/multiple-object-shape.png 320w,\n/static/dcf8b8ccf851959e54fbd4a4c8a48bf1/447d2/multiple-object-shape.png 581w\"\n        sizes=\"(max-width: 581px) 100vw, 581px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>code responsible for this situation might look like</p>\n<pre class=\"grvsc-container quiet-light\" data-language=\"javascript\" data-index=\"4\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">obj1</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  x</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">1</span><span class=\"mtk6\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  y</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">1</span><span class=\"mtk6\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">obj2</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  x</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  y</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">4</span><span class=\"mtk6\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">obj3</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  x</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">5</span><span class=\"mtk6\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  y</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">6</span><span class=\"mtk6\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">};</span></span></span></code></pre>\n<h3 id=\"not-all-objects-with-the-same-structure-have-the-same-shape\"><a href=\"#not-all-objects-with-the-same-structure-have-the-same-shape\" aria-label=\"not all objects with the same structure have the same shape permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Not all objects with the same “structure” have the same Shape</h3>\n<p>If you compare these two objects</p>\n<pre class=\"grvsc-container quiet-light\" data-language=\"javascript\" data-index=\"5\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">obj1</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  x</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">1</span><span class=\"mtk6\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  y</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">1</span><span class=\"mtk6\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">obj2</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">obj2</span><span class=\"mtk6\">.</span><span class=\"mtk7\">x</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">1</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">obj2</span><span class=\"mtk6\">.</span><span class=\"mtk7\">y</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">1</span><span class=\"mtk6\">;</span></span></span></code></pre>\n<p>they might look the same, but they have a different shape. Shape of the first one we’ve already discussed. Shape of the second one is here</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 581px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 65.57659208261617%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAADHUlEQVQ4y5VSS0wTYRBeWhBSJIaTiRjwddBEo+AFL0YORg+aeNGEk5JooibGRBJNCBwMMTE8TMBHKY8Djz5RgVqgbLt0WUof9EEhlFIpbaFUC7R0YVsaWmTcf5N6UDg4yZ/5Z/6ZL/N/32DYX8bn8bC96Sk+utMUKWRMBvColLA9aYJNNkb5NUKThf2PhSmSh/wGOfrcPzxocw30jQa1uJ0FfIbyO5MmXlt1VVZT5YtcS3eXAFaWBA6ZRNBeUy04CJP/pLyct98D7CQykQ/qiBeMxbwx3fdlXtvR7glRpIe9e7CpFRt/fI7ix4HhtcpbMk+cLsqcl8gyUFOU0BRHKfLRgrL/6SqhebyOqy+ngU0ySeMiroa5b0oIG/QAbhd48RHYd7yed3UcR5t6ShyhSLBJxXsJxKGe6k7XjIha6gY/fYCB5qb4iEiY9KqHktNfPicx67K50rxoqLL4TDW25cmXvTrJsXSTT9lfyvh9DCS2YdO7GJtRyK+x6Vz0ZlXIPm5bJ4EFAs/wINCseAtDKsACySUgZ3SgtWvAF/cCbh+6jhrqm2u5KSM03cUe52ok0smGWecKC/NQflE9dCespySRiXFhRE+J4hazyKaQizBXYLYqwoR/xVMx8IY87aj46OGCrFMni7L3o+NIXt6hx/fuHrw2AV/gxm5qF5Ct/Vx7xU33ppaTf8c4cTNEaD6ye/j+h2ZEGCWJW+m+74OqkgCheYK3ie7LGuor5lXKCqO4pwLzL/lvMwyzFYvHIBQKcYDCujoOcF1HiLdYbpz9XyFpt0LcONGRBvRr8UYILEFofAyCpA5gwQ0r5ChgY2NjOU6ns8Dtdh83GAwcP72tIrQ2GaqG+jOJtVUPxGLA/Ah6idaWs2w+B9WYpeLX+u5OsMql28saPJV02FNulTL1DwUulwtTDKv/xDTDzCI6WGFm84tLcq5eOM+pTHS0NWrbW0HR2JCUN9TD1GcFWORSwBwOBxYMBjPY72YgMGRSsZjzZVdKs+lo1EjT0b1wOGx6+OBBftmlixwdflz9FuZmgTZOJFmlIWGzgHOgD34DiDDrjjYiKsoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Object\"\n        title=\"Object\"\n        src=\"/static/c7ee17c162fc4e6a44d5e4bc2e7c18e0/447d2/shape-transition.png\"\n        srcset=\"/static/c7ee17c162fc4e6a44d5e4bc2e7c18e0/733ef/shape-transition.png 320w,\n/static/c7ee17c162fc4e6a44d5e4bc2e7c18e0/447d2/shape-transition.png 581w\"\n        sizes=\"(max-width: 581px) 100vw, 581px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>During code execution V8 is creating 3 different shapes and transitions between them to describe end result.</p>\n<pre class=\"grvsc-container quiet-light\" data-language=\"javascript\" data-index=\"6\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">obj2</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// Shape M0</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// add &quot;x&quot;: Transition to M1, offset 12</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">obj2</span><span class=\"mtk6\">.</span><span class=\"mtk7\">x</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">1</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// Shape M1</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// &quot;x&quot;: at offset 12</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// add &quot;y&quot;: Transition to M2, offset 16</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">obj2</span><span class=\"mtk6\">.</span><span class=\"mtk7\">y</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">1</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// Shape M2</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// &quot;x&quot;: at offset 12</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">// &quot;y&quot;: at offset 16</span></span></span></code></pre>\n<p>the same goes when you’re creating classes</p>\n<pre class=\"grvsc-container quiet-light\" data-language=\"javascript\" data-index=\"7\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">class</span><span class=\"mtk1\"> </span><span class=\"mtk7 mtkb\">MyComponent</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">constructor</span><span class=\"mtk6\">(</span><span class=\"mtk7\">size</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> </span><span class=\"mtk7\">name</span><span class=\"mtk6\">)</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">    </span><span class=\"mtk3 mtki\">// Shape M0</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk5\">this</span><span class=\"mtk6\">.</span><span class=\"mtk7\">size</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">size</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">    </span><span class=\"mtk3 mtki\">// Shape M1</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">    </span><span class=\"mtk3 mtki\">// &quot;size&quot;: at some offset</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk5\">this</span><span class=\"mtk6\">.</span><span class=\"mtk7\">name</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">name</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">    </span><span class=\"mtk3 mtki\">// Shape M2</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">    </span><span class=\"mtk3 mtki\">// &quot;size&quot;: at some offset</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">    </span><span class=\"mtk3 mtki\">// &quot;name&quot;: at some other offset</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">}</span></span></span></code></pre>\n<p>To be 100% honest V8 doesn’t store whole shapes when it does transitions between them.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 366px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 104.0983606557377%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAAAsSAAALEgHS3X78AAAEpklEQVQ4y5VUW0xbdRg/hRLBZeKiRkUc+mBmluzFlyWyRZM96JsvvuiD8X0PxvCgvsg2JRsYhoxbCzKEISunp6XQQnt6L6VcWkpbCoWOS4FyLaWjh7FCTzmf3/9A2WJinP/ky/96fue7/H4flXTYduN2q5AYtGUSDltm02w8TI+7gbNbmykcsBbNWWe6yZJqvlFOdVVVUn9V3ka7c2qdd25Tit+qKHn5z/hBwAfubgU4H3TAuLIb2BY5xF1OOPJ6ekVAAAlvt1LZ9amFZyQwG5I88YxJnj+nknar+cmIa2zbanZvmFh/anTYuTc8FNy1mn8UQVaWJCdg1AsPuPWD5Nr54pffyH/pHdkrBTnl7xXnZu/k338nekbWoV5N2YbNols2GhSsvIk2yJpoXUMdPdOnoRMuJz2t6aH/iS15fuOUNVIFZ84QwByyXx+0D8DjHYDZGYhYTODX9MBEjwo4zDksLcJj9yhQ62rmoySrv7I9oL3G1lR/KTjtlzf7NJ+uq5TnTyM4CTek7VX61QwE1KqDmNPBP/WO85hL/tA/wR/6vPyq1cxT3NDgge1+K5hbmmG48wH01d07wrAg4xlrJyBFb735+uVLl87i8qytrZXtb2yAntrfeTTwKLogrOuDqNkEEJqCNasZKJiahAOvByYZWrBghRNORxoW5mB/xNVHAN8tLj43368Tc+p60KG2t7WCsVnOs80yYGruAvnBBLJjQT8A6+gIFTcbq/dD0wluJiSsez1pPrIIyQnvbNKo/4KAlBQVnc2G7ul+2D1OKwDBUgiURo/TPbU16WCPKj2lUafn9f1p8WGS45YwT7C3t0cmmI9E6sn5latXX8uTSguyOdx02AwQ3wLMG8Bc+NjmHx0bFuUpFodqqLyTv7K8TMdiscDc3Nw4x3HBUChUJlJGJpMSsCxt/Crl18smtjrCGn5ZNrIVS0aDaIusvmLVYqrwMXQFFdX2Sk8iykd7Gy33q/dLcrMgD2vuUv+b2P/Gw4OpyWfk39l+MYS40VAWVinLZxn6V1dry70wQ/8UHdDeTlpMn4v5JVrd2xXfauvrPsQqf2L5o+VjVEmpl1aUItVKB9vbSoc62kvxvpQ6mhgHn0oJrs4OLD8NhJMcMp73jKkJyOHmRk5WKUhcDSwvwp57DJtJO+hlTaBrrAc8B5gOwhqhzaF7BDI+BFV08RZ5U2ZpQJci1dt12ERdBh32U8CI2cTs+7wQcw2ld0aHhS2XU0C5CRiFkAr4hBWrRaCiKvqzRHjWk4nHYWdhIcVvxwD3/lWl4uIz6QkiYEDNMEYkv0Eu4zFUASsu7CMYNzYioIcCElsQP0hwHEv49ySVEnm4tbNjI+cXL1wozMvLK8x66FZ0MSaUKBKbJwoxyJtgCEOf1fYC9sVjpZAxNTn5zdrqatXqysrNtWi0KhgIfJutuFQqPfdBScmruCxk5TK948/7opbVtTWi9LB7w2hXJxAFISfhP/kF3GNqa9AuavlRv1aN4cGiYYAP67SAIaN3fYD3sO10HAOekJYkPvf5mZxfv36darl541QpsUE7A5EFyAR8/NGkn8wgBAOArQtIk9mwW+Fv2E+bYYQGSEwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Object\"\n        title=\"Object\"\n        src=\"/static/00f6b9dd30376984b5b47ddba6d848f1/03d1d/honest-shapes.png\"\n        srcset=\"/static/00f6b9dd30376984b5b47ddba6d848f1/733ef/honest-shapes.png 320w,\n/static/00f6b9dd30376984b5b47ddba6d848f1/03d1d/honest-shapes.png 366w\"\n        sizes=\"(max-width: 366px) 100vw, 366px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>It doesn’t copy information about <code>x</code> property into <code>Shape M2</code>. That allows it to be shaped in a tree like structure when having different objects.</p>\n<pre class=\"grvsc-container quiet-light\" data-language=\"javascript\" data-index=\"8\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">obj1</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">obj1</span><span class=\"mtk6\">.</span><span class=\"mtk7\">x</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">1</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">obj2</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">obj2</span><span class=\"mtk6\">.</span><span class=\"mtk7\">x</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">1</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">obj2</span><span class=\"mtk6\">.</span><span class=\"mtk7\">y</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">1</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">obj3</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">obj3</span><span class=\"mtk6\">.</span><span class=\"mtk7\">x</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">1</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">obj3</span><span class=\"mtk6\">.</span><span class=\"mtk7\">z</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">1</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">obj3</span><span class=\"mtk6\">.</span><span class=\"mtk7\">k</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">1</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">obj4</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">obj4</span><span class=\"mtk6\">.</span><span class=\"mtk7\">i</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">1</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">obj4</span><span class=\"mtk6\">.</span><span class=\"mtk7\">j</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">test</span><span class=\"mtk6\">&#39;;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">obj4</span><span class=\"mtk6\">.</span><span class=\"mtk7\">k</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">1</span><span class=\"mtk6\">;</span></span></span></code></pre>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 677px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 72.52584933530281%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAADFElEQVQ4y41TTUwTQRTeCkJLSPxJDBj/ggdv/pxIpEKixiAQDBcDiAc9eBGiBxNjYmKChAPqCUSEohEaoiiWthYslLbbLaXbpX+ULaWUEguFLrTd0gKVEnTcWWhjkQRf8uW99817LzPfzCDItkW0Gg70wETkhLQa4FUMgiiBA+9A/yfIF/L5PMalM0iJ9yzJJAitGEDooUEWAXkfkrAIhrID13XaQ0tq5QtS1NM8NyhvWVIqbkK+urICDtrHgBvvIaQS5G8DACTlSNRsRHazHYXpyP9YvAk4J47OyKSY/HXjsLFLaFrG0Mfb65ztUt7dG6WpMJj/3nfBKRZhyrdvlISwQxnGUHl8Xkoxn88WmQSt2SFcT62QNgBmpkEQQ+vZI9+u2r+tX1reubPssXUtzedDBB5YdzpA1D4OVnRaFCm7cplbmJeXcTU3l1tZXg6FRxxTU/disdhqJLIyIejoPA258tJSXnH+pYySgnwe3C0DqCcSpOlqphaEw2GSmHZn7Hr8QbmcK5PJjjA4vBmNcvaSq6TmwcGch4+2tNW0tzUwWr2iFAMVMO9qakwa4BR2sDmzXjbW/fGl9p2gwSUWPQPj1szfuO7AD5n0KSZorR8VdtSGdVgdYu75AigNClb0w72wMUDaOCblEGI0Gjk4jnN8GjX77hh92imNGpBSMaDUqg0wimfFMPWJRVS1DjmvagisEfgveHsAbMSAzzlZCBsXPJ59lPhrYoeTzFDoLaKeY1GapmD58sLC+8T7nfc+gdzm2hrAPncXIL5A8DpF09f0U65MWGBzOJL0EQ0pt4Ksk8gsReWbrGO3ZrzzZ+LrvnAk22yzVbg9nqL7jU1pSc3jk5Os9/d9S+L9BL7rZVx8Xv8v6ff7UyBIkmRzx44dLqqV7POgUVU1cykk2taqn5b0moHNcor59+mz8n4F1i6wGDo/6CMjw6N7/qBlfIQdGNaiNWGLGVBGAvj1uhgYNRy336lKjRAGW8BsAkEGPy2muT0H1tbVJWKXy2UIhULAbrc3xzmL1Vo06/EAt9u9KpZIiv4A0i7H3CnMjbgAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Object\"\n        title=\"Object\"\n        src=\"/static/f308570cd2897cd9ddfd63e125ec184f/7a681/shape-tree.png\"\n        srcset=\"/static/f308570cd2897cd9ddfd63e125ec184f/733ef/shape-tree.png 320w,\n/static/f308570cd2897cd9ddfd63e125ec184f/70d1f/shape-tree.png 640w,\n/static/f308570cd2897cd9ddfd63e125ec184f/7a681/shape-tree.png 677w\"\n        sizes=\"(max-width: 677px) 100vw, 677px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>Notice that even if we using the same attribute name as 3rd property, in <code>obj3</code> and <code>obj4</code>, these are two different shapes. Reason for that is because shape is related to transition. If you could have a global shape that represents <code>k</code> property, it requires defined <code>offset</code> property. That might work with the same object structures in memory (offset is set base on how much space rest of the object takes before property). So if you have an object like <code>obj4</code> then property <code>k</code> might have a different offset than property <code>k</code> on <code>obj3</code> (transition to Shape M7 is different).</p>\n<h2 id=\"inline-cache-ic\"><a href=\"#inline-cache-ic\" aria-label=\"inline cache ic permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Inline Cache (IC)</h2>\n<p>Maybe start with some code this time?</p>\n<pre class=\"grvsc-container quiet-light\" data-language=\"javascript\" data-index=\"9\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">N</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">1000000</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">obj1</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">obj1</span><span class=\"mtk6\">.</span><span class=\"mtk7\">name</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">Jake</span><span class=\"mtk6\">&#39;;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">function</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtkb\">getMeName</span><span class=\"mtk6\">(</span><span class=\"mtk7\">o</span><span class=\"mtk6\">)</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">return</span><span class=\"mtk1\"> </span><span class=\"mtk7\">o</span><span class=\"mtk6\">.</span><span class=\"mtk7\">name</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk7\">let</span><span class=\"mtk1\"> </span><span class=\"mtk7\">i</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">0</span><span class=\"mtk6\">;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">i</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&lt;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">N</span><span class=\"mtk6\">;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">i</span><span class=\"mtk1\"> </span><span class=\"mtk6\">+=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">1</span><span class=\"mtk1\">) </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtkb\">getMeName</span><span class=\"mtk1\">(</span><span class=\"mtk7\">obj1</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">}</span></span></span></code></pre>\n<p>and then run this code like</p>\n<pre class=\"grvsc-container quiet-light\" data-language=\"bash\" data-index=\"10\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">d8 --trace-ic index.js</span></span></span></code></pre>\n<blockquote>\n<p>Off-topic: you might wonder why we’re running function that many times. It’s because V8 won’t try to optimise function unless that function is marked as <code>hot</code>. And you get <code>hot</code> status when running function many times.</p>\n</blockquote>\n<p>Now you can open <code>path/to/v8/tools/ic-explorer.html</code> in your browser. That page allows you to explore what is happening with inline cache.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 350px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 132.57142857142858%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAbCAYAAAB836/YAAAACXBIWXMAAAsSAAALEgHS3X78AAADn0lEQVRIx5VV2VLiUBTk/3/BKkdHX8byySp8GRdKUVAWQXYQEpYACQk7BFk8c/pAUkFQa27VBXKT9O3u2+fgo/8cHx8f3973NTWNFFWlWrVKxUKB+oMhKZUy3d3d00MwSMGHB/l+SbySZZny0mq1EmAH3PvbZ0+nNJlM6P39nWzbpuVyKdeWZVG32+XZk+9eryfP/MTY57+8pOenJ7lYLhdUKOSFpTOwAYAwVVaCWS6XWUWFdF3fZXhyekq3NzcuYKlYoF5/4ALO53NhPhqNqFgsUiqVokQyQW9vb7LZDiAkmZ2OvDAYDKjRqPP3UCTiGtLxu8PPgBFAZrOZTIbake3DR71WpZPfv6nV1qlcKtD9fZBZvFKtXpMDa7fbVOVDa7VasnGr1aYpe7/XQ3xoWpMCgYC7mM1kBNw77KlN7yw/kUjIBOvPcl1AezqhOrOJx2KUyxdpwi+XSyVhV2KvFKUiVmgcscFwwOxsNz57JcPsX4eHEg9db9MDZy8ai9OQ5UHicDhkwIb4GQqHqMSbedl58yiAoF/gUGMsFnP2qMlA483Daxbj8Vii02w2qd/v83ML95S9LAWwzQCxeIzzGBZmyWRSfIKP4XBYGCGf2WxW8ocs4pBMZvxZugAqikLn5+ebrZYUiUSoXFG2DgWykcdQKETpdEosgFVQpqrVbcApH4qmNUg3DDdvyKfB15jwFuuG0RFQJ/CQDOmLxfIzwwqdnf0hjf1p8by6+ivNAPlTFFXAVFaBjQA4Hk+2/Nv1kB98fHx0b6JWdd3YesEJMgDBGMw+59Bl2NFRCTWq1WriT5MroV6vcybzsgaPkUF0oZ96owDC2IODA1nomh26DdxSJpuTmKBm4RfKDXGJRJ4F/Ku+6HMyhuw5RW+apsgCkNNt0ChwD+vrxkBfe4gO7ff7JQrxWISSrynKs9x0OkMq583JHaIDMEgHCUx4u5ND+HRxcbHZakUxrmmVPfUOVA4AkUOUXzQakcYcjb/QeOOtCzizp2TwSVf4dA3TEvmW1ZXIoNTAHHlEbAD63Z+Xz4nJ0dGhvAD/rq+vKMIliBo3OoasQQUOpb/p5t4D2Y1Nx5TaXSteyimiUrzDGxkv0F5Ak1lkc1mqNzRKp165B5apwHVaLBUpl8vLoSCXTly8+dvbsdFNjo+P1hUxGUn3zjDQup0tRB7KDxaE+UDSmTRVeRPTtPY3WGQNjdS5iUCjVr174xrAyKSTV++/njP+AVaUAli+qlywAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Object\"\n        title=\"Object\"\n        src=\"/static/1babf57079d1b038ded7d155f1a003ec/d6f3f/trace-ic.png\"\n        srcset=\"/static/1babf57079d1b038ded7d155f1a003ec/733ef/trace-ic.png 320w,\n/static/1babf57079d1b038ded7d155f1a003ec/d6f3f/trace-ic.png 350w\"\n        sizes=\"(max-width: 350px) 100vw, 350px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>Important part of it is <code>state</code> which can be one of the following states:</p>\n<ul>\n<li>0 uninitialized</li>\n<li>. premonomorphic</li>\n<li>1 monomorphic</li>\n<li>^ recompute handler</li>\n<li>P polymorphic</li>\n<li>N megamorphic</li>\n<li>G generic</li>\n</ul>\n<p>In our case <code>state</code> is set to be monomorphic which means that function is optimized to receive only objects with one defined shape.</p>\n<p>Now let’s define what IC really is…</p>\n<p>Unfortunately, we have to do it in the hard way. By looking into some bytecode (There’s a <a href=\"https://medium.com/dailyjs/understanding-v8s-bytecode-317d46c94775\">blog post</a> about understanding bytecode by <a href=\"https://twitter.com/fhinkel\">Franziska Hinkelmann</a> if you’re interested). To do that just run</p>\n<pre class=\"grvsc-container quiet-light\" data-language=\"bash\" data-index=\"11\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">d8 --print-bytecode index.js</span></span></span></code></pre>\n<p>Output of that is quite long but we’re interested in last part. Look for <code>generated bytecode for function getMeName</code>.</p>\n<pre class=\"grvsc-container quiet-light\" data-language=\"\" data-index=\"12\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">...</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">[generated bytecode for function: getMeName]</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Parameter count 2</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Register count 0</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Frame size 0</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">   69 E&gt; 0x2d34c959f9d6 @    0 : a5                StackCheck</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">   86 S&gt; 0x2d34c959f9d7 @    1 : 28 02 00 00       LdaNamedProperty a0, [0], [0]</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">   91 S&gt; 0x2d34c959f9db @    5 : a9                Return</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Constant pool (size = 1)</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">0x2d34c959f989: [FixedArray] in OldSpace</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"> - map: 0x0741c8840789 &lt;Map&gt;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"> - length: 1</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">           0: 0x0741c8843eb9 &lt;String[#4]: name&gt;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Handler Table (size = 0)</span></span></code></pre>\n<p>Look on <code>LdaNamedProperty</code>. This method is responsible for extracting named property from <code>a0</code>(argument 0). Property name (in our case <code>name</code>) is determined by <code>[0]</code> constant from <code>Constant pool</code>.</p>\n<pre class=\"grvsc-container quiet-light\" data-language=\"\" data-index=\"13\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"> - map: 0x0741c8840789 &lt;Map&gt;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"> - length: 1</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">           0: 0x0741c8843eb9 &lt;String[#4]: name&gt;</span></span></code></pre>\n<p>After getting property value from argument, function stores it in the accumulator (function returns accumulator at the end).</p>\n<p>That process generates sth we call <code>Inline Cache</code> (<code>IC</code>). Every time function runs with a different object shape it creates a new IC entry.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 567px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 83.06878306878306%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsSAAALEgHS3X78AAADmklEQVQ4y41UfUxTVxS/bRUobW0JuC2aaCN0AQ0x27LoH8s0JouJJhj/2kIgm5oskUg0LG4kXWWzyf6ZJBozMaKCWkA+YqmoJdBCsZbSEiilff2gX6N7IIJFXsX1U87ufYiRZKAnOfmde8955/3OOfdehD5ATKrbXILW1pbPGYs5PW3oA0PjzaWR9tZUym6DUE93M/Enxka5KH2/Mg8MilztH+W5eTl5ubsLZeKuqVrJweN7JDiGQwIBgMVQb88X5pbm9EhHGwR7updeWMwp8HlhxjjAJgSvGyfsOlMAuu8+MlUhEd77GGvmOTgmOnp6/xZss8w+KyzMJqi+dHEf1iTWtObypdTw3ZZ41GKG2ccGFZvQ5WTjEa3VFzva2susd26doDraymc6H+19w4z1F8tkQoKeLs2XEw8fgP1eB9gwS/d9DaTGRuGpoU9N/ElSMpFXZpNm3jgA2r8uw2S3FhiT0fJuqbLt21iGlEYti5iMuhlDn2FhaLAfs9NhHQrreuTEn7bb2Hj0Qt97cM45Pj/lcADj90HUOvQj2b9Se4G3SyolZvb3JSWc9Qa3Us1bI8IwrWGafv50dtZ9vVOzlfQvP7+AMOOTvp58DGjQDJz9e78S4W+4R745JGi8ULeR2BAB7tdnnKiqdm45qae9lavraOffunZNfKKsbPN45z3e/7HYwEG8bB7ayNr4J9sz0SrWB76NrFkBHwsbvO3Tw+9s78Yn4SxOSKoqFiN0PAPbeBBBXsEmWE2CpmmkVqs5b7KRaWVvEORzSUuOiYH709XgnbP1E5SyZcpyvpm2yhsC9t9UkyO/N9HDitvh4V8aJkfL5TM31uszJyfnE+HKoqqO6qvTM3BDPwc3+yNQr3sO1/XLerV3Di4+moUfFNMD753auZ/P76r/s3FP212tcvpZBHwhOj5OTSQpTyDp8gaT7olQwuv/O+XyBmLDY56daya06sbYnlBm/ylq0L8QdEw+A1iC1+kUxGL/QjS6AK8WX0IiHoOl12lgmAUI+r1FayaccsyzGLJPC/sbbEIP5SuJxWKheDzhiEZfUv5AwBUOh6nFxUUqkUy6GCZqdzpdO9Z9ZXzWf1atlUolX/6rPMtoNGZUVlaKVSoVv6mpKbOmpiZLoVBkVVdXr334nU98LFJPAsg24OK8vQnLQk7BZqybVh6QDxa3281iRUUFi1KpNEMikYgEAkGuSCTCpkRYVFREbgwqLS1F/wH9YeujVOxnawAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Object\"\n        title=\"Object\"\n        src=\"/static/dc7336f187d4a7389e1ae63e15d1e592/79659/ic-create.png\"\n        srcset=\"/static/dc7336f187d4a7389e1ae63e15d1e592/733ef/ic-create.png 320w,\n/static/dc7336f187d4a7389e1ae63e15d1e592/79659/ic-create.png 567w\"\n        sizes=\"(max-width: 567px) 100vw, 567px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>We’ve called <code>getMeName</code> with an object that has given shape M0. First run of the function works as described before so V8 has to look up for named property on <code>a0</code> and store it into <code>acc</code>. After running bytecode it creates IC which contain two things:</p>\n<ul>\n<li>Shape</li>\n<li>Way to get to property</li>\n</ul>\n<p>Now if we call the same function again with an object that has the same shape:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 567px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 83.06878306878306%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsSAAALEgHS3X78AAADiElEQVQ4y41Tb0xTVxS/75Via6l0yua+LCGLTVaTTcOyZVmWfdiXfTH7uoTMRBc+kbE1LovE2nSTTybT6JZtOLUqFhBkZfxbwb5XqG1Wai1QaF/7+odCKRQrsLaU9a+c3fsUM01AT/LLOfecX373nnvPRegFtmt3JQoODdIkvnersy7tdJSXxiwwek2/6b7dVSp5JiF6Z7iD1AtTEzQq9zfVAKvZ13DkgxqZuFpx/Ksj1ca5s3tPdR9TVIhFUkK03rwuCMYsTJ2js6N8v6cb5lnzZso5XoIQD8s2qyAIvJ9GpQH1AWDq9+O1HKMGQ6wrf/mKztjwBi2iqgjR9PuvguDssKmu9+KFQt9PF8sjl34r3bvVkc84HZC8O2YQBDmvwENxk+Vt3mj8wtl2vWG6s/PoP4Pm97daflelRIssIxCDQwPv8UMDwA/2w3TvH8D1/wmlqQlIjFl6Sb1IWia24bD3rdmsYPrlZ5gfMUFyjJ3EadHXajUNAMjd3UURnsfYo1z7286sO8ct+GTsutNhxn48xtzRkHrZMynw0Bpr/nTFO7O2ODMD6XAIkva7jcLpDh+Wbp2UCO9kT+tbwUoq1bWYSDxIJJP+ZYC9JKdUKgVBuZhGH6lDiLFkKcynn4MINoD+WO1FJ849fCy6MNhP97Xd2O0Zd8iGe27L8FiIcJqmKEoiCB86jl7GPvl8dfuiWCwmFyz5X1OoAuXwRuQlOeznMIIYIYxF+sAeED0jEAwGUTwep9xuN/UkRVMiqSD4IcrQ312O3Tx1Y957piPu/KF9waUzLLiI/x5D2xZznbw2P3FUs3x1pw7o1/bXPn2Uk/ooe2k0C1eYJOhHV+EyswJX2MdoNT+EC38l4Zh2ybqt2jsHD5EWxFFP4nUPE3jLbvN9u/RgFcLReH7aFyz6ApEix88W/cFokQ/PlTg+knNNBQ5uK9h6/moF8bYh5zeOkYmVgDuEH38THpVLkMv9C5lMCjay61DI52DzURnS6RTMhnnVC+cq5I5VsXqXPOALfZbL5aL5fGEmk1n3hSMRLhaL+bLZrK9QLHLpdMbj9XJv7jgGrT/qn1m3tLRINac1EpvNVtnU1FRtMBik7e3tu3Q6nUSr1Uqam5upbcW89pDgffYImrRy1HM/hYzUqxh7nsQvb36/X/CNjcJvRLW1tZUKhUIuk8n2yeVyHCqqVCqVmGxYX1+P/gPRp/eiB4ssUQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Object\"\n        title=\"Object\"\n        src=\"/static/b5c56cb4407f5e9f85ae18a3e7c545d4/79659/ic-use.png\"\n        srcset=\"/static/b5c56cb4407f5e9f85ae18a3e7c545d4/733ef/ic-use.png 320w,\n/static/b5c56cb4407f5e9f85ae18a3e7c545d4/79659/ic-use.png 567w\"\n        sizes=\"(max-width: 567px) 100vw, 567px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>V8 compares current shape with shape stored in IC and skipping whole process of calling <code>LdaNamedProperty</code>, because there is a “shortcut” for this “kind” of shape, stored in IC. That way we have nice optimisation of the function call. But what if we call that function with a different object (different shape)?</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 607px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 97.52883031301481%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAAD0UlEQVQ4y61UbUxbZRS+UGGt1aYz2FIDf6bFxKBZHLosmiXT/XI/8JebSxQ1JluyORYzxvZLf7HvDebiJpsdAdfiBly+eoFCb0s/BErpKK2ubJSOdbffH4D9wN62x/te1zpchph4kpNz7rnv+7znvM85L4b9BwGXsxDZuUFiH/xmB3sPTutaWzJerQZCRn207WSDGIP+Wl6691A5aOrE+z/YXCoRSURvvvaqUMR/QXym41BJ7ZXdLzIYzyCgxuPHWGv4qe2gQ9kPjNLhMWMmbbNCfGoy2n7ubA7wKzGQx0S7NvOFzPoCRosZZbP5srFamAN8o6LiOWS7Gs9/jTddgLYTDTTjZ+zdXRDQaSOk7Jp4dUnO+ZceDCqbtdeuyqYUN2RB9chxAPjrH2O3b9nCR76jr/fzxTEj3FcNZeYHCfBqSQgb9TH1j1clKEMspunksJtMY1vnCSVMKG6AHe+CO3inkwEqyh34eoX0WfYOif4an1ajmu3vxZ0DSjyoGyXcI6rvjnxWw2UXhocGUAaoVCzonDuZjEYgFgpl702aalDs/Z07Nwj4/KK3Kit56NuvHx1fuT0Fls5btK0HT2V/tcEDcqR5VbmxSITN0hcK1THg8AdNg312dheKVVdXczmcQv7L5eUIkENel03o21rB1o2ngwYdDXcdiOWWPFiUHMZ+j8dZEjwU9SmjNrfbfXvKbN6BYlVVVTwel1v04Xs72ENVzT+ME5e/B/npU+neSxdpr0YNvlHN9ae1W0F9fX2BUCjk5tjNk/aIIP+oRp+atkBQr6NDBl0qMzMNzJ0+Ccjj8Z4I5ZxNZWWYX6dl/QmFvHLyZ8V219DA2wyB7zB2m6ldvmnVTofDwVqz2YzJ5XKWoOLi4g2PZ7ltTys2nYXCf1aUc84oXJx/mza0mG2FvUe7sf9LuBtFr7BZ7j8dEdQ2zX188Jztk/pm70eHL97bu++E6YujjH/ksntP3RX37vUAFpRJt7INfbjJ9+63HRFo6KTg0tAinFeGGY3ABSICZ/vC8M2tAKwrRb5AlCfn5rDDZJlbBP2MJ2WY8aT1VipttHmRZnVWT3xNoJYmRb5VBjs0p34ZMKsdM/aFRGwRvA8XaJ/HnfZ7H6YZS4f8HhSLrgk4TlixdvlNlkWyxyAzEJOU+743C48kxUxTcmUF8t8pOrsmoGXkTj5Dl9VzwGmhWvxUEE8k4mQikRgOBALDFEWpl5aWVMlkklxeXu5b30sNT71r1FIlj/fimnLXvPD3uLkihT5XiINeJRSTSCR8gUDwPDNdJaWlpTypVIqGAPsT3+4xQcDdLN8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Object\"\n        title=\"Object\"\n        src=\"/static/77cc23586d0294c630c08cebd59f42b7/030bd/ic-add.png\"\n        srcset=\"/static/77cc23586d0294c630c08cebd59f42b7/733ef/ic-add.png 320w,\n/static/77cc23586d0294c630c08cebd59f42b7/030bd/ic-add.png 607w\"\n        sizes=\"(max-width: 607px) 100vw, 607px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>V8 created another IC for shape M1. After that we have “shortcut” for two types of shapes. But how many IC can V8 create for one function? A lot… only problem is, every time it does that there is a deoptimization going one.</p>\n<h3 id=\"function-states\"><a href=\"#function-states\" aria-label=\"function states permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Function states</h3>\n<p>There are different states your function can be in, but we’re mostly interested in 3 of them:</p>\n<ul>\n<li>Monomorphic - 1 IC</li>\n<li>Polymorphic - 2-4 IC</li>\n<li>Megamorphic - >5 IC</li>\n</ul>\n<p>While V8 decides if function should be optimized, it check current function state. Only two of them can be optimized: Monomorphic and Polymorphic. Reaching 5 ICs V8 basically means <strong><em>“I have no idea what I’m going, so call it a day”</em></strong>. At this point <strong>TurboFan</strong> is not going to store anything into IC, instead it fall back to global cache. Usually it doesn’t matter if your function is Megamorphic, but if that function runs very often you might think about optimizing it by reducing a number of different shapes it accepts.</p>\n<h2 id=\"back-to-our-function\"><a href=\"#back-to-our-function\" aria-label=\"back to our function permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Back to our function</h2>\n<pre class=\"grvsc-container quiet-light\" data-language=\"javascript\" data-index=\"14\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">N</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">10000</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">let</span><span class=\"mtk1\"> </span><span class=\"mtk7\">a</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span><span class=\"mtk1\"> a</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">Jack</span><span class=\"mtk6\">&#39;,</span><span class=\"mtk1\"> b</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">Sparrow</span><span class=\"mtk6\">&#39;</span><span class=\"mtk1\"> </span><span class=\"mtk6\">};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">let</span><span class=\"mtk1\"> </span><span class=\"mtk7\">b</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span><span class=\"mtk1\"> tmp</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> a</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">Charles</span><span class=\"mtk6\">&#39;,</span><span class=\"mtk1\"> b</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">Xavier</span><span class=\"mtk6\">&#39;</span><span class=\"mtk1\"> </span><span class=\"mtk6\">};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">let</span><span class=\"mtk1\"> </span><span class=\"mtk7\">c</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span><span class=\"mtk1\"> tmp</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp2</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> a</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">Frodo</span><span class=\"mtk6\">&#39;,</span><span class=\"mtk1\"> b</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">Baggins</span><span class=\"mtk6\">&#39;</span><span class=\"mtk1\"> </span><span class=\"mtk6\">};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">let</span><span class=\"mtk1\"> </span><span class=\"mtk7\">d</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span><span class=\"mtk1\"> tmp</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp2</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp3</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> a</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">Legolas</span><span class=\"mtk6\">&#39;,</span><span class=\"mtk1\"> b</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">Thranduilion</span><span class=\"mtk6\">&#39;</span><span class=\"mtk1\"> </span><span class=\"mtk6\">};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">let</span><span class=\"mtk1\"> </span><span class=\"mtk7\">e</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span><span class=\"mtk1\"> tmp</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp2</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp3</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp4</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> a</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">Indiana</span><span class=\"mtk6\">&#39;,</span><span class=\"mtk1\"> b</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">Jones</span><span class=\"mtk6\">&#39;</span><span class=\"mtk1\"> </span><span class=\"mtk6\">};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">let</span><span class=\"mtk1\"> </span><span class=\"mtk7\">f</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span><span class=\"mtk1\"> tmp</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp2</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp3</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp4</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp5</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> a</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">Gandalf</span><span class=\"mtk6\">&#39;,</span><span class=\"mtk1\"> b</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">The Grey</span><span class=\"mtk6\">&#39;</span><span class=\"mtk1\"> </span><span class=\"mtk6\">};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">let</span><span class=\"mtk1\"> </span><span class=\"mtk7\">f2</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span><span class=\"mtk1\"> tmp</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp2</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp3</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp4</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp5</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> a</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">Jack</span><span class=\"mtk6\">&#39;,</span><span class=\"mtk1\"> b</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">Sparrow</span><span class=\"mtk6\">&#39;</span><span class=\"mtk1\"> </span><span class=\"mtk6\">};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">let</span><span class=\"mtk1\"> </span><span class=\"mtk7\">f3</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span><span class=\"mtk1\"> tmp</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp2</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp3</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp4</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp5</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> a</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">Charles</span><span class=\"mtk6\">&#39;,</span><span class=\"mtk1\"> b</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">Xavier</span><span class=\"mtk6\">&#39;</span><span class=\"mtk1\"> </span><span class=\"mtk6\">};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">let</span><span class=\"mtk1\"> </span><span class=\"mtk7\">f4</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span><span class=\"mtk1\"> tmp</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp2</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp3</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp4</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp5</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> a</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">Frodo</span><span class=\"mtk6\">&#39;,</span><span class=\"mtk1\"> b</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">Baggins</span><span class=\"mtk6\">&#39;</span><span class=\"mtk1\"> </span><span class=\"mtk6\">};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">let</span><span class=\"mtk1\"> </span><span class=\"mtk7\">f5</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span><span class=\"mtk1\"> tmp</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp2</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp3</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp4</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp5</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> a</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">Legolas</span><span class=\"mtk6\">&#39;,</span><span class=\"mtk1\"> b</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">Thranduilion</span><span class=\"mtk6\">&#39;</span><span class=\"mtk1\"> </span><span class=\"mtk6\">};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">let</span><span class=\"mtk1\"> </span><span class=\"mtk7\">f6</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span><span class=\"mtk1\"> tmp</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp2</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp3</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp4</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> tmp5</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">3</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> a</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">Indiana</span><span class=\"mtk6\">&#39;,</span><span class=\"mtk1\"> b</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">Jones</span><span class=\"mtk6\">&#39;</span><span class=\"mtk1\"> </span><span class=\"mtk6\">};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">function</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtkb\">test</span><span class=\"mtk6\">(</span><span class=\"mtk7\">obj</span><span class=\"mtk6\">)</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">let</span><span class=\"mtk1\"> </span><span class=\"mtk7\">result</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;&#39;;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk7\">let</span><span class=\"mtk1\"> </span><span class=\"mtk7\">i</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">0</span><span class=\"mtk6\">;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">i</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&lt;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">N</span><span class=\"mtk6\">;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">i</span><span class=\"mtk1\"> </span><span class=\"mtk6\">+=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">1</span><span class=\"mtk1\">) </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">result</span><span class=\"mtk1\"> </span><span class=\"mtk6\">+=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">obj</span><span class=\"mtk6\">.</span><span class=\"mtk7\">a</span><span class=\"mtk1\"> </span><span class=\"mtk6\">+</span><span class=\"mtk1\"> </span><span class=\"mtk7\">obj</span><span class=\"mtk6\">.</span><span class=\"mtk7\">b</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">return</span><span class=\"mtk1\"> </span><span class=\"mtk7\">result</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">function</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtkb\">test2</span><span class=\"mtk6\">(</span><span class=\"mtk7\">obj</span><span class=\"mtk6\">)</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">let</span><span class=\"mtk1\"> </span><span class=\"mtk7\">result</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;&#39;;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk7\">let</span><span class=\"mtk1\"> </span><span class=\"mtk7\">i</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">0</span><span class=\"mtk6\">;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">i</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&lt;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">N</span><span class=\"mtk6\">;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">i</span><span class=\"mtk1\"> </span><span class=\"mtk6\">+=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">1</span><span class=\"mtk1\">) </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">result</span><span class=\"mtk1\"> </span><span class=\"mtk6\">+=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">obj</span><span class=\"mtk6\">.</span><span class=\"mtk7\">a</span><span class=\"mtk1\"> </span><span class=\"mtk6\">+</span><span class=\"mtk1\"> </span><span class=\"mtk7\">obj</span><span class=\"mtk6\">.</span><span class=\"mtk7\">b</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">return</span><span class=\"mtk1\"> </span><span class=\"mtk7\">result</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">startT1</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7 mtkb\">Date</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">now</span><span class=\"mtk1\">()</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">for</span><span class=\"mtk1\">(</span><span class=\"mtk7\">let</span><span class=\"mtk1\"> </span><span class=\"mtk7\">i</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">0</span><span class=\"mtk6\">;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">i</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&lt;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">N</span><span class=\"mtk6\">;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">i</span><span class=\"mtk1\"> </span><span class=\"mtk6\">+=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">1</span><span class=\"mtk1\">) </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk9 mtkb\">test</span><span class=\"mtk1\">(</span><span class=\"mtk7\">f</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk9 mtkb\">test</span><span class=\"mtk1\">(</span><span class=\"mtk7\">f2</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk9 mtkb\">test</span><span class=\"mtk1\">(</span><span class=\"mtk7\">f3</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk9 mtkb\">test</span><span class=\"mtk1\">(</span><span class=\"mtk7\">f4</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk9 mtkb\">test</span><span class=\"mtk1\">(</span><span class=\"mtk7\">f5</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk9 mtkb\">test</span><span class=\"mtk1\">(</span><span class=\"mtk7\">f6</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7 mtkb\">console</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">log</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;</span><span class=\"mtk4\">test with one shape:</span><span class=\"mtk6\">&quot;,</span><span class=\"mtk1\"> </span><span class=\"mtk7 mtkb\">Date</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">now</span><span class=\"mtk1\">() </span><span class=\"mtk6\">-</span><span class=\"mtk1\"> </span><span class=\"mtk7\">startT1</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;</span><span class=\"mtk4\">ms.</span><span class=\"mtk6\">&quot;</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">startT2</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7 mtkb\">Date</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">now</span><span class=\"mtk1\">()</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">for</span><span class=\"mtk1\">(</span><span class=\"mtk7\">let</span><span class=\"mtk1\"> </span><span class=\"mtk7\">i</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">0</span><span class=\"mtk6\">;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">i</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&lt;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">N</span><span class=\"mtk6\">;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">i</span><span class=\"mtk1\"> </span><span class=\"mtk6\">+=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">1</span><span class=\"mtk1\">) </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk9 mtkb\">test2</span><span class=\"mtk1\">(</span><span class=\"mtk7\">a</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk9 mtkb\">test2</span><span class=\"mtk1\">(</span><span class=\"mtk7\">b</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk9 mtkb\">test2</span><span class=\"mtk1\">(</span><span class=\"mtk7\">c</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk9 mtkb\">test2</span><span class=\"mtk1\">(</span><span class=\"mtk7\">d</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk9 mtkb\">test2</span><span class=\"mtk1\">(</span><span class=\"mtk7\">e</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span><span class=\"mtk9 mtkb\">test2</span><span class=\"mtk1\">(</span><span class=\"mtk7\">f</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7 mtkb\">console</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">log</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;</span><span class=\"mtk4\">test with multiple shape:</span><span class=\"mtk6\">&quot;,</span><span class=\"mtk1\"> </span><span class=\"mtk7 mtkb\">Date</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">now</span><span class=\"mtk1\">() </span><span class=\"mtk6\">-</span><span class=\"mtk1\"> </span><span class=\"mtk7\">startT2</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;</span><span class=\"mtk4\">ms.</span><span class=\"mtk6\">&quot;</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span></code></pre>\n<p>After executing this code it prints:</p>\n<pre class=\"grvsc-container quiet-light\" data-language=\"\" data-index=\"15\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">test with one shape: 3015 ms.</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">test with multiple shape: 12329 ms.</span></span></code></pre>\n<p>What just happen? First of all we’ve set number of operations to 6*10^8 for every test (6 x 10000 x 10000). First function <code>test</code> is called with the same shape all over again (different objects, same shape). Second function <code>test2</code> is called with 6 different shapes and because of that V8 is not optimising it.</p>\n<p>If you open <code>v8/tools/ic-explorer.html</code> and run above code with <code>d8 --trace-ic index.js</code>. You could be able to load <code>v8.log</code> into <code>ic-explorer</code>. For those who don’t want to do it, here is a screenshot.</p>\n<p><code>test(obj)</code>:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 225px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 17.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsSAAALEgHS3X78AAAAqUlEQVQI121O2w6CMBTjc/kteTXRZ5n+hCAM0BAvGOU2lQmEDeq2xMQH+9KTtjmt5XlbrAmB5vR4woMxhIEP1yW43u7wfQ95USCJQtA4QV2VoJSCcw4axRiGARpC8TRNsGaOA9u28Ysg2GG5mGNFNviH7HJGWTFz932PIs+RHvaonxwWU4uyLIN6j3EcTeit2l9NY8JSStOsva/ftS2E0vUq7Rut6yCExAf2xOBLa9vBJgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Object\"\n        title=\"Object\"\n        src=\"/static/324eb86220cec172bb7ad04ae55cb2ac/43958/monomorphic-example.png\"\n        srcset=\"/static/324eb86220cec172bb7ad04ae55cb2ac/43958/monomorphic-example.png 225w\"\n        sizes=\"(max-width: 225px) 100vw, 225px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p><code>test2(obj)</code>:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 231px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.484848484848484%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAAB30lEQVQoz22SaXLaQBCFuWj8h1/BVyC+AMUx4kvgpeIkCgkW2pFAa7QgzCLZIgQBQi+jFnG5ErpqSvVmVG/e19MNnufx5fMDHthaLFMo0hC9Xg8Ty4U+UnF3f48g8PHp7gam7UFj55o+hiTLkBUNVZUlTt8SjevrjxAEAXEcww9CeK4LfvADXP8725thvlggTVawLAvPLxlm0wjx7AlpmsKybTLa5TkSpqtqvG+1oKkqCVUWIYgSQpbo9vYGfhTj3yqPBbTRiKU5QpYlvGQZPM+FaVq1YbvdhmEYJALfh2nZhCgzpFXyTPvH45FWVYf9DlNGU544d/s9NuuM/XtK+OHqCoaukxgbOkRJhmVOMBgM8DSfv/bmr0G+3cBxXJQn1F+bDZLVAp4f1Iaty0vIkkRiMjYI2WSGHPeV9ep/w/0uh+v9RHE4EOpmu0UYBpiYZm3Y6XRg2zW/5zrswCJkVVNfMd4a7vItgjCiHjqOw5AP9ECL5bI2bDabEEWBhD7SMHjkoesjfOM4RNP4rKHNkIuioN5n6zUFqMjIsNvt0ki8TVghSKwN5xJWyEEYkq4S7tmjpGnC2uDVhu8uLiAMh6exkWj+VEVBv99nCadnHuU39avSPP9Il0ZRyAZdofM/QjjeaGQFgb8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Object\"\n        title=\"Object\"\n        src=\"/static/ddccaaa9086e3ec9ea45d5a0cc740341/e2a47/megamorphic-example.png\"\n        srcset=\"/static/ddccaaa9086e3ec9ea45d5a0cc740341/e2a47/megamorphic-example.png 231w\"\n        sizes=\"(max-width: 231px) 100vw, 231px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>Result of that test is obvious and <code>test()</code> runs 7.8 times faster than <code>test2()</code>.</p>\n<p>You might ask why creating <code>test2()</code> if it looks the same? It’s because after running <code>test()</code> with one shape it’s already optimised for it. I didn’t want to affect performance of the second run, but still want to keep it in one file.</p>\n<h2 id=\"extra\"><a href=\"#extra\" aria-label=\"extra permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Extra</h2>\n<p>I’ve mentioned that shape contains more than just information about added properties. Here is an example of created shape for <code>let b</code>:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 468px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 225.64102564102564%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAtCAYAAACu/EtoAAAACXBIWXMAAAsSAAALEgHS3X78AAAFz0lEQVRIx5VXWY8TZxD0zyU/gTyTRx4hCUGEREqkIO4IogAROQgse3vX933bc3nGHnvGc32V6rF35cCKHT7Jsj3r6anuqq7uzc1mM/iLBUb9PlrVKpzRGHBmsHl9uVgiiiI0Gg20220EYQjf97FarWBZFlzXPf++XC7hODZyX127hnapiE61BluCHZ8iuPU9uoYBfTKBnC+uXMGXV6+mN2qaxhsdXL9+HYVCAdPpFAKqVCrj5s0byMnTff4wimNYfMKUTz07/sqHzZsXQYAElx+lFHL2aIQBn1Q+OESvWIbaO0T03V30uz3Mu31Esznw5Dmwu58GVXyw3HgWYPslJ6czNUEoZ0lE3pwBGCTa/GjG2kRMCUsPahNkO9g2uhShOSRCklHO51E7OcUif4rk9z8wJEkmUbqmhfjNDlCtpwGRfDr5nDGeYGnbCMlWwlopfk8OjrHiZ5DVJAihylWgP9wEVJ8OaOo69PEYg16PTJVgExXaHZiUhUlGdd1A2OE1IlXr3C4J2B/AbLVh8D2i/lAoIb73EFPTTPUIqe/L11AsBTKlzBu9YEUe5mizbs7cTdMK4oif59Cos1DSZ6BMCC0G6ZGMTrkCi+kmO3uIbtxCr9tFoOlQZFndewT15t06IGXzaYSsobRXRAIcUb27ONMBfM+DbRHhllQuOzlzMKSgi6jkT9Assn5kOLrzI3okaca6+tSkevoc6v1+RtkQobdYo4rCAEuyC0FF1JJeahBkGHzPxvJwCK3ZJMI8KodH8EoVJH//C41SMjodzCYa4v2jVEqZEIrWHLZf6K9ShAnTjBnQZf0EYcxXcpgHGq3sAae6lgq7Xi5jyoCgmB17CpNdIxYWkm2wLNlSHgxgtFrQGNBn7UDHiX74GSb1qUTYIWv5/EXqQtmEbZlMbwmPvdxl8KkEES+kmOcLFxMGFqcWZBlbr5/6YZ3iNjvdVB7R17fRJ2JPHJzCxv3HUG/fr++IM7SeuLU8V1ptIWRsThCFsHlNhJ8dIf2wuyVsnxKJf/oFHbaeQ4I8liB59gI4OMoobLIYcI4krJOiswRkGMMxEkHFOgZkNybb4uKZEEqnaBR3o1ZDkQgXzTYS1lFjKQyK2+KQik+LAD0xmw4ZTFxmaTtQNIaYVp+8ep0aBaSenCXJ212gVs+essubx5RMnY7tSHr0xCXJMIlQZ41DPkzSz9zLQw55EfbcoEvnCwg56CfsoHNhP34G9e4zZOORDBH2hPW0ZA5D5lMIl4ToIuzP8sPeWtjV4zxGrBPYYuHN2+kYXdIrlVjbgyefJ2xfWotnzq5wxbH5PSaaiATYlJSMWEldfbAtXIQ6dew+F50SvbB5WoB3eIz40dO09Sy2okfDSF79CVA6yTYpMrTOPm8FzRksvk8USuYKmYxJTFJrpD4oP4wFrcxlcSJxdV73OSXV1grykR+OiabJ+hWJ0KGRCpohl6gaW/KETu4e5RHw7y06+Jiop5Ra8m7vwrGQ+qH0rE2rT6R+FQr4t5ewZQIyaCLG+tcbRNy+NDp7NLXXgWRwbazu/ymTFJdkyEZab7fo1HbaHeKHs3TQc+8RpqW3z9L8YCf8aNAPCkUM6g3M6X/J7gGib+9gwOuRCF3WuPtr2ajNfphamcjnQlIkDT59xd3QMHQ4W4N+QWQWMwg/QHNet4sCSg27JEN2w26likQ22G9up4N+IX0sK/KDp+cILxe2bLAiXJ4V313alWxcIpuYyOesY1pD8cusU29MLxRhVynq1UkRMaecuI/J4b6g4Sb/vCX71Yz2RR3OKREpdkDBRnSfZH+PK16wad0ESaFGgx1k3WBNbqoG2nTq8XACz+aCybLp+ojX6qmLz8wmA80ypsxgxlCDpXMhktWPb6q4RKVygmGvQ4SUyGgHyiptAmYgZTZ3WPwZmq0mLEOj9S94zcWc3qhTi8HMk5mafdCP6DZNiltmS/qPz627GLGWPseBkjZ7+CvUzm4m2fwHbKx4IVmIl0YAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Object\"\n        title=\"Object\"\n        src=\"/static/c1c6d744d27740eafca5339c43cc1d86/45d15/full-maps.png\"\n        srcset=\"/static/c1c6d744d27740eafca5339c43cc1d86/733ef/full-maps.png 320w,\n/static/c1c6d744d27740eafca5339c43cc1d86/45d15/full-maps.png 468w\"\n        sizes=\"(max-width: 468px) 100vw, 468px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>If you want, you can generate that for your code by running</p>\n<pre class=\"grvsc-container quiet-light\" data-language=\"bash\" data-index=\"16\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">d8 --trace-maps index.js</span></span></span></code></pre>\n<p>and uploading <code>v8.log</code> into <code>v8/tools/map-processor.html</code>. When it generates chart, click on <code>Transitions</code> and explore a list of them at the bottom of the page.</p>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .quiet-light { background-color: #F5F5F5; }\n  .quiet-light .mtkb { font-weight: bold; }\n  .quiet-light .mtki { font-style: italic; }\n  .quiet-light .mtk3 { color: #AAAAAA; }\n  .quiet-light .mtk7 { color: #7A3E9D; }\n  .quiet-light .mtk6 { color: #777777; }\n  .quiet-light .mtk9 { color: #AA3731; }\n  .quiet-light .mtk1 { color: #333333; }\n  .quiet-light .mtk4 { color: #448C27; }\n  .quiet-light .mtk10 { color: #4B69C6; }\n  .quiet-light .mtk5 { color: #9C5D27; }\n  .quiet-light .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(0, 0, 0, 0.05));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(0, 0, 0, 0.2));\n  }\n</style>","htmlAst":{"type":"root","children":[{"type":"element","tagName":"h2","properties":{"id":"setup-optional"},"children":[{"type":"element","tagName":"a","properties":{"href":"#setup-optional","ariaLabel":"setup optional permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Setup (optional)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"If you don’t want to run it on your computer, please skip to "},{"type":"element","tagName":"a","properties":{"href":"#what-are-we-trying-to-optimize"},"children":[{"type":"text","value":"this section"}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"First, we need to install V8 to be able to run it without whole package (node or web browser). I’ve created gist describing the process for Linux users."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://gist.github.com/burnpiro/d85d836200df93af892877c2cf37f12c","target":"_blank"},"children":[{"type":"text","value":"https://gist.github.com/burnpiro/d85d836200df93af892877c2cf37f12c"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"If you’re a Mac user, it should apply to you as well. If you have any problems with installation process, please refer to "},{"type":"element","tagName":"a","properties":{"href":"https://v8.dev/docs/build"},"children":[{"type":"text","value":"Official Docs"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"After installing you should be able to run code like"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"className":["grvsc-container","quiet-light"],"dataLanguage":"javascript","dataIndex":"0"},"children":[{"type":"element","tagName":"code","properties":{"className":["grvsc-code"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3","mtki"]},"children":[{"type":"text","value":"// index.js"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7","mtkb"]},"children":[{"type":"text","value":"console"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk9","mtkb"]},"children":[{"type":"text","value":"log"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"it works"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"by calling"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"className":["grvsc-container","quiet-light"],"dataLanguage":"bash","dataIndex":"1"},"children":[{"type":"element","tagName":"code","properties":{"className":["grvsc-code"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"d8 index.js"}]}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"what-are-we-trying-to-optimize"},"children":[{"type":"element","tagName":"a","properties":{"href":"#what-are-we-trying-to-optimize","ariaLabel":"what are we trying to optimize permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"What are we trying to optimize?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Our test function looks like that:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"className":["grvsc-container","quiet-light"],"dataLanguage":"javascript","dataIndex":"2"},"children":[{"type":"element","tagName":"code","properties":{"className":["grvsc-code"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"function"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk9","mtkb"]},"children":[{"type":"text","value":"test"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"any"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"):"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"string"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"  "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"let"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"result"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'';"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"  "}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"for"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" ("}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"let"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"i"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"0"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"i"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"<"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"N"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"i"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"+="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":") "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"    "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"result"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"+="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"a"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"+"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"b"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"  "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"}"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"  "}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"return"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"result"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Let’s assume this function is called thousands of times during our script execution so it’s important to run quickly. Before I explain how that is optimized in V8 we need to know what are Shapes and how Inline Cache (IC) works."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"shapes-maps-in-v8"},"children":[{"type":"element","tagName":"a","properties":{"href":"#shapes-maps-in-v8","ariaLabel":"shapes maps in v8 permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Shapes (Maps in V8)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Academic name of the Shape is “Hidden Class” which might be confusing especially in JS so everyone calls it differently, but name introduced by FF team is probably best."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"Shape"}]},{"type":"text","value":" contain a lot of staff, but when people use that name they mostly referring to it as a table of "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"descriptors"}]},{"type":"text","value":" for object properties. Shape stores other information as well, like size of the object and pointers to constructors and prototypes. I’m going to show you that in the example soon."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Let’s start with a simple object:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"className":["grvsc-container","quiet-light"],"dataLanguage":"javascript","dataIndex":"3"},"children":[{"type":"element","tagName":"code","properties":{"className":["grvsc-code"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"const"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"  x"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"  y"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"};"}]}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"It’s representation in V8 looks like"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 581px;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 55.24956970740102%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAACjklEQVQoz5VSS08TYRSd4qhRjIZEtib+An+Amkh8BBdqXLn0J5goGxYmLIrUNkTEClEx+OBteRSYTttpZzrTDgwtBXkUBjoDBQatLZUZWkDb4nW+UdmoC77NuTn3kXPPdzHsgC9BeXCEqz6vGcQ5mO7vy7NvW+ELF4Cpvl7AJpVxPDBD4+wsg0+sRvAhoX+/OcP4S1KMH0+QBL4ZYnGNC5QsuAhj4Fh352PJQ0Lc7cpnRnmAuVkQiWE4qEDsQ73tKEJX83NbT70N2i11u30NTwrikLMw6egpYBNrkdqQyFlHFoJWPa4jwgNn9hXSvjsbAfrpJ8rzSAtxjdkge3l/da/btjf9ERS/D/T1YXs8DEtuErClnASh+SBwMRbkrTj4ptyX/jR9ZRkS5mMQ6+8FkBYhHxZsv1OmZY/72uZI6JkmjNSqo7xlZzxsifZ0W7AFZf6BtqMWv//4BiupRBOqBvhlxbLXc243lVIgl4XsujJDNTacRcNuX71S+l9PlIRyHfbAeOlkuhpxqUz6MMLqVy2lWi63gnIZVR3TqZK7t24aHsZdwxfTQfYh0/r6fpfNWiWRRFWkq7MKS6wkKrPZrJLbzm0mk5/voeJioXgIodPhKNNUld/a0tTMxsagCcOO36ioOGmop7w2WBRhjfbDeoABFK/SPsAcDscRmqZPcxxX7nQ6j6FiPTbU19TUmCiKKhMEoZwgiFOIq7xw/gRCX8tLK/umFYSOtl3Z7SruRCNFcWiw+JcF0WjUQLPZ/E+L2ix1hh38+3fWcFcHuF8054kmO8wNDoB+NoDxPI+JomiKx+OmSCRiNMmybKDdbsdisZhJkiQTQsQlWcY4bMlFmPUfBpl05WWSAJ3X1bbDT9RapbMCPXcrAAAAAElFTkSuQmCC'); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"Object","title":"Object","src":"/static/259952ab89a53e4be50f41810e15d7c3/447d2/Shapes.png","srcSet":["/static/259952ab89a53e4be50f41810e15d7c3/733ef/Shapes.png 320w","/static/259952ab89a53e4be50f41810e15d7c3/447d2/Shapes.png 581w"],"sizes":["(max-width:","581px)","100vw,","581px"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy"},"children":[]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"If you look on it, there is an obvious distinction between object values and their description. Every property on that object is stored in memory according to "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"offset"}]},{"type":"text","value":" defined in shape. In our case property "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"x"}]},{"type":"text","value":" is stored with "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"offset: 12"}]},{"type":"text","value":" which tells v8 to look for "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"obj.x"}]},{"type":"text","value":" value by offsetting pointer by 12."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 604px;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 15.066225165562914%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsSAAALEgHS3X78AAAAkUlEQVQI12NgYGCQBmJFKC0DxKwM+IECEIsBMQdOFaU5VcL////n+v/jP8/Ty2/5Lhy4zn/58G3+y4cg+MKBG/xPr7zjmzdpiUh34wQJoFpukNjFgzf57597zn/lyB3+S4dugfWADbx+6t6GO+cf/7997tHHO+cefcaBPwHVfL545PrXW2cfAvmPP9+F8D8j8wGA0HGkywCGtAAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"Object","title":"Object","src":"/static/024a2dd52718fd7d45927b3b1ddd0e6b/663d9/memory-example.png","srcSet":["/static/024a2dd52718fd7d45927b3b1ddd0e6b/733ef/memory-example.png 320w","/static/024a2dd52718fd7d45927b3b1ddd0e6b/663d9/memory-example.png 604w"],"sizes":["(max-width:","604px)","100vw,","604px"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy"},"children":[]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Ok, so now you know what a Shape is but why is it so useful?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"shapes-usefulness"},"children":[{"type":"element","tagName":"a","properties":{"href":"#shapes-usefulness","ariaLabel":"shapes usefulness permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Shape’s usefulness"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"When you create an object, you don’t really want to store all information about it again if you have a similar object in your system. That’s why V8 is reusing its shapes."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 581px;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 86.23063683304647%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsSAAALEgHS3X78AAAD1ElEQVQ4y5VUXUybVRj+aL/NjZkU58VujAkkG2XRzF1Mr3Yz1IjRCxMz8cIbf+ISXZYs8cJsqETN+NlAzcBk6zRbthFoocCgf/SfstJS+t/SUfrDVz7afu3XrpTSNta+nvOtNYahiefmOXne97x5znmf9xCGoOqQk16O69wakFtlFU/SBWqXop1A64132g8Q/3eJLIOkm3aqvJQbHCE7eGjXum5F1YZjLUebD+3Oj6oUHIaVcl5q3kAujY6QczdvkHG9lnSNS0guGIlE2svl0p+AVjqd/g5zaMtDsKdCxqhv+E+VqOC7UFsMw1zDXOWPCn+vghGkjFOokL2VNhmHFu/dvTI7PNRHzSn7lsdG+7iklYBfmEqnetJsepCiqDcxl9vebnjxyJHGknmBl9VreDmDjpeQzzZQWjV3rbBKcQ3Ca5A0GYFZmAcIBWFDp4G9FTNUw3vHX8Jb/u6YRnRjH8bp679clQwOwMzw9YJdPFrOPDSVfVOTZcIcNjRHCqvCzQp13EnbWlOwsb9+eODC+RakUAjh4LEiwqxSLvi0s5NT6BwX9wQeTIPx9u+gvSWCkFwGHuk4EMgyVdnizM6s+cGOPWaraD2q0/WCj416ccaoA8fIvUzJugilxYc/1GMx9dxX7MJ8ASkLI6QKNivlmpBQhId2GgP0CgTjj8C36fGM6O40o3yui6vTk105jwsSjmXIOuzlxwbtWcyfFLY2eial+zW/iZ5zTkgEjnGxwC4ZE9zt7REQdHTzTLlUruIOswx7sWYZ7lqHXz7xfL5YDOBYNp/XY+5E6zHceb70av+B+z9+f7j3/BdNXZ983IT2TTcvX2oi1qn1s3XLJJKJK/hQnKWfwdj9TdcL+a0thiuYybifJfmN5zo/OMhdWav+OmsxV1yTE7Thzu1kamE+6ZmSJgn/ir+FSTLnMunsZ5FAVPjPjnZ0dDTF4/GPEonERWSn97GyM6+9KsCxZfFob3ROCSGFHPJLFoDVAKDpeWKb5lv7+IaQ+tSjnPd0ION72xIxnazVfMrYX37YyXHIzP2y4SGQ/vzTtuzXodKabKbknpCUuCR33PE5VYyCWD1WtYYt4Np0rGFe2NZ2EI8gTdMkUslNCOomWZuUgZLdhhTKIKJUQAGpxMgVlLunj4aYoD/GUhBOrIErZr+EeZ3JwNut0DclrY/e61sWc/+Ozfrt9pKlu2y3dSODd//d0Vw2J8KPX9wpbgWcgRbMbWzEeHtNEkRC//451H4VAnX4fhWqwLJswevzvoI5r9f7VEH0+E8w4OcBTZEQp0mgYySwKRIpJv8CS8J2AqR1kuYAAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"Object","title":"Object","src":"/static/dcf8b8ccf851959e54fbd4a4c8a48bf1/447d2/multiple-object-shape.png","srcSet":["/static/dcf8b8ccf851959e54fbd4a4c8a48bf1/733ef/multiple-object-shape.png 320w","/static/dcf8b8ccf851959e54fbd4a4c8a48bf1/447d2/multiple-object-shape.png 581w"],"sizes":["(max-width:","581px)","100vw,","581px"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy"},"children":[]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"code responsible for this situation might look like"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"className":["grvsc-container","quiet-light"],"dataLanguage":"javascript","dataIndex":"4"},"children":[{"type":"element","tagName":"code","properties":{"className":["grvsc-code"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"const"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"  x"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"  y"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"};"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"const"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"  x"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"  y"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"4"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"};"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"const"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"  x"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"5"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"  y"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"6"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"};"}]}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"not-all-objects-with-the-same-structure-have-the-same-shape"},"children":[{"type":"element","tagName":"a","properties":{"href":"#not-all-objects-with-the-same-structure-have-the-same-shape","ariaLabel":"not all objects with the same structure have the same shape permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Not all objects with the same “structure” have the same Shape"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"If you compare these two objects"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"className":["grvsc-container","quiet-light"],"dataLanguage":"javascript","dataIndex":"5"},"children":[{"type":"element","tagName":"code","properties":{"className":["grvsc-code"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"const"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"  x"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"  y"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"};"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"const"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{};"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"x"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"y"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"they might look the same, but they have a different shape. Shape of the first one we’ve already discussed. Shape of the second one is here"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 581px;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 65.57659208261617%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAADHUlEQVQ4y5VSS0wTYRBeWhBSJIaTiRjwddBEo+AFL0YORg+aeNGEk5JooibGRBJNCBwMMTE8TMBHKY8Djz5RgVqgbLt0WUof9EEhlFIpbaFUC7R0YVsaWmTcf5N6UDg4yZ/5Z/6ZL/N/32DYX8bn8bC96Sk+utMUKWRMBvColLA9aYJNNkb5NUKThf2PhSmSh/wGOfrcPzxocw30jQa1uJ0FfIbyO5MmXlt1VVZT5YtcS3eXAFaWBA6ZRNBeUy04CJP/pLyct98D7CQykQ/qiBeMxbwx3fdlXtvR7glRpIe9e7CpFRt/fI7ix4HhtcpbMk+cLsqcl8gyUFOU0BRHKfLRgrL/6SqhebyOqy+ngU0ySeMiroa5b0oIG/QAbhd48RHYd7yed3UcR5t6ShyhSLBJxXsJxKGe6k7XjIha6gY/fYCB5qb4iEiY9KqHktNfPicx67K50rxoqLL4TDW25cmXvTrJsXSTT9lfyvh9DCS2YdO7GJtRyK+x6Vz0ZlXIPm5bJ4EFAs/wINCseAtDKsACySUgZ3SgtWvAF/cCbh+6jhrqm2u5KSM03cUe52ok0smGWecKC/NQflE9dCespySRiXFhRE+J4hazyKaQizBXYLYqwoR/xVMx8IY87aj46OGCrFMni7L3o+NIXt6hx/fuHrw2AV/gxm5qF5Ct/Vx7xU33ppaTf8c4cTNEaD6ye/j+h2ZEGCWJW+m+74OqkgCheYK3ie7LGuor5lXKCqO4pwLzL/lvMwyzFYvHIBQKcYDCujoOcF1HiLdYbpz9XyFpt0LcONGRBvRr8UYILEFofAyCpA5gwQ0r5ChgY2NjOU6ns8Dtdh83GAwcP72tIrQ2GaqG+jOJtVUPxGLA/Ah6idaWs2w+B9WYpeLX+u5OsMql28saPJV02FNulTL1DwUulwtTDKv/xDTDzCI6WGFm84tLcq5eOM+pTHS0NWrbW0HR2JCUN9TD1GcFWORSwBwOBxYMBjPY72YgMGRSsZjzZVdKs+lo1EjT0b1wOGx6+OBBftmlixwdflz9FuZmgTZOJFmlIWGzgHOgD34DiDDrjjYiKsoAAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"Object","title":"Object","src":"/static/c7ee17c162fc4e6a44d5e4bc2e7c18e0/447d2/shape-transition.png","srcSet":["/static/c7ee17c162fc4e6a44d5e4bc2e7c18e0/733ef/shape-transition.png 320w","/static/c7ee17c162fc4e6a44d5e4bc2e7c18e0/447d2/shape-transition.png 581w"],"sizes":["(max-width:","581px)","100vw,","581px"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy"},"children":[]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"During code execution V8 is creating 3 different shapes and transitions between them to describe end result."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"className":["grvsc-container","quiet-light"],"dataLanguage":"javascript","dataIndex":"6"},"children":[{"type":"element","tagName":"code","properties":{"className":["grvsc-code"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"const"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{};"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3","mtki"]},"children":[{"type":"text","value":"// Shape M0"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3","mtki"]},"children":[{"type":"text","value":"// add \"x\": Transition to M1, offset 12"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"x"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3","mtki"]},"children":[{"type":"text","value":"// Shape M1"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3","mtki"]},"children":[{"type":"text","value":"// \"x\": at offset 12"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3","mtki"]},"children":[{"type":"text","value":"// add \"y\": Transition to M2, offset 16"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"y"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3","mtki"]},"children":[{"type":"text","value":"// Shape M2"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3","mtki"]},"children":[{"type":"text","value":"// \"x\": at offset 12"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk3","mtki"]},"children":[{"type":"text","value":"// \"y\": at offset 16"}]}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"the same goes when you’re creating classes"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"className":["grvsc-container","quiet-light"],"dataLanguage":"javascript","dataIndex":"7"},"children":[{"type":"element","tagName":"code","properties":{"className":["grvsc-code"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"class"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7","mtkb"]},"children":[{"type":"text","value":"MyComponent"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"  "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"constructor"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"size"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"    "}]},{"type":"element","tagName":"span","properties":{"className":["mtk3","mtki"]},"children":[{"type":"text","value":"// Shape M0"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"    "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"this"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"size"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"size"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"    "}]},{"type":"element","tagName":"span","properties":{"className":["mtk3","mtki"]},"children":[{"type":"text","value":"// Shape M1"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"    "}]},{"type":"element","tagName":"span","properties":{"className":["mtk3","mtki"]},"children":[{"type":"text","value":"// \"size\": at some offset"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"    "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"this"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"    "}]},{"type":"element","tagName":"span","properties":{"className":["mtk3","mtki"]},"children":[{"type":"text","value":"// Shape M2"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"    "}]},{"type":"element","tagName":"span","properties":{"className":["mtk3","mtki"]},"children":[{"type":"text","value":"// \"size\": at some offset"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"    "}]},{"type":"element","tagName":"span","properties":{"className":["mtk3","mtki"]},"children":[{"type":"text","value":"// \"name\": at some other offset"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"  "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"}"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"To be 100% honest V8 doesn’t store whole shapes when it does transitions between them."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 366px;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 104.0983606557377%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAAAsSAAALEgHS3X78AAAEpklEQVQ4y5VUW0xbdRg/hRLBZeKiRkUc+mBmluzFlyWyRZM96JsvvuiD8X0PxvCgvsg2JRsYhoxbCzKEISunp6XQQnt6L6VcWkpbCoWOS4FyLaWjh7FCTzmf3/9A2WJinP/ky/96fue7/H4flXTYduN2q5AYtGUSDltm02w8TI+7gbNbmykcsBbNWWe6yZJqvlFOdVVVUn9V3ka7c2qdd25Tit+qKHn5z/hBwAfubgU4H3TAuLIb2BY5xF1OOPJ6ekVAAAlvt1LZ9amFZyQwG5I88YxJnj+nknar+cmIa2zbanZvmFh/anTYuTc8FNy1mn8UQVaWJCdg1AsPuPWD5Nr54pffyH/pHdkrBTnl7xXnZu/k338nekbWoV5N2YbNols2GhSsvIk2yJpoXUMdPdOnoRMuJz2t6aH/iS15fuOUNVIFZ84QwByyXx+0D8DjHYDZGYhYTODX9MBEjwo4zDksLcJj9yhQ62rmoySrv7I9oL3G1lR/KTjtlzf7NJ+uq5TnTyM4CTek7VX61QwE1KqDmNPBP/WO85hL/tA/wR/6vPyq1cxT3NDgge1+K5hbmmG48wH01d07wrAg4xlrJyBFb735+uVLl87i8qytrZXtb2yAntrfeTTwKLogrOuDqNkEEJqCNasZKJiahAOvByYZWrBghRNORxoW5mB/xNVHAN8tLj43368Tc+p60KG2t7WCsVnOs80yYGruAvnBBLJjQT8A6+gIFTcbq/dD0wluJiSsez1pPrIIyQnvbNKo/4KAlBQVnc2G7ul+2D1OKwDBUgiURo/TPbU16WCPKj2lUafn9f1p8WGS45YwT7C3t0cmmI9E6sn5latXX8uTSguyOdx02AwQ3wLMG8Bc+NjmHx0bFuUpFodqqLyTv7K8TMdiscDc3Nw4x3HBUChUJlJGJpMSsCxt/Crl18smtjrCGn5ZNrIVS0aDaIusvmLVYqrwMXQFFdX2Sk8iykd7Gy33q/dLcrMgD2vuUv+b2P/Gw4OpyWfk39l+MYS40VAWVinLZxn6V1dry70wQ/8UHdDeTlpMn4v5JVrd2xXfauvrPsQqf2L5o+VjVEmpl1aUItVKB9vbSoc62kvxvpQ6mhgHn0oJrs4OLD8NhJMcMp73jKkJyOHmRk5WKUhcDSwvwp57DJtJO+hlTaBrrAc8B5gOwhqhzaF7BDI+BFV08RZ5U2ZpQJci1dt12ERdBh32U8CI2cTs+7wQcw2ld0aHhS2XU0C5CRiFkAr4hBWrRaCiKvqzRHjWk4nHYWdhIcVvxwD3/lWl4uIz6QkiYEDNMEYkv0Eu4zFUASsu7CMYNzYioIcCElsQP0hwHEv49ySVEnm4tbNjI+cXL1wozMvLK8x66FZ0MSaUKBKbJwoxyJtgCEOf1fYC9sVjpZAxNTn5zdrqatXqysrNtWi0KhgIfJutuFQqPfdBScmruCxk5TK948/7opbVtTWi9LB7w2hXJxAFISfhP/kF3GNqa9AuavlRv1aN4cGiYYAP67SAIaN3fYD3sO10HAOekJYkPvf5mZxfv36darl541QpsUE7A5EFyAR8/NGkn8wgBAOArQtIk9mwW+Fv2E+bYYQGSEwAAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"Object","title":"Object","src":"/static/00f6b9dd30376984b5b47ddba6d848f1/03d1d/honest-shapes.png","srcSet":["/static/00f6b9dd30376984b5b47ddba6d848f1/733ef/honest-shapes.png 320w","/static/00f6b9dd30376984b5b47ddba6d848f1/03d1d/honest-shapes.png 366w"],"sizes":["(max-width:","366px)","100vw,","366px"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy"},"children":[]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"It doesn’t copy information about "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"x"}]},{"type":"text","value":" property into "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"Shape M2"}]},{"type":"text","value":". That allows it to be shaped in a tree like structure when having different objects."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"className":["grvsc-container","quiet-light"],"dataLanguage":"javascript","dataIndex":"8"},"children":[{"type":"element","tagName":"code","properties":{"className":["grvsc-code"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"const"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{};"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"x"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"const"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{};"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"x"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"y"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"const"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{};"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"x"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"z"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"k"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"const"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj4"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{};"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj4"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"i"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj4"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"j"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"test"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"';"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj4"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"k"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 677px;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 72.52584933530281%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAADFElEQVQ4y41TTUwTQRTeCkJLSPxJDBj/ggdv/pxIpEKixiAQDBcDiAc9eBGiBxNjYmKChAPqCUSEohEaoiiWthYslLbbLaXbpX+ULaWUEguFLrTd0gKVEnTcWWhjkQRf8uW99817LzPfzCDItkW0Gg70wETkhLQa4FUMgiiBA+9A/yfIF/L5PMalM0iJ9yzJJAitGEDooUEWAXkfkrAIhrID13XaQ0tq5QtS1NM8NyhvWVIqbkK+urICDtrHgBvvIaQS5G8DACTlSNRsRHazHYXpyP9YvAk4J47OyKSY/HXjsLFLaFrG0Mfb65ztUt7dG6WpMJj/3nfBKRZhyrdvlISwQxnGUHl8Xkoxn88WmQSt2SFcT62QNgBmpkEQQ+vZI9+u2r+tX1reubPssXUtzedDBB5YdzpA1D4OVnRaFCm7cplbmJeXcTU3l1tZXg6FRxxTU/disdhqJLIyIejoPA258tJSXnH+pYySgnwe3C0DqCcSpOlqphaEw2GSmHZn7Hr8QbmcK5PJjjA4vBmNcvaSq6TmwcGch4+2tNW0tzUwWr2iFAMVMO9qakwa4BR2sDmzXjbW/fGl9p2gwSUWPQPj1szfuO7AD5n0KSZorR8VdtSGdVgdYu75AigNClb0w72wMUDaOCblEGI0Gjk4jnN8GjX77hh92imNGpBSMaDUqg0wimfFMPWJRVS1DjmvagisEfgveHsAbMSAzzlZCBsXPJ59lPhrYoeTzFDoLaKeY1GapmD58sLC+8T7nfc+gdzm2hrAPncXIL5A8DpF09f0U65MWGBzOJL0EQ0pt4Ksk8gsReWbrGO3ZrzzZ+LrvnAk22yzVbg9nqL7jU1pSc3jk5Os9/d9S+L9BL7rZVx8Xv8v6ff7UyBIkmRzx44dLqqV7POgUVU1cykk2taqn5b0moHNcor59+mz8n4F1i6wGDo/6CMjw6N7/qBlfIQdGNaiNWGLGVBGAvj1uhgYNRy336lKjRAGW8BsAkEGPy2muT0H1tbVJWKXy2UIhULAbrc3xzmL1Vo06/EAt9u9KpZIiv4A0i7H3CnMjbgAAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"Object","title":"Object","src":"/static/f308570cd2897cd9ddfd63e125ec184f/7a681/shape-tree.png","srcSet":["/static/f308570cd2897cd9ddfd63e125ec184f/733ef/shape-tree.png 320w","/static/f308570cd2897cd9ddfd63e125ec184f/70d1f/shape-tree.png 640w","/static/f308570cd2897cd9ddfd63e125ec184f/7a681/shape-tree.png 677w"],"sizes":["(max-width:","677px)","100vw,","677px"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy"},"children":[]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Notice that even if we using the same attribute name as 3rd property, in "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"obj3"}]},{"type":"text","value":" and "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"obj4"}]},{"type":"text","value":", these are two different shapes. Reason for that is because shape is related to transition. If you could have a global shape that represents "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"k"}]},{"type":"text","value":" property, it requires defined "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"offset"}]},{"type":"text","value":" property. That might work with the same object structures in memory (offset is set base on how much space rest of the object takes before property). So if you have an object like "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"obj4"}]},{"type":"text","value":" then property "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"k"}]},{"type":"text","value":" might have a different offset than property "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"k"}]},{"type":"text","value":" on "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"obj3"}]},{"type":"text","value":" (transition to Shape M7 is different)."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"inline-cache-ic"},"children":[{"type":"element","tagName":"a","properties":{"href":"#inline-cache-ic","ariaLabel":"inline cache ic permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Inline Cache (IC)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Maybe start with some code this time?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"className":["grvsc-container","quiet-light"],"dataLanguage":"javascript","dataIndex":"9"},"children":[{"type":"element","tagName":"code","properties":{"className":["grvsc-code"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"const"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"N"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"1000000"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"const"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{};"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"Jake"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"';"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"function"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk9","mtkb"]},"children":[{"type":"text","value":"getMeName"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"o"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"  "}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"return"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"o"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"name"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"}"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"for"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" ("}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"let"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"i"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"0"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"i"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"<"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"N"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"i"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"+="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":") "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"  "}]},{"type":"element","tagName":"span","properties":{"className":["mtk9","mtkb"]},"children":[{"type":"text","value":"getMeName"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"}"}]}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"and then run this code like"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"className":["grvsc-container","quiet-light"],"dataLanguage":"bash","dataIndex":"10"},"children":[{"type":"element","tagName":"code","properties":{"className":["grvsc-code"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"d8 --trace-ic index.js"}]}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Off-topic: you might wonder why we’re running function that many times. It’s because V8 won’t try to optimise function unless that function is marked as "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"hot"}]},{"type":"text","value":". And you get "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"hot"}]},{"type":"text","value":" status when running function many times."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Now you can open "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"path/to/v8/tools/ic-explorer.html"}]},{"type":"text","value":" in your browser. That page allows you to explore what is happening with inline cache."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 350px;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 132.57142857142858%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAbCAYAAAB836/YAAAACXBIWXMAAAsSAAALEgHS3X78AAADn0lEQVRIx5VV2VLiUBTk/3/BKkdHX8byySp8GRdKUVAWQXYQEpYACQk7BFk8c/pAUkFQa27VBXKT9O3u2+fgo/8cHx8f3973NTWNFFWlWrVKxUKB+oMhKZUy3d3d00MwSMGHB/l+SbySZZny0mq1EmAH3PvbZ0+nNJlM6P39nWzbpuVyKdeWZVG32+XZk+9eryfP/MTY57+8pOenJ7lYLhdUKOSFpTOwAYAwVVaCWS6XWUWFdF3fZXhyekq3NzcuYKlYoF5/4ALO53NhPhqNqFgsUiqVokQyQW9vb7LZDiAkmZ2OvDAYDKjRqPP3UCTiGtLxu8PPgBFAZrOZTIbake3DR71WpZPfv6nV1qlcKtD9fZBZvFKtXpMDa7fbVOVDa7VasnGr1aYpe7/XQ3xoWpMCgYC7mM1kBNw77KlN7yw/kUjIBOvPcl1AezqhOrOJx2KUyxdpwi+XSyVhV2KvFKUiVmgcscFwwOxsNz57JcPsX4eHEg9db9MDZy8ai9OQ5UHicDhkwIb4GQqHqMSbedl58yiAoF/gUGMsFnP2qMlA483Daxbj8Vii02w2qd/v83ML95S9LAWwzQCxeIzzGBZmyWRSfIKP4XBYGCGf2WxW8ocs4pBMZvxZugAqikLn5+ebrZYUiUSoXFG2DgWykcdQKETpdEosgFVQpqrVbcApH4qmNUg3DDdvyKfB15jwFuuG0RFQJ/CQDOmLxfIzwwqdnf0hjf1p8by6+ivNAPlTFFXAVFaBjQA4Hk+2/Nv1kB98fHx0b6JWdd3YesEJMgDBGMw+59Bl2NFRCTWq1WriT5MroV6vcybzsgaPkUF0oZ96owDC2IODA1nomh26DdxSJpuTmKBm4RfKDXGJRJ4F/Ku+6HMyhuw5RW+apsgCkNNt0ChwD+vrxkBfe4gO7ff7JQrxWISSrynKs9x0OkMq583JHaIDMEgHCUx4u5ND+HRxcbHZakUxrmmVPfUOVA4AkUOUXzQakcYcjb/QeOOtCzizp2TwSVf4dA3TEvmW1ZXIoNTAHHlEbAD63Z+Xz4nJ0dGhvAD/rq+vKMIliBo3OoasQQUOpb/p5t4D2Y1Nx5TaXSteyimiUrzDGxkv0F5Ak1lkc1mqNzRKp165B5apwHVaLBUpl8vLoSCXTly8+dvbsdFNjo+P1hUxGUn3zjDQup0tRB7KDxaE+UDSmTRVeRPTtPY3WGQNjdS5iUCjVr174xrAyKSTV++/njP+AVaUAli+qlywAAAAAElFTkSuQmCC'); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"Object","title":"Object","src":"/static/1babf57079d1b038ded7d155f1a003ec/d6f3f/trace-ic.png","srcSet":["/static/1babf57079d1b038ded7d155f1a003ec/733ef/trace-ic.png 320w","/static/1babf57079d1b038ded7d155f1a003ec/d6f3f/trace-ic.png 350w"],"sizes":["(max-width:","350px)","100vw,","350px"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy"},"children":[]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Important part of it is "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"state"}]},{"type":"text","value":" which can be one of the following states:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"0 uninitialized"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":". premonomorphic"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"1 monomorphic"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"^ recompute handler"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"P polymorphic"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"N megamorphic"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"G generic"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"In our case "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"state"}]},{"type":"text","value":" is set to be monomorphic which means that function is optimized to receive only objects with one defined shape."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Now let’s define what IC really is…"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Unfortunately, we have to do it in the hard way. By looking into some bytecode (There’s a "},{"type":"element","tagName":"a","properties":{"href":"https://medium.com/dailyjs/understanding-v8s-bytecode-317d46c94775"},"children":[{"type":"text","value":"blog post"}]},{"type":"text","value":" about understanding bytecode by "},{"type":"element","tagName":"a","properties":{"href":"https://twitter.com/fhinkel"},"children":[{"type":"text","value":"Franziska Hinkelmann"}]},{"type":"text","value":" if you’re interested). To do that just run"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"className":["grvsc-container","quiet-light"],"dataLanguage":"bash","dataIndex":"11"},"children":[{"type":"element","tagName":"code","properties":{"className":["grvsc-code"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"d8 --print-bytecode index.js"}]}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Output of that is quite long but we’re interested in last part. Look for "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"generated bytecode for function getMeName"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"className":["grvsc-container","quiet-light"],"dataLanguage":"","dataIndex":"12"},"children":[{"type":"element","tagName":"code","properties":{"className":["grvsc-code"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"text","value":"..."}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"text","value":"[generated bytecode for function: getMeName]"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"text","value":"Parameter count 2"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"text","value":"Register count 0"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"text","value":"Frame size 0"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"text","value":"   69 E> 0x2d34c959f9d6 @    0 : a5                StackCheck"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"text","value":"   86 S> 0x2d34c959f9d7 @    1 : 28 02 00 00       LdaNamedProperty a0, [0], [0]"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"text","value":"   91 S> 0x2d34c959f9db @    5 : a9                Return"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"text","value":"Constant pool (size = 1)"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"text","value":"0x2d34c959f989: [FixedArray] in OldSpace"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"text","value":" - map: 0x0741c8840789 <Map>"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"text","value":" - length: 1"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"text","value":"           0: 0x0741c8843eb9 <String[#4]: name>"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"text","value":"Handler Table (size = 0)"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Look on "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"LdaNamedProperty"}]},{"type":"text","value":". This method is responsible for extracting named property from "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"a0"}]},{"type":"text","value":"(argument 0). Property name (in our case "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"name"}]},{"type":"text","value":") is determined by "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"[0]"}]},{"type":"text","value":" constant from "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"Constant pool"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"className":["grvsc-container","quiet-light"],"dataLanguage":"","dataIndex":"13"},"children":[{"type":"element","tagName":"code","properties":{"className":["grvsc-code"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"text","value":" - map: 0x0741c8840789 <Map>"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"text","value":" - length: 1"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"text","value":"           0: 0x0741c8843eb9 <String[#4]: name>"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"After getting property value from argument, function stores it in the accumulator (function returns accumulator at the end)."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"That process generates sth we call "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"Inline Cache"}]},{"type":"text","value":" ("},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"IC"}]},{"type":"text","value":"). Every time function runs with a different object shape it creates a new IC entry."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 567px;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 83.06878306878306%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsSAAALEgHS3X78AAADmklEQVQ4y41UfUxTVxS/bRUobW0JuC2aaCN0AQ0x27LoH8s0JouJJhj/2kIgm5oskUg0LG4kXWWzyf6ZJBozMaKCWkA+YqmoJdBCsZbSEiilff2gX6N7IIJFXsX1U87ufYiRZKAnOfmde8955/3OOfdehD5ATKrbXILW1pbPGYs5PW3oA0PjzaWR9tZUym6DUE93M/Enxka5KH2/Mg8MilztH+W5eTl5ubsLZeKuqVrJweN7JDiGQwIBgMVQb88X5pbm9EhHGwR7updeWMwp8HlhxjjAJgSvGyfsOlMAuu8+MlUhEd77GGvmOTgmOnp6/xZss8w+KyzMJqi+dHEf1iTWtObypdTw3ZZ41GKG2ccGFZvQ5WTjEa3VFzva2susd26doDraymc6H+19w4z1F8tkQoKeLs2XEw8fgP1eB9gwS/d9DaTGRuGpoU9N/ElSMpFXZpNm3jgA2r8uw2S3FhiT0fJuqbLt21iGlEYti5iMuhlDn2FhaLAfs9NhHQrreuTEn7bb2Hj0Qt97cM45Pj/lcADj90HUOvQj2b9Se4G3SyolZvb3JSWc9Qa3Us1bI8IwrWGafv50dtZ9vVOzlfQvP7+AMOOTvp58DGjQDJz9e78S4W+4R745JGi8ULeR2BAB7tdnnKiqdm45qae9lavraOffunZNfKKsbPN45z3e/7HYwEG8bB7ayNr4J9sz0SrWB76NrFkBHwsbvO3Tw+9s78Yn4SxOSKoqFiN0PAPbeBBBXsEmWE2CpmmkVqs5b7KRaWVvEORzSUuOiYH709XgnbP1E5SyZcpyvpm2yhsC9t9UkyO/N9HDitvh4V8aJkfL5TM31uszJyfnE+HKoqqO6qvTM3BDPwc3+yNQr3sO1/XLerV3Di4+moUfFNMD753auZ/P76r/s3FP212tcvpZBHwhOj5OTSQpTyDp8gaT7olQwuv/O+XyBmLDY56daya06sbYnlBm/ylq0L8QdEw+A1iC1+kUxGL/QjS6AK8WX0IiHoOl12lgmAUI+r1FayaccsyzGLJPC/sbbEIP5SuJxWKheDzhiEZfUv5AwBUOh6nFxUUqkUy6GCZqdzpdO9Z9ZXzWf1atlUolX/6rPMtoNGZUVlaKVSoVv6mpKbOmpiZLoVBkVVdXr334nU98LFJPAsg24OK8vQnLQk7BZqybVh6QDxa3281iRUUFi1KpNEMikYgEAkGuSCTCpkRYVFREbgwqLS1F/wH9YeujVOxnawAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"Object","title":"Object","src":"/static/dc7336f187d4a7389e1ae63e15d1e592/79659/ic-create.png","srcSet":["/static/dc7336f187d4a7389e1ae63e15d1e592/733ef/ic-create.png 320w","/static/dc7336f187d4a7389e1ae63e15d1e592/79659/ic-create.png 567w"],"sizes":["(max-width:","567px)","100vw,","567px"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy"},"children":[]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"We’ve called "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"getMeName"}]},{"type":"text","value":" with an object that has given shape M0. First run of the function works as described before so V8 has to look up for named property on "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"a0"}]},{"type":"text","value":" and store it into "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"acc"}]},{"type":"text","value":". After running bytecode it creates IC which contain two things:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Shape"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Way to get to property"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Now if we call the same function again with an object that has the same shape:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 567px;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 83.06878306878306%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsSAAALEgHS3X78AAADiElEQVQ4y41Tb0xTVxS/75Via6l0yua+LCGLTVaTTcOyZVmWfdiXfTH7uoTMRBc+kbE1LovE2nSTTybT6JZtOLUqFhBkZfxbwb5XqG1Wai1QaF/7+odCKRQrsLaU9a+c3fsUM01AT/LLOfecX373nnvPRegFtmt3JQoODdIkvnersy7tdJSXxiwwek2/6b7dVSp5JiF6Z7iD1AtTEzQq9zfVAKvZ13DkgxqZuFpx/Ksj1ca5s3tPdR9TVIhFUkK03rwuCMYsTJ2js6N8v6cb5lnzZso5XoIQD8s2qyAIvJ9GpQH1AWDq9+O1HKMGQ6wrf/mKztjwBi2iqgjR9PuvguDssKmu9+KFQt9PF8sjl34r3bvVkc84HZC8O2YQBDmvwENxk+Vt3mj8wtl2vWG6s/PoP4Pm97daflelRIssIxCDQwPv8UMDwA/2w3TvH8D1/wmlqQlIjFl6Sb1IWia24bD3rdmsYPrlZ5gfMUFyjJ3EadHXajUNAMjd3UURnsfYo1z7286sO8ct+GTsutNhxn48xtzRkHrZMynw0Bpr/nTFO7O2ODMD6XAIkva7jcLpDh+Wbp2UCO9kT+tbwUoq1bWYSDxIJJP+ZYC9JKdUKgVBuZhGH6lDiLFkKcynn4MINoD+WO1FJ849fCy6MNhP97Xd2O0Zd8iGe27L8FiIcJqmKEoiCB86jl7GPvl8dfuiWCwmFyz5X1OoAuXwRuQlOeznMIIYIYxF+sAeED0jEAwGUTwep9xuN/UkRVMiqSD4IcrQ312O3Tx1Y957piPu/KF9waUzLLiI/x5D2xZznbw2P3FUs3x1pw7o1/bXPn2Uk/ooe2k0C1eYJOhHV+EyswJX2MdoNT+EC38l4Zh2ybqt2jsHD5EWxFFP4nUPE3jLbvN9u/RgFcLReH7aFyz6ApEix88W/cFokQ/PlTg+knNNBQ5uK9h6/moF8bYh5zeOkYmVgDuEH38THpVLkMv9C5lMCjay61DI52DzURnS6RTMhnnVC+cq5I5VsXqXPOALfZbL5aL5fGEmk1n3hSMRLhaL+bLZrK9QLHLpdMbj9XJv7jgGrT/qn1m3tLRINac1EpvNVtnU1FRtMBik7e3tu3Q6nUSr1Uqam5upbcW89pDgffYImrRy1HM/hYzUqxh7nsQvb36/X/CNjcJvRLW1tZUKhUIuk8n2yeVyHCqqVCqVmGxYX1+P/gPRp/eiB4ssUQAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"Object","title":"Object","src":"/static/b5c56cb4407f5e9f85ae18a3e7c545d4/79659/ic-use.png","srcSet":["/static/b5c56cb4407f5e9f85ae18a3e7c545d4/733ef/ic-use.png 320w","/static/b5c56cb4407f5e9f85ae18a3e7c545d4/79659/ic-use.png 567w"],"sizes":["(max-width:","567px)","100vw,","567px"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy"},"children":[]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"V8 compares current shape with shape stored in IC and skipping whole process of calling "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"LdaNamedProperty"}]},{"type":"text","value":", because there is a “shortcut” for this “kind” of shape, stored in IC. That way we have nice optimisation of the function call. But what if we call that function with a different object (different shape)?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 607px;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 97.52883031301481%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAAD0UlEQVQ4y61UbUxbZRS+UGGt1aYz2FIDf6bFxKBZHLosmiXT/XI/8JebSxQ1JluyORYzxvZLf7HvDebiJpsdAdfiBly+eoFCb0s/BErpKK2ubJSOdbffH4D9wN62x/te1zpchph4kpNz7rnv+7znvM85L4b9BwGXsxDZuUFiH/xmB3sPTutaWzJerQZCRn207WSDGIP+Wl6691A5aOrE+z/YXCoRSURvvvaqUMR/QXym41BJ7ZXdLzIYzyCgxuPHWGv4qe2gQ9kPjNLhMWMmbbNCfGoy2n7ubA7wKzGQx0S7NvOFzPoCRosZZbP5srFamAN8o6LiOWS7Gs9/jTddgLYTDTTjZ+zdXRDQaSOk7Jp4dUnO+ZceDCqbtdeuyqYUN2RB9chxAPjrH2O3b9nCR76jr/fzxTEj3FcNZeYHCfBqSQgb9TH1j1clKEMspunksJtMY1vnCSVMKG6AHe+CO3inkwEqyh34eoX0WfYOif4an1ajmu3vxZ0DSjyoGyXcI6rvjnxWw2UXhocGUAaoVCzonDuZjEYgFgpl702aalDs/Z07Nwj4/KK3Kit56NuvHx1fuT0Fls5btK0HT2V/tcEDcqR5VbmxSITN0hcK1THg8AdNg312dheKVVdXczmcQv7L5eUIkENel03o21rB1o2ngwYdDXcdiOWWPFiUHMZ+j8dZEjwU9SmjNrfbfXvKbN6BYlVVVTwel1v04Xs72ENVzT+ME5e/B/npU+neSxdpr0YNvlHN9ae1W0F9fX2BUCjk5tjNk/aIIP+oRp+atkBQr6NDBl0qMzMNzJ0+Ccjj8Z4I5ZxNZWWYX6dl/QmFvHLyZ8V219DA2wyB7zB2m6ldvmnVTofDwVqz2YzJ5XKWoOLi4g2PZ7ltTys2nYXCf1aUc84oXJx/mza0mG2FvUe7sf9LuBtFr7BZ7j8dEdQ2zX188Jztk/pm70eHL97bu++E6YujjH/ksntP3RX37vUAFpRJt7INfbjJ9+63HRFo6KTg0tAinFeGGY3ABSICZ/vC8M2tAKwrRb5AlCfn5rDDZJlbBP2MJ2WY8aT1VipttHmRZnVWT3xNoJYmRb5VBjs0p34ZMKsdM/aFRGwRvA8XaJ/HnfZ7H6YZS4f8HhSLrgk4TlixdvlNlkWyxyAzEJOU+743C48kxUxTcmUF8t8pOrsmoGXkTj5Dl9VzwGmhWvxUEE8k4mQikRgOBALDFEWpl5aWVMlkklxeXu5b30sNT71r1FIlj/fimnLXvPD3uLkihT5XiINeJRSTSCR8gUDwPDNdJaWlpTypVIqGAPsT3+4xQcDdLN8AAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"Object","title":"Object","src":"/static/77cc23586d0294c630c08cebd59f42b7/030bd/ic-add.png","srcSet":["/static/77cc23586d0294c630c08cebd59f42b7/733ef/ic-add.png 320w","/static/77cc23586d0294c630c08cebd59f42b7/030bd/ic-add.png 607w"],"sizes":["(max-width:","607px)","100vw,","607px"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy"},"children":[]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"V8 created another IC for shape M1. After that we have “shortcut” for two types of shapes. But how many IC can V8 create for one function? A lot… only problem is, every time it does that there is a deoptimization going one."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"function-states"},"children":[{"type":"element","tagName":"a","properties":{"href":"#function-states","ariaLabel":"function states permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Function states"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"There are different states your function can be in, but we’re mostly interested in 3 of them:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Monomorphic - 1 IC"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Polymorphic - 2-4 IC"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Megamorphic - >5 IC"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"While V8 decides if function should be optimized, it check current function state. Only two of them can be optimized: Monomorphic and Polymorphic. Reaching 5 ICs V8 basically means "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"“I have no idea what I’m going, so call it a day”"}]}]},{"type":"text","value":". At this point "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"TurboFan"}]},{"type":"text","value":" is not going to store anything into IC, instead it fall back to global cache. Usually it doesn’t matter if your function is Megamorphic, but if that function runs very often you might think about optimizing it by reducing a number of different shapes it accepts."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"back-to-our-function"},"children":[{"type":"element","tagName":"a","properties":{"href":"#back-to-our-function","ariaLabel":"back to our function permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Back to our function"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"className":["grvsc-container","quiet-light"],"dataLanguage":"javascript","dataIndex":"14"},"children":[{"type":"element","tagName":"code","properties":{"className":["grvsc-code"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"const"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"N"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"10000"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"let"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"a"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" a"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"Jack"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"',"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" b"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"Sparrow"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"};"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"let"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"b"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" a"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"Charles"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"',"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" b"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"Xavier"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"};"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"let"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"c"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" a"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"Frodo"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"',"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" b"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"Baggins"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"};"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"let"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"d"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" a"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"Legolas"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"',"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" b"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"Thranduilion"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"};"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"let"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"e"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp4"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" a"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"Indiana"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"',"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" b"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"Jones"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"};"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"let"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"f"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp4"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp5"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" a"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"Gandalf"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"',"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" b"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"The Grey"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"};"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"let"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"f2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp4"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp5"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" a"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"Jack"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"',"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" b"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"Sparrow"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"};"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"let"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"f3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp4"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp5"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" a"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"Charles"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"',"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" b"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"Xavier"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"};"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"let"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"f4"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp4"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp5"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" a"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"Frodo"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"',"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" b"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"Baggins"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"};"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"let"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"f5"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp4"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp5"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" a"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"Legolas"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"',"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" b"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"Thranduilion"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"};"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"let"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"f6"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp4"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" tmp5"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" a"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"Indiana"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"',"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" b"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"Jones"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"};"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"function"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk9","mtkb"]},"children":[{"type":"text","value":"test"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"  "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"let"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"result"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'';"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"  "}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"for"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" ("}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"let"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"i"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"0"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"i"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"<"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"N"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"i"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"+="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":") "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"    "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"result"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"+="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"a"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"+"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"b"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"  "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"}"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"  "}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"return"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"result"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"}"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"function"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk9","mtkb"]},"children":[{"type":"text","value":"test2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"  "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"let"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"result"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"'';"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"  "}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"for"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" ("}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"let"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"i"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"0"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"i"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"<"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"N"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"i"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"+="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":") "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"    "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"result"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"+="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"a"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"+"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"obj"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"b"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"  "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"}"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"  "}]},{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"return"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"result"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"}"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"const"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"startT1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7","mtkb"]},"children":[{"type":"text","value":"Date"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk9","mtkb"]},"children":[{"type":"text","value":"now"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"()"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"for"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"let"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"i"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"0"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"i"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"<"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"N"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"i"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"+="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":") "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"\t"}]},{"type":"element","tagName":"span","properties":{"className":["mtk9","mtkb"]},"children":[{"type":"text","value":"test"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"f"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"\t"}]},{"type":"element","tagName":"span","properties":{"className":["mtk9","mtkb"]},"children":[{"type":"text","value":"test"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"f2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"\t"}]},{"type":"element","tagName":"span","properties":{"className":["mtk9","mtkb"]},"children":[{"type":"text","value":"test"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"f3"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"\t"}]},{"type":"element","tagName":"span","properties":{"className":["mtk9","mtkb"]},"children":[{"type":"text","value":"test"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"f4"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"\t"}]},{"type":"element","tagName":"span","properties":{"className":["mtk9","mtkb"]},"children":[{"type":"text","value":"test"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"f5"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"\t"}]},{"type":"element","tagName":"span","properties":{"className":["mtk9","mtkb"]},"children":[{"type":"text","value":"test"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"f6"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"}"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7","mtkb"]},"children":[{"type":"text","value":"console"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk9","mtkb"]},"children":[{"type":"text","value":"log"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"\""}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"test with one shape:"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"\","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7","mtkb"]},"children":[{"type":"text","value":"Date"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk9","mtkb"]},"children":[{"type":"text","value":"now"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"() "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"-"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"startT1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"\""}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"ms."}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"\""}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"const"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"startT2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7","mtkb"]},"children":[{"type":"text","value":"Date"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk9","mtkb"]},"children":[{"type":"text","value":"now"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"()"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk10"]},"children":[{"type":"text","value":"for"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"let"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"i"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"0"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"i"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"<"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"N"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"i"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"+="}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk5"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":") "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"{"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"\t"}]},{"type":"element","tagName":"span","properties":{"className":["mtk9","mtkb"]},"children":[{"type":"text","value":"test2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"a"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"\t"}]},{"type":"element","tagName":"span","properties":{"className":["mtk9","mtkb"]},"children":[{"type":"text","value":"test2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"b"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"\t"}]},{"type":"element","tagName":"span","properties":{"className":["mtk9","mtkb"]},"children":[{"type":"text","value":"test2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"c"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"\t"}]},{"type":"element","tagName":"span","properties":{"className":["mtk9","mtkb"]},"children":[{"type":"text","value":"test2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"d"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"\t"}]},{"type":"element","tagName":"span","properties":{"className":["mtk9","mtkb"]},"children":[{"type":"text","value":"test2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"e"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"\t"}]},{"type":"element","tagName":"span","properties":{"className":["mtk9","mtkb"]},"children":[{"type":"text","value":"test2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"f"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"}"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk7","mtkb"]},"children":[{"type":"text","value":"console"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk9","mtkb"]},"children":[{"type":"text","value":"log"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"\""}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"test with multiple shape:"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"\","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7","mtkb"]},"children":[{"type":"text","value":"Date"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["mtk9","mtkb"]},"children":[{"type":"text","value":"now"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"() "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"-"}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk7"]},"children":[{"type":"text","value":"startT2"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":" "}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"\""}]},{"type":"element","tagName":"span","properties":{"className":["mtk4"]},"children":[{"type":"text","value":"ms."}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":"\""}]},{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["mtk6"]},"children":[{"type":"text","value":";"}]}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"After executing this code it prints:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"className":["grvsc-container","quiet-light"],"dataLanguage":"","dataIndex":"15"},"children":[{"type":"element","tagName":"code","properties":{"className":["grvsc-code"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"text","value":"test with one shape: 3015 ms."}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"text","value":"test with multiple shape: 12329 ms."}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"What just happen? First of all we’ve set number of operations to 6*10^8 for every test (6 x 10000 x 10000). First function "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"test"}]},{"type":"text","value":" is called with the same shape all over again (different objects, same shape). Second function "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"test2"}]},{"type":"text","value":" is called with 6 different shapes and because of that V8 is not optimising it."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"If you open "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"v8/tools/ic-explorer.html"}]},{"type":"text","value":" and run above code with "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"d8 --trace-ic index.js"}]},{"type":"text","value":". You could be able to load "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"v8.log"}]},{"type":"text","value":" into "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"ic-explorer"}]},{"type":"text","value":". For those who don’t want to do it, here is a screenshot."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"test(obj)"}]},{"type":"text","value":":"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 225px;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 17.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsSAAALEgHS3X78AAAAqUlEQVQI121O2w6CMBTjc/kteTXRZ5n+hCAM0BAvGOU2lQmEDeq2xMQH+9KTtjmt5XlbrAmB5vR4woMxhIEP1yW43u7wfQ95USCJQtA4QV2VoJSCcw4axRiGARpC8TRNsGaOA9u28Ysg2GG5mGNFNviH7HJGWTFz932PIs+RHvaonxwWU4uyLIN6j3EcTeit2l9NY8JSStOsva/ftS2E0vUq7Rut6yCExAf2xOBLa9vBJgAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"Object","title":"Object","src":"/static/324eb86220cec172bb7ad04ae55cb2ac/43958/monomorphic-example.png","srcSet":["/static/324eb86220cec172bb7ad04ae55cb2ac/43958/monomorphic-example.png 225w"],"sizes":["(max-width:","225px)","100vw,","225px"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy"},"children":[]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"test2(obj)"}]},{"type":"text","value":":"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 231px;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 48.484848484848484%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAAB30lEQVQoz22SaXLaQBCFuWj8h1/BVyC+AMUx4kvgpeIkCgkW2pFAa7QgzCLZIgQBQi+jFnG5ErpqSvVmVG/e19MNnufx5fMDHthaLFMo0hC9Xg8Ty4U+UnF3f48g8PHp7gam7UFj55o+hiTLkBUNVZUlTt8SjevrjxAEAXEcww9CeK4LfvADXP8725thvlggTVawLAvPLxlm0wjx7AlpmsKybTLa5TkSpqtqvG+1oKkqCVUWIYgSQpbo9vYGfhTj3yqPBbTRiKU5QpYlvGQZPM+FaVq1YbvdhmEYJALfh2nZhCgzpFXyTPvH45FWVYf9DlNGU544d/s9NuuM/XtK+OHqCoaukxgbOkRJhmVOMBgM8DSfv/bmr0G+3cBxXJQn1F+bDZLVAp4f1Iaty0vIkkRiMjYI2WSGHPeV9ep/w/0uh+v9RHE4EOpmu0UYBpiYZm3Y6XRg2zW/5zrswCJkVVNfMd4a7vItgjCiHjqOw5AP9ECL5bI2bDabEEWBhD7SMHjkoesjfOM4RNP4rKHNkIuioN5n6zUFqMjIsNvt0ki8TVghSKwN5xJWyEEYkq4S7tmjpGnC2uDVhu8uLiAMh6exkWj+VEVBv99nCadnHuU39avSPP9Il0ZRyAZdofM/QjjeaGQFgb8AAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"Object","title":"Object","src":"/static/ddccaaa9086e3ec9ea45d5a0cc740341/e2a47/megamorphic-example.png","srcSet":["/static/ddccaaa9086e3ec9ea45d5a0cc740341/e2a47/megamorphic-example.png 231w"],"sizes":["(max-width:","231px)","100vw,","231px"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy"},"children":[]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Result of that test is obvious and "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"test()"}]},{"type":"text","value":" runs 7.8 times faster than "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"test2()"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"You might ask why creating "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"test2()"}]},{"type":"text","value":" if it looks the same? It’s because after running "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"test()"}]},{"type":"text","value":" with one shape it’s already optimised for it. I didn’t want to affect performance of the second run, but still want to keep it in one file."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"extra"},"children":[{"type":"element","tagName":"a","properties":{"href":"#extra","ariaLabel":"extra permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Extra"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"I’ve mentioned that shape contains more than just information about added properties. Here is an example of created shape for "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"let b"}]},{"type":"text","value":":"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 468px;"},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 225.64102564102564%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAtCAYAAACu/EtoAAAACXBIWXMAAAsSAAALEgHS3X78AAAFz0lEQVRIx5VXWY8TZxD0zyU/gTyTRx4hCUGEREqkIO4IogAROQgse3vX933bc3nGHnvGc32V6rF35cCKHT7Jsj3r6anuqq7uzc1mM/iLBUb9PlrVKpzRGHBmsHl9uVgiiiI0Gg20220EYQjf97FarWBZFlzXPf++XC7hODZyX127hnapiE61BluCHZ8iuPU9uoYBfTKBnC+uXMGXV6+mN2qaxhsdXL9+HYVCAdPpFAKqVCrj5s0byMnTff4wimNYfMKUTz07/sqHzZsXQYAElx+lFHL2aIQBn1Q+OESvWIbaO0T03V30uz3Mu31Esznw5Dmwu58GVXyw3HgWYPslJ6czNUEoZ0lE3pwBGCTa/GjG2kRMCUsPahNkO9g2uhShOSRCklHO51E7OcUif4rk9z8wJEkmUbqmhfjNDlCtpwGRfDr5nDGeYGnbCMlWwlopfk8OjrHiZ5DVJAihylWgP9wEVJ8OaOo69PEYg16PTJVgExXaHZiUhUlGdd1A2OE1IlXr3C4J2B/AbLVh8D2i/lAoIb73EFPTTPUIqe/L11AsBTKlzBu9YEUe5mizbs7cTdMK4oif59Cos1DSZ6BMCC0G6ZGMTrkCi+kmO3uIbtxCr9tFoOlQZFndewT15t06IGXzaYSsobRXRAIcUb27ONMBfM+DbRHhllQuOzlzMKSgi6jkT9Assn5kOLrzI3okaca6+tSkevoc6v1+RtkQobdYo4rCAEuyC0FF1JJeahBkGHzPxvJwCK3ZJMI8KodH8EoVJH//C41SMjodzCYa4v2jVEqZEIrWHLZf6K9ShAnTjBnQZf0EYcxXcpgHGq3sAae6lgq7Xi5jyoCgmB17CpNdIxYWkm2wLNlSHgxgtFrQGNBn7UDHiX74GSb1qUTYIWv5/EXqQtmEbZlMbwmPvdxl8KkEES+kmOcLFxMGFqcWZBlbr5/6YZ3iNjvdVB7R17fRJ2JPHJzCxv3HUG/fr++IM7SeuLU8V1ptIWRsThCFsHlNhJ8dIf2wuyVsnxKJf/oFHbaeQ4I8liB59gI4OMoobLIYcI4krJOiswRkGMMxEkHFOgZkNybb4uKZEEqnaBR3o1ZDkQgXzTYS1lFjKQyK2+KQik+LAD0xmw4ZTFxmaTtQNIaYVp+8ep0aBaSenCXJ212gVs+essubx5RMnY7tSHr0xCXJMIlQZ41DPkzSz9zLQw55EfbcoEvnCwg56CfsoHNhP34G9e4zZOORDBH2hPW0ZA5D5lMIl4ToIuzP8sPeWtjV4zxGrBPYYuHN2+kYXdIrlVjbgyefJ2xfWotnzq5wxbH5PSaaiATYlJSMWEldfbAtXIQ6dew+F50SvbB5WoB3eIz40dO09Sy2okfDSF79CVA6yTYpMrTOPm8FzRksvk8USuYKmYxJTFJrpD4oP4wFrcxlcSJxdV73OSXV1grykR+OiabJ+hWJ0KGRCpohl6gaW/KETu4e5RHw7y06+Jiop5Ra8m7vwrGQ+qH0rE2rT6R+FQr4t5ewZQIyaCLG+tcbRNy+NDp7NLXXgWRwbazu/ymTFJdkyEZab7fo1HbaHeKHs3TQc+8RpqW3z9L8YCf8aNAPCkUM6g3M6X/J7gGib+9gwOuRCF3WuPtr2ajNfphamcjnQlIkDT59xd3QMHQ4W4N+QWQWMwg/QHNet4sCSg27JEN2w26likQ22G9up4N+IX0sK/KDp+cILxe2bLAiXJ4V313alWxcIpuYyOesY1pD8cusU29MLxRhVynq1UkRMaecuI/J4b6g4Sb/vCX71Yz2RR3OKREpdkDBRnSfZH+PK16wad0ESaFGgx1k3WBNbqoG2nTq8XACz+aCybLp+ojX6qmLz8wmA80ypsxgxlCDpXMhktWPb6q4RKVygmGvQ4SUyGgHyiptAmYgZTZ3WPwZmq0mLEOj9S94zcWc3qhTi8HMk5mafdCP6DZNiltmS/qPz627GLGWPseBkjZ7+CvUzm4m2fwHbKx4IVmIl0YAAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"Object","title":"Object","src":"/static/c1c6d744d27740eafca5339c43cc1d86/45d15/full-maps.png","srcSet":["/static/c1c6d744d27740eafca5339c43cc1d86/733ef/full-maps.png 320w","/static/c1c6d744d27740eafca5339c43cc1d86/45d15/full-maps.png 468w"],"sizes":["(max-width:","468px)","100vw,","468px"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy"},"children":[]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"If you want, you can generate that for your code by running"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"pre","properties":{"className":["grvsc-container","quiet-light"],"dataLanguage":"bash","dataIndex":"16"},"children":[{"type":"element","tagName":"code","properties":{"className":["grvsc-code"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-line"]},"children":[{"type":"element","tagName":"span","properties":{"className":["grvsc-source"]},"children":[{"type":"element","tagName":"span","properties":{"className":["mtk1"]},"children":[{"type":"text","value":"d8 --trace-maps index.js"}]}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"and uploading "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"v8.log"}]},{"type":"text","value":" into "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"v8/tools/map-processor.html"}]},{"type":"text","value":". When it generates chart, click on "},{"type":"element","tagName":"code","properties":{},"children":[{"type":"text","value":"Transitions"}]},{"type":"text","value":" and explore a list of them at the bottom of the page."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"style","properties":{"className":["grvsc-styles"]},"children":[{"type":"text","value":"\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .quiet-light { background-color: #F5F5F5; }\n  .quiet-light .mtkb { font-weight: bold; }\n  .quiet-light .mtki { font-style: italic; }\n  .quiet-light .mtk3 { color: #AAAAAA; }\n  .quiet-light .mtk7 { color: #7A3E9D; }\n  .quiet-light .mtk6 { color: #777777; }\n  .quiet-light .mtk9 { color: #AA3731; }\n  .quiet-light .mtk1 { color: #333333; }\n  .quiet-light .mtk4 { color: #448C27; }\n  .quiet-light .mtk10 { color: #4B69C6; }\n  .quiet-light .mtk5 { color: #9C5D27; }\n  .quiet-light .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(0, 0, 0, 0.05));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(0, 0, 0, 0.2));\n  }\n"}]}],"data":{"quirksMode":false}}}},"pageContext":{"slug":"/2019/08/v-8-function-optimization"}}}