{"componentChunkName":"component---src-templates-post-template-js","path":"/2019/08/a-modern-guide-to-events-in-java-script","result":{"data":{"markdownRemark":{"fields":{"slug":"/2019/08/a-modern-guide-to-events-in-java-script","tagSlugs":["/tag/dom/","/tag/javascript/","/tag/events/"],"readTime":{"text":"22 min read","minutes":21.9}},"frontmatter":{"description":"How Events are propagating through DOM elements? Is there a way to use it to our advantage?","tags":["DOM","Javascript","Events"],"date":"2019-08-19","title":"A modern guide to Events in JavaScript"},"html":"<h3 id=\"what-are-events\"><a href=\"#what-are-events\" aria-label=\"what are events permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>What are Events?</h3>\n<blockquote>\n<p>Events are objects and implement the <a href=\"https://dom.spec.whatwg.org/#interface-event\">Event interface</a></p>\n</blockquote>\n<p>Those objects are dispatched by the user agent (or the application itself) and handled by the <a href=\"https://dom.spec.whatwg.org/#concept-event-listener\">Event Listener</a>. Events are responsible for handling user interactions or network activity. There are different types of events but you can check then on <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Event#Introduction\">MDN</a> if you want. We have to focus on how events are propagating through the DOM.</p>\n<h3 id=\"event-propagation\"><a href=\"#event-propagation\" aria-label=\"event propagation permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Event propagation</h3>\n<p>First, we have to create some simple DOM to explain event propagation</p>\n<pre class=\"grvsc-container quiet-light\" data-language=\"html\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk20\">&lt;</span><span class=\"mtk10\">div</span><span class=\"mtk20\"> </span><span class=\"mtk11 mtki\">id</span><span class=\"mtk6\">=&quot;</span><span class=\"mtk4\">container</span><span class=\"mtk6\">&quot;</span><span class=\"mtk20\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk20\">&lt;</span><span class=\"mtk10\">div</span><span class=\"mtk20\"> </span><span class=\"mtk11 mtki\">id</span><span class=\"mtk6\">=&quot;</span><span class=\"mtk4\">dataContainer</span><span class=\"mtk6\">&quot;</span><span class=\"mtk20\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk20\">&lt;</span><span class=\"mtk10\">div</span><span class=\"mtk20\"> </span><span class=\"mtk11 mtki\">id</span><span class=\"mtk6\">=&quot;</span><span class=\"mtk4\">clickedData</span><span class=\"mtk6\">&quot;</span><span class=\"mtk20\">&gt;&lt;/</span><span class=\"mtk10\">div</span><span class=\"mtk20\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk20\">&lt;/</span><span class=\"mtk10\">div</span><span class=\"mtk20\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk20\">&lt;</span><span class=\"mtk10\">button</span><span class=\"mtk20\"> </span><span class=\"mtk11 mtki\">id</span><span class=\"mtk6\">=&quot;</span><span class=\"mtk4\">dataSubmitter</span><span class=\"mtk6\">&quot;</span><span class=\"mtk20\">&gt;</span><span class=\"mtk1\">Add Data</span><span class=\"mtk20\">&lt;/</span><span class=\"mtk10\">button</span><span class=\"mtk20\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk20\">&lt;/</span><span class=\"mtk10\">div</span><span class=\"mtk20\">&gt;</span></span></span></code></pre>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 521px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 94.24184261036469%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsSAAALEgHS3X78AAAC5ElEQVQ4y51UTUwTURB+3WIoVA6a6F3Dn4qJiTdPJiZ64AJ6MDHhwsEgF/WABxIT48GLfxwUhBhQ4SAHjbYV6K/dbYvRFgFBpJTStED/d7fbUrrtth3fbmmNEkjrJJNv38zO9+a9mXkI7Uhs9ZWEjndtB3KsbUlgbMB49duw7YAsTalEX56zE5mICZUlsdXXEs5qOmsgYWcBliHg0gLAOuRjX+yiD5ILhBAlyyNkXSMSjncjhLNoz9JklxA1X8+zVBcf0l8QfQJNyfigFpUt6gd7+yD5E1Usi4aevQkhXxlZ8Q77biAZxKdvATf9JObT9QHveJxjqA6JNDMnS4f05RHSK4U7hNyb2pBby+didohvUgDJWYymBdG3PKsqvyhzpocSZp035YlN49uoRzvDeHVkZG1qPuk3SE7Pooo4e6ZxfyKAH2h85P4ue60cVYtYV40U5SQ0OnQXcy3hu9ugCNxssnu93fKmxmMHT59qUJ5obqhTKuuKRDUKhUIpYlGPHjlc23KyXtncdFwpxty53VklckR9NuLfjWR/Fcqnk9YdVy+WbM8e9cj2TZUPf37Ph6nJ+KZRz20YDOkI9QmrNh3StYh+zjdRIoBEIYNU0HApFSbNfITS4Bi9GIs5JvgwOYFAmIetoBXifgpSkWngxMpmFwHi1nYxOB0xy4uEfqe6SsSQS90L/Dz+l4SE3wKJgEXqCIH5Cgi3wVM8qy9SIfMg1qEsY+vP0tZBPGL1EmHYUMoQjyRRsBnPCbRlGD8izwXaOpCJWgZwHFZr//4dkJjZZctzMzL0v8J4VH+tBdZRQOabLLu1IoeUh8htuQkhsUrkkm4CUmsEyoT1rQBzl+PrU9cYj6YDYKENWPMVzvvhkFSAwOSfF2lluLCR8yXi3GOIWxsrYOl7FB+L/w7sOonVDLTXBEG3HkDARWHJVimbKCmv6Fi4beJBlyYXcmmEgFMtbPz6KCQDJsjRxvM7BSAq4fsNdDffZJrLgxMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Object\"\n        title=\"Object\"\n        src=\"/static/40b7f0e843a117a6e441a60fdcafbfe3/2ff8c/tree.png\"\n        srcset=\"/static/40b7f0e843a117a6e441a60fdcafbfe3/e4891/tree.png 240w,\n/static/40b7f0e843a117a6e441a60fdcafbfe3/0ce91/tree.png 480w,\n/static/40b7f0e843a117a6e441a60fdcafbfe3/2ff8c/tree.png 521w\"\n        sizes=\"(max-width: 521px) 100vw, 521px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>To handle events we need to add some Event Listeners. To do that in VanillaJS we have to get DOM element and call <code>addEventListener</code> on it. DOM Element is implementing EventTarget interface and because of that, we have access to <code>addEventListener(type, callback, options)</code> and <code>removeEventListener(type, callback, options)</code> methods.</p>\n<ul>\n<li><strong>type</strong> - the name of the event</li>\n<li><strong>callback</strong> - function to be called</li>\n<li><strong>options</strong> - object to change default listener behavior</li>\n</ul>\n<pre class=\"grvsc-container quiet-light\" data-language=\"javascript\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">button</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">document</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">getElementById</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">dataSubmitter</span><span class=\"mtk6\">&#39;</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">button</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">addEventListener</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">click</span><span class=\"mtk6\">&#39;,</span><span class=\"mtk1\"> </span><span class=\"mtk7\">e</span><span class=\"mtk1\"> </span><span class=\"mtk7\">=&gt;</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7 mtkb\">console</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">log</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">clicked</span><span class=\"mtk6\">&#39;</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">}</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span></code></pre>\n<p>After calling <code>addEventListener</code> weâ€™ve added a listener to <strong>event listener list</strong> on that element (button). This list is a list of zero or more event listeners which means you can add more listeners for the same event.</p>\n<pre class=\"grvsc-container quiet-light\" data-language=\"javascript\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">button</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">document</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">getElementById</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">dataSubmitter</span><span class=\"mtk6\">&#39;</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">button</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">addEventListener</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">click</span><span class=\"mtk6\">&#39;,</span><span class=\"mtk1\"> </span><span class=\"mtk7\">e</span><span class=\"mtk1\"> </span><span class=\"mtk7\">=&gt;</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7 mtkb\">console</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">log</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">clicked first</span><span class=\"mtk6\">&#39;</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">}</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">button</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">addEventListener</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">click</span><span class=\"mtk6\">&#39;,</span><span class=\"mtk1\"> </span><span class=\"mtk7\">e</span><span class=\"mtk1\"> </span><span class=\"mtk7\">=&gt;</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7 mtkb\">console</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">log</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">clicked second</span><span class=\"mtk6\">&#39;</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">}</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span></code></pre>\n<p>In this case when <code>click</code> event is dispatched, listeners will be called in the order in which they were assigned (weâ€™ll see <code>clicked first</code> and then <code>clicked second</code> in the console).</p>\n<p>Everyone knows what will happen after clicking on our button (2 console logs) but to show how the event is propagating through our DOM tree we have to add more listeners</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 581px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 84.50946643717728%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsSAAALEgHS3X78AAADm0lEQVQ4y5VTX2xaVRg/0NaVCVsXp9vUzThdky7T2dotanzz1fhkjK/GBx+W+LT4YjRZfDFxe1k0dksaE03MVtfZ0nIpcO+Fe+H2woC1hUr5cylcuECBUsqfdhRKP8892Nlm3cO+5MvvnO/v+X3nHCREOS3C4onzn1B+60/5vGCFTR+sp5ltaC1Ae831t+pvr7u7VEwEFQ3aL6d0vbqXMJ7EqkH2RRsJdIXZL+4yY0YlK/jaZc92PDBRb697ACru+6p/p+LtkkM5UuwfURqMzytfizb/1e+uXvsQmwy9h3rPYewjLRg/87gr5H7WtYq2wbXlyeF2iR6sK8ZXVHs9PYOUpQJhExaTn8XnFD4xl50RTL6PVNsRw9E3MLyGuICDFOJDQtc0e68XHSBQ5khDf85L9pxsMYgKf8Yls6fzkDj0RAKzYPv/hDDRA7A48IC9PQwwfx42hJMd+0MULoTJeLyyeGUhM1ebV/wrk8L45+rs9Ab9EMZzyBVxkCAxxn1JeWcoOc0FWyUBqhkHwIYfNlfsZtVfkukuIW4nTa2hSZ09OvMiG6GOj5p+IayOHe9Tx6FFTNBC5sIv0R/fYcZ+TCTZ8UzYlE+FphLJReN6NcOMqv700jSJcyf5J0cCsGdT+xPNBYzavQFB4dczAKEXJN/oq1A36TpJIeQMjBO/NzqBIklKuxid1AIkNLDBoFTgD030we19jTB1zWGMPZ31rg0992b/2cNDl4f0lz64pB9+b1j/en//btyu7jnhxj0dQFY/cv2rl5uZO0cB/Efg0d3udGaNUInLvObAmwfeALDy/G83r5yqxH/vwwwM0PqrG+EZRYvL1uVczJzCKOHhFxoFx/dqkhTvXJgrZn+f8kz9IEr8txPi1DdRmRspJa3J1aRNykRMqXzcIuF1sZahr6GtogvKaQeUU3ZYTTIA9YfQKHC3yDeTZwkdIcZ9ahKneLfkooyz08Zwgpuv53j8PR0kp5igAWp+qCj0KH609HnY8VzMhccuQ4W9CA3XYDNvPtGhZUaemPtgyo+cb8OW8BY0iV7Aee/gWifQ06S95ny8npV4DT5h96wkdLM+qgedhqfmoeYKdRYg0O93jLwLVccAbIsDVfn+MdW3lbfsi90q0B3M06i1ymtbJSdW/j91aptFVoMaBb6ejZo3lQjVSIWma9UsBztl4UbnjS5o0bNKo+hsl2QWSjIDuZilDVUftMvCzc6TCj5zwX8BCV46JJuSiIQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Object\"\n        title=\"Object\"\n        src=\"/static/2314378eecfe47a943041e1e94cc9ebe/447d2/click-bubble.png\"\n        srcset=\"/static/2314378eecfe47a943041e1e94cc9ebe/e4891/click-bubble.png 240w,\n/static/2314378eecfe47a943041e1e94cc9ebe/0ce91/click-bubble.png 480w,\n/static/2314378eecfe47a943041e1e94cc9ebe/447d2/click-bubble.png 581w\"\n        sizes=\"(max-width: 581px) 100vw, 581px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>And now after user interaction event is <strong>bubbled</strong> through the DOM upwards</p>\n<p><img src=\"/b7d02691c5db7f12c0cd508750c73a1b/bubble.gif\" alt=\"Object\"></p>\n<p>This process is called <strong>bubbling</strong> and itâ€™s easy to understand, but itâ€™s not the whole path. Every event starts its path from the top of the tree. This process is called <strong>capturing</strong> and to access events in the <strong>capture</strong> phase we have to create listeners with extra options passed as the third argument.</p>\n<pre class=\"grvsc-container quiet-light\" data-language=\"javascript\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">container</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">document</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">getElementById</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">container</span><span class=\"mtk6\">&#39;</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">container</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">addEventListener</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">click</span><span class=\"mtk6\">&#39;,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">e</span><span class=\"mtk1\"> </span><span class=\"mtk7\">=&gt;</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7 mtkb\">console</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">log</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;</span><span class=\"mtk4\">container capture &#39;click&#39;</span><span class=\"mtk6\">&quot;</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">},</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    capture</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">true</span><span class=\"mtk6\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span></code></pre>\n<p><code>capture: true</code> informs our listener to listen for events in <strong>phase 1 or 2</strong>. Every event has 3 phases:</p>\n<ul>\n<li><strong>Capture (1)</strong> - going down the tree</li>\n<li><strong>On Target (2)</strong> - thatâ€™s self-explanatory</li>\n<li><strong>Bubble (3)</strong> - going up the tree</li>\n</ul>\n<p>Now letâ€™s see how our event is propagating (numbers next to event type is the order in which event listener is added).</p>\n<p><img src=\"/0c0a9964fa9613cb82d7902516bcaa37/capture.gif\" alt=\"Object\"></p>\n<p>After click event is dispatched it starts at the <code>body</code> level with <code>eventPhase === 1</code>. After that is propagates through the tree until it reaches its target (button).</p>\n<p>At the button level phase change to <strong>2</strong> and we can spot unusual behavior. If you look closely on the order in which listeners are called (<code>button</code>), first weâ€™re calling event listeners which are responsible for <strong>bubbling</strong> event and then listener responsible for <strong>capturing</strong>. It might seem weird at the beginning, but at the <code>button</code> level, our event is not in any of those phases. Because of that, our listeners are executed in order of creation. In <strong>On Target</strong> phase, listener type doesnâ€™t matter.</p>\n<p>After that our event is bubbling in the same way as in the previous example.</p>\n<h3 id=\"how-to-stop-events-from-propagating\"><a href=\"#how-to-stop-events-from-propagating\" aria-label=\"how to stop events from propagating permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How to stop events from propagating?</h3>\n<p>Sometimes we want our events to top at the specific point of the tree. To do that we need to use <code>e.stopPropagation()</code> or <code>e.stopImmediatePropagation()</code>. Those functions are preventing other listeners from being called with the same event.</p>\n<h4 id=\"stoppropagation\"><a href=\"#stoppropagation\" aria-label=\"stoppropagation permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>stopPropagation()</h4>\n<pre class=\"grvsc-container quiet-light\" data-language=\"javascript\" data-index=\"4\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">button</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">document</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">getElementById</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">dataSubmitter</span><span class=\"mtk6\">&#39;</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">button</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">addEventListener</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">click</span><span class=\"mtk6\">&#39;,</span><span class=\"mtk1\"> </span><span class=\"mtk7\">e</span><span class=\"mtk1\"> </span><span class=\"mtk7\">=&gt;</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7 mtkb\">console</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">log</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">clicked first</span><span class=\"mtk6\">&#39;</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">e</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">stopPropagation</span><span class=\"mtk1\">()</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">}</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">button</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">addEventListener</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">click</span><span class=\"mtk6\">&#39;,</span><span class=\"mtk1\"> </span><span class=\"mtk7\">e</span><span class=\"mtk1\"> </span><span class=\"mtk7\">=&gt;</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7 mtkb\">console</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">log</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">clicked second</span><span class=\"mtk6\">&#39;</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">}</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">button</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">addEventListener</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">click</span><span class=\"mtk6\">&#39;,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">e</span><span class=\"mtk1\"> </span><span class=\"mtk7\">=&gt;</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7 mtkb\">console</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">log</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;</span><span class=\"mtk4\">button capture &#39;click&#39;</span><span class=\"mtk6\">&quot;</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">},</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    capture</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">true</span><span class=\"mtk6\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span></code></pre>\n<p><img src=\"/7997903c10d5f1a683882d7323c26d6c/stop-propagation.gif\" alt=\"Object\"></p>\n<p>Even if we call <code>stopPropagation()</code> inside the first listener, all listeners assigned to current elements are called. Event is not propagated into another <code>EventTarget</code>. We can call <code>stopPropagation()</code> inside any of our listeners on the way, it doesnâ€™t have to be target or even <strong>bubbling</strong> phase. If you want to prevent the event from reaching the target you can call <code>stopPropagation</code> in one of the listeners listening on the <strong>capture</strong> phase.</p>\n<h4 id=\"stopimmediatepropagation\"><a href=\"#stopimmediatepropagation\" aria-label=\"stopimmediatepropagation permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>stopImmediatePropagation()</h4>\n<pre class=\"grvsc-container quiet-light\" data-language=\"javascript\" data-index=\"5\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">button</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">document</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">getElementById</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">dataSubmitter</span><span class=\"mtk6\">&#39;</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">button</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">addEventListener</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">click</span><span class=\"mtk6\">&#39;,</span><span class=\"mtk1\"> </span><span class=\"mtk7\">e</span><span class=\"mtk1\"> </span><span class=\"mtk7\">=&gt;</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7 mtkb\">console</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">log</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">clicked first</span><span class=\"mtk6\">&#39;</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">e</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">stopImmediatePropagation</span><span class=\"mtk1\">()</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">}</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">button</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">addEventListener</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">click</span><span class=\"mtk6\">&#39;,</span><span class=\"mtk1\"> </span><span class=\"mtk7\">e</span><span class=\"mtk1\"> </span><span class=\"mtk7\">=&gt;</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7 mtkb\">console</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">log</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">clicked second</span><span class=\"mtk6\">&#39;</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">}</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">button</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">addEventListener</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">click</span><span class=\"mtk6\">&#39;,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">e</span><span class=\"mtk1\"> </span><span class=\"mtk7\">=&gt;</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7 mtkb\">console</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">log</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;</span><span class=\"mtk4\">button capture &#39;click&#39;</span><span class=\"mtk6\">&quot;</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">},</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    capture</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">true</span><span class=\"mtk6\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span></code></pre>\n<p><img src=\"/e556b4c62b47c2e87685fa124b33f0a2/stop-immediate-propagation.gif\" alt=\"Object\"></p>\n<p>Youâ€™ve probably already spotted the difference. <code>stopImmediatePropagation</code> is stopping propagation on the same listener in which itâ€™s called. If we call it inside <code>click (2)</code> then propagation stops at <code>click (2)</code> and doesnâ€™t execute <code>click (3)</code>. You should be aware of that difference when dealing with multiple listeners on your elements.</p>\n<h4 id=\"preventdefault\"><a href=\"#preventdefault\" aria-label=\"preventdefault permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>preventDefault()</h4>\n<p>Itâ€™s a good time to mention <code>preventDefault</code> method. Itâ€™s quite common in modern frameworks to do something like that:</p>\n<pre class=\"grvsc-container quiet-light\" data-language=\"javascript\" data-index=\"6\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">e</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">preventDefault</span><span class=\"mtk1\">()</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">e</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">stopPropagation</span><span class=\"mtk1\">()</span><span class=\"mtk6\">;</span></span></span></code></pre>\n<p>A lot of people are doing that without even knowing why. You know that <code>stopPropagation()</code> is stopping an event from going through the event listeners. <code>preventDefault</code> on the other hand, is telling the browser not to execute its default behavior.</p>\n<iframe src=\"https://codesandbox.io/embed/awesome-wildflower-z3wn2?fontsize=14\" title=\"awesome-wildflower-z3wn2\" allow=\"geolocation; microphone; camera; midi; vr; accelerometer; gyroscope; payment; ambient-light-sensor; encrypted-media\" style=\"width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;\" sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\"></iframe>\n<p>If we call <code>preventDefault()</code> on <code>click</code> event from checkbox then browser wonâ€™t change our checkbox to the selected state. We can handle our event manually (e.g. apply custom action instead). Thatâ€™s also helpful when it comes to submitting the form. In most of the popular libraries, we donâ€™t actually want form element to send HTML from. We want to handle form data manually, apply validation, parsing and add some extra data before sending.</p>\n<h3 id=\"dispatching-events-manually\"><a href=\"#dispatching-events-manually\" aria-label=\"dispatching events manually permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Dispatching events manually</h3>\n<p>Iâ€™ve said before, event doesnâ€™t have to be created by the browser, we can create them. To do that we have to create new <code>CustomEvent</code> instance, and <code>dispatchEvent</code>. <a href=\"https://dom.spec.whatwg.org/#interface-customevent\"><code>CustomEvent</code></a> is basically the same standard <code>Event</code> but has an additional attribute in <code>options</code> object called <code>details</code>. That attribute is used to store custom data.</p>\n<pre class=\"grvsc-container quiet-light\" data-language=\"javascript\" data-index=\"7\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">clickedData</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">document</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">getElementById</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">clickedData</span><span class=\"mtk6\">&#39;</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">dataEvent</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">new</span><span class=\"mtk1\"> </span><span class=\"mtk7 mtkb\">CustomEvent</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">addData</span><span class=\"mtk6\">&#39;,</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  detail</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span><span class=\"mtk1\"> test</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">test2</span><span class=\"mtk6\">&#39;</span><span class=\"mtk1\"> </span><span class=\"mtk6\">},</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">}</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">clickedData</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">dispatchEvent</span><span class=\"mtk1\">(</span><span class=\"mtk7\">dataEvent</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span></code></pre>\n<p>Letâ€™s add listeners to our tree to listen for our custom event</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 771px;\"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 63.683527885862524%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAADCElEQVQ4y61TS2gTURSdpl+TikZLqxZBFJWCaAURpCiKtigurNBSFTcu/Cz9LHUlqKALV1WpFaxGKq35TJL5ZT6ZzEwmk6RJO0mT2F9im9gmbWqa/mu0z2lcuRBBPfC4HN49l/sO50GQAlJGazpx3UsTp39h4PStlBt+k8tIIDctApALgKAovqVMrkekkX1MwVyrwyodgX7FluKi4q1KLc8z7iNdRfUSF+k+ooWSyWaxn7y8nHa2zYzRnbkvYocsuG4xZukaY+avM2bhpoB5963phn3x24M9ox8MHdYzCtVq1JrdEBumoL9FWB48OdA/cnUoFNu5xg/sry3OXzhjdFH/tF8rpzzanqR34+CkWLGSZo/Hw8bG1QxfPxHp2xoSJjZEfXHtiC+xadA/Vram84977vWO95BkAG1QaJmmXLMnP5AO4LVd5HsE5g2wiTcaaa+FnEsJ4FvGDcC8H/gcvNNmEAz4B9pI6BnGbhbXnghRXkxD9lnW6/D2/GZl60oL8wNtIaTUHsSrxYhtu3OArg5G6R3pT1hzZpS4nI5hl6K9nl2cVa6SbL5tks1fzaMezfLswwIQZVUAAAiAsFLHVNA/4Pfi58YH6oN3zhZPJYi9i0m2cai3u3khaT+/nOKO6p7q1KzBVi6jgSK9S6dqMz9Vd9ieqR+8v1u2kGTqfvZ3NS2l2MbZOHP4yuknJRDigsluu8E6MESNgawHLCR5sJqVQGqY+04aOZSCHbxk7TuEhUw1iMtiR1xmAnVb8dEhfHV1xg3mJ7h8fyLCLtGwiEJ8hKrsklBtKk7XfpsWWqaiWMvKlOPCUko4JWLBzSLhrXKafCWuSaaICzMVTNC2mZBx7XzSfiKX5pqWJ9lzX9OO5sUJvo6zRDZC/x0w313/Gnt37FOMvDGboNtjQVP7VBR/lY3z9y2d1AklKg084qnMx4tjCggfUoAqJ/OZVikeFs6NM4WLSXthNs6pGNgHQYgEG7vs+s6RKDMMVmQwnxQUTzxgJi59VTzspmHO6sR68n+XQ9x/jMYPQEjcNBXMCJ8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Object\"\n        title=\"Object\"\n        src=\"/static/41b903a66408abf0322f0bd031463bc1/36e7e/add-data-event.png\"\n        srcset=\"/static/41b903a66408abf0322f0bd031463bc1/e4891/add-data-event.png 240w,\n/static/41b903a66408abf0322f0bd031463bc1/0ce91/add-data-event.png 480w,\n/static/41b903a66408abf0322f0bd031463bc1/36e7e/add-data-event.png 771w\"\n        sizes=\"(max-width: 771px) 100vw, 771px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n    </span></p>\n<p>What will happen when our code is executed?</p>\n<p><img src=\"/e46550490b72700b64ef34326b7cbdff/data-no-bubble.gif\" alt=\"Object\"></p>\n<p>Wait for the second, why there is no bubbling?! In our case event stays on <strong>On Target</strong> phase. Reason for that is because by default all events created using <code>new CustomEvent()</code> have <code>bubbles</code> set to <code>false</code>.</p>\n<p>To enable bubbling for this event we have to create it with <code>options</code> object:</p>\n<pre class=\"grvsc-container quiet-light\" data-language=\"javascript\" data-index=\"8\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">new</span><span class=\"mtk1\"> </span><span class=\"mtk7 mtkb\">CustomEvent</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">addData</span><span class=\"mtk6\">&#39;,</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  bubbles</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">true</span><span class=\"mtk6\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  detail</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span><span class=\"mtk1\"> test</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&#39;</span><span class=\"mtk4\">test2</span><span class=\"mtk6\">&#39;</span><span class=\"mtk1\"> </span><span class=\"mtk6\">},</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">}</span><span class=\"mtk1\">)</span><span class=\"mtk6\">;</span></span></span></code></pre>\n<p><img src=\"/675d861ccd7b8cfea6c4d6f4c68e971e/data-bubble.gif\" alt=\"Object\"></p>\n<blockquote>\n<p>Using <code>CustomEvent</code> is not mandatory. If you want you can create instance of <code>new Event()</code> and use it for your propagation.</p>\n</blockquote>\n<h3 id=\"when-we-might-want-to-use-custom-events\"><a href=\"#when-we-might-want-to-use-custom-events\" aria-label=\"when we might want to use custom events permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>When we might want to use custom events?</h3>\n<p>I think sending data to elements itâ€™s obvious. A good example to show you why you might want to hook up into event propagation is Reactâ€™s HOCs (Higher Order Components). Imagine an application with multiple layers of logic wrapped around your form. It might look sth like:</p>\n<pre class=\"grvsc-container quiet-light\" data-language=\"html\" data-index=\"9\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk20\">&lt;</span><span class=\"mtk10\">div</span><span class=\"mtk20\"> </span><span class=\"mtk11 mtki\">id</span><span class=\"mtk6\">=&quot;</span><span class=\"mtk4\">app</span><span class=\"mtk6\">&quot;</span><span class=\"mtk20\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk20\">&lt;</span><span class=\"mtk10\">div</span><span class=\"mtk20\"> </span><span class=\"mtk11 mtki\">id</span><span class=\"mtk6\">=&quot;</span><span class=\"mtk4\">addUserData</span><span class=\"mtk6\">&quot;</span><span class=\"mtk20\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk20\">&lt;</span><span class=\"mtk10\">div</span><span class=\"mtk20\"> </span><span class=\"mtk11 mtki\">id</span><span class=\"mtk6\">=&quot;</span><span class=\"mtk4\">prefillAfterReset</span><span class=\"mtk6\">&quot;</span><span class=\"mtk20\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk20\">&lt;</span><span class=\"mtk10\">form</span><span class=\"mtk20\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        {...}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk20\">&lt;/</span><span class=\"mtk10\">form</span><span class=\"mtk20\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk20\">&lt;/</span><span class=\"mtk10\">div</span><span class=\"mtk20\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk20\">&lt;/</span><span class=\"mtk10\">div</span><span class=\"mtk20\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk20\">&lt;/</span><span class=\"mtk10\">div</span><span class=\"mtk20\">&gt;</span></span></span></code></pre>\n<p>In this case, we can hook into formâ€™s <code>submit</code> and <code>reset</code> events even before they reach our form component and add/modify data on submitting/resetting the form. Iâ€™m not saying to implement such behavior because there are better ways to do it.</p>\n<p>If you want to play with events please check this sandbox</p>\n<iframe src=\"https://codesandbox.io/embed/blissful-wilson-6ce25?fontsize=14\" title=\"blissful-wilson-6ce25\" allow=\"geolocation; microphone; camera; midi; vr; accelerometer; gyroscope; payment; ambient-light-sensor; encrypted-media\" style=\"width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;\" sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\"></iframe>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .quiet-light { background-color: #F5F5F5; }\n  .quiet-light .mtkb { font-weight: bold; }\n  .quiet-light .mtki { font-style: italic; }\n  .quiet-light .mtk20 { color: #91B3E0; }\n  .quiet-light .mtk10 { color: #4B69C6; }\n  .quiet-light .mtk11 { color: #8190A0; }\n  .quiet-light .mtk6 { color: #777777; }\n  .quiet-light .mtk4 { color: #448C27; }\n  .quiet-light .mtk1 { color: #333333; }\n  .quiet-light .mtk7 { color: #7A3E9D; }\n  .quiet-light .mtk9 { color: #AA3731; }\n  .quiet-light .mtk5 { color: #9C5D27; }\n  .quiet-light .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(0, 0, 0, 0.05));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(0, 0, 0, 0.2));\n  }\n</style>"}},"pageContext":{"slug":"/2019/08/a-modern-guide-to-events-in-java-script"}}}