(this.webpackJsonp=this.webpackJsonp||[]).push([[19],{RBgx:function(e,t,n){e.exports={page:"Page-module--page--2nMky","page--wide":"Page-module--page--wide--34SE4",page__inner:"Page-module--page__inner--2M_vz",page__title:"Page-module--page__title--GPD8L",page__body:"Page-module--page__body--Ic6i6"}},RXmK:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var s=n("q1tI"),i=n.n(s),a=n("RBgx"),o=n.n(a),r=function(e){var t=e.title,n=e.wide,a=e.children,r=Object(s.useRef)();Object(s.useEffect)((function(){r.current.scrollIntoView()}));var c=n?o.a.page+" "+o.a["page--wide"]:o.a.page;return i.a.createElement("div",{ref:r,className:c},i.a.createElement("div",{className:o.a.page__inner},t&&i.a.createElement("h1",{className:o.a.page__title},t),i.a.createElement("div",{className:o.a.page__body},a)))}},TyCH:function(e,t,n){e.exports={"sin-position-embedding-continaer":"InputPositionEmbeddingSin-module--sin-position-embedding-continaer--Jo6QK"}},U7dx:function(e,t,n){"use strict";n("RUBk");var s=n("q1tI"),i=n.n(s),a=n("dec9"),o=n("OMM4"),r=n("0FP3"),c=n("Oy/b"),l="<span>\n<strong>Positional Encoding</strong><br/>\n"+c.renderToString("PE_{(pos,2i)} = sin(\\frac{pos}{10000^{2i/d_{\\text{model}}}})")+"<br/><br/>\n"+c.renderToString("PE_{(pos,2i+1)} = cos(\\frac{pos}{10000^{2i/d_{\\text{model}}}})")+"<br/>\n</span>\n",p="<span>\n<strong>Settings</strong>: d = 50<br/>\nSin and Cos periods at even further indexes are very large because "+c.renderToString("\\frac{pos}{10000^{48/50}} \\sim \\frac{pos}{10000}")+". That gives us a period of <strong>20000ùõ±</strong> which is way beyond our value of <i>pos</i>. Most values are going to be close to 0 or 1.\n</span>\n",u={color:"#CAFFBF",borderColor:"#147A00",blockType:"rect",size:30,sizeX:60,items:[{id:"top_name",name:"p0",sizeX:0,sizeY:0,namePosition:"top",position:[680,50]},{id:"i0",val:'<span style="font-size: 14px">\n          $1\n        </span>',valVars:["pos0,i0"],selectValue:0,position:[680,50]},{id:"i1",val:'<span style="font-size: 14px">\n          $1\n        </span>',valVars:["pos1,i0"],selectValue:0,position:[680,90]},{id:"i2",val:'<span style="font-size: 14px">\n          $1\n        </span>',valVars:["pos2,i0"],selectValue:0,position:[680,130]},{id:"i3",val:'<span style="font-size: 14px">\n          $1\n        </span>',valVars:["pos3,i0"],selectValue:0,position:[680,170]}]},d={blockType:"line-chart",sizeX:600,sizeY:150,xLimit:[0,20],yLimit:[-1,1],transition:{delay:400}},m=[{type:"circle",size:5,color:"#048B67"},{type:"circle",size:5,color:"#EF476F"},{type:"circle",size:5,color:"#b5179e"},{type:"circle",size:5,color:"#118AB2"}],g={sin0:Object.assign({},d,{color:"#FFD199",borderColor:"#A35A00",blockName:"inputs-sin0",position:[10,10],data:[{name:"axis",fun:function(e){return Math.sin(e/Math.pow(1e4,0))},elements:21,items:m.map((function(e,t){return Object.assign({},e,{varName:"pos"+t+",i0"})}))}]}),cos0:Object.assign({},d,{color:"#9BF6FF",borderColor:"#00838F",blockName:"inputs-cos0",position:[10,170],data:[{name:"axis",fun:function(e){return Math.cos(e/Math.pow(1e4,0))},elements:21,items:m.map((function(e,t){return Object.assign({},e,{varName:"pos"+t+",i1"})}))}]}),sin2:Object.assign({},d,{color:"#FFADAD",borderColor:"#6chartWidth00",blockName:"inputs-sin2",position:[10,340],data:[{name:"axis",fun:function(e){return Math.sin(e/Math.pow(1e4,.04))},elements:21,items:m.map((function(e,t){return Object.assign({},e,{varName:"pos"+t+",i2"})}))}]}),cos2:Object.assign({},d,{color:"#CAFFBF",borderColor:"#147A00",blockName:"inputs-cos2",position:[10,510],data:[{name:"axis",fun:function(e){return Math.cos(e/Math.pow(1e4,.04))},elements:21,items:m.map((function(e,t){return Object.assign({},e,{varName:"pos"+t+",i3"})}))}]}),posDesc:Object.assign({},u,{color:"transparent",borderColor:"transparent",blockName:"position-desc",valName:"pos-desc",items:[{id:"i0-desc",val:'<span style="font-size: 16px; font-weight: bold;">\n          i=0\n        </span>',position:[1010,50]},{id:"i1-desc",val:'<span style="font-size: 16px; font-weight: bold;">\n          i=1\n        </span>',position:[1010,90]},{id:"i2-desc",val:'<span style="font-size: 16px; font-weight: bold;">\n          i=2\n        </span>',position:[1010,130]},{id:"i3-desc",val:'<span style="font-size: 16px; font-weight: bold;">\n          i=3\n        </span>',position:[1010,170]}]}),pos0:Object.assign({},u,{color:"#9CFCE2",borderColor:"#048B67",blockName:"position0",valName:"pos0",items:u.items.map((function(e,t){return Object.assign({},e,{name:0===t?"p0":null,valVars:0===t?null:["pos0,i"+(t-1)+"-val"]})}))}),pos1:Object.assign({},u,{color:"#F8B4C4",borderColor:"#EF476F",blockName:"position1",valName:"pos1",items:u.items.map((function(e,t){return Object.assign({},e,{position:[e.position[0]+90,e.position[1]],name:0===t?"p1":null,valVars:0===t?null:["pos1,i"+(t-1)+"-val"]})}))}),pos2:Object.assign({},u,{color:"#F6B7EC",borderColor:"#b5179e",blockName:"position2",valName:"pos2",items:u.items.map((function(e,t){return Object.assign({},e,{position:[e.position[0]+180,e.position[1]],name:0===t?"p2":null,valVars:0===t?null:["pos2,i"+(t-1)+"-val"]})}))}),pos3:Object.assign({},u,{color:"#A2E1F6",borderColor:"#118AB2",blockName:"position3",valName:"pos3",items:u.items.map((function(e,t){return Object.assign({},e,{position:[e.position[0]+270,e.position[1]],name:0===t?"p3":null,valVars:0===t?null:["pos3,i"+(t-1)+"-val"]})}))}),text:{color:"#CAFFBF",borderColor:"#333",sizeX:"300px",sizeY:"50px",blockName:"text",blockType:"text",items:[{id:"encoding-eq",val:l,sizeX:"450px",sizeY:"150px",position:[680,210]},{id:"current-settings",val:"<span>\n<strong>Settings</strong>: d = 50<br/>\nThe value of each positional encoding depends on the <i>position</i> (<i>pos</i>) and <i>dimension</i> (<i>d</i>). We calculate result for every <i>index</i> (<i>i</i>) to get the whole vector.\n</span>\n",sizeX:"450px",sizeY:"150px",position:[680,410]}]}},b=Object.assign({},g,{sin0:Object.assign({},g.sin0,{data:[{name:"axis",fun:function(e){return Math.sin(e/Math.pow(1e4,0))},elements:21,items:g.sin0.data[0].items}]}),cos0:Object.assign({},g.cos0,{data:[{name:"axis",fun:function(e){return Math.cos(e/Math.pow(1e4,0))},elements:21,items:g.cos0.data[0].items}]}),sin2:Object.assign({},g.sin2,{data:[{name:"axis",fun:function(e){return Math.sin(e/Math.pow(1e4,.1))},elements:21,items:g.sin2.data[0].items}]}),cos2:Object.assign({},g.cos2,{data:[{name:"axis",fun:function(e){return Math.cos(e/Math.pow(1e4,.1))},elements:21,items:g.cos2.data[0].items}]}),text:Object.assign({},g.text,{items:[g.text.items[0],Object.assign({},g.text.items[1],{val:"<span>\n<strong>Settings</strong>: d = 20<br/>\nEven if the dimension (<i>d</i>) has changed, values for <strong>i=0</strong> and <strong>i=1</strong> haven't. That's because <strong>PE</strong> formula has a divisor equal to <strong>1</strong> in both cases, despite the value of <i>d</i>.\n</span>\n"})]})}),f=Object.assign({},b,{sin0:Object.assign({},b.sin0,{data:[{name:"axis",fun:function(e){return Math.sin(e/Math.pow(1e4,.08))},elements:21,items:b.sin0.data[0].items}]}),cos0:Object.assign({},b.cos0,{data:[{name:"axis",fun:function(e){return Math.cos(e/Math.pow(1e4,.08))},elements:21,items:b.cos0.data[0].items}]}),sin2:Object.assign({},b.sin2,{data:[{name:"axis",fun:function(e){return Math.sin(e/Math.pow(1e4,.12))},elements:21,items:b.sin2.data[0].items}]}),cos2:Object.assign({},b.cos2,{data:[{name:"axis",fun:function(e){return Math.cos(e/Math.pow(1e4,.12))},elements:21,items:b.cos2.data[0].items}]}),text:Object.assign({},b.text,{items:[b.text.items[0],Object.assign({},b.text.items[1],{val:"<span>\n<strong>Settings</strong>: d = 50<br/>\nNow we've changed indexes (<b>i</b>) to show differences between further indexes. Function's period increases with increasing <strong>i</strong> value.\n</span>\n"}),{sizeX:"100px",sizeY:"150px",position:[b.posDesc.items[0].position[0]+60,b.posDesc.items[0].position[1]],val:'<span style="font-size: 16px; text-align: center">\n          <strong>Important!</strong><br/>\n          indexes has changed\n        </span>'}]}),posDesc:Object.assign({},b.posDesc,{items:b.posDesc.items.map((function(e,t){return Object.assign({},e,{val:'<span style="font-size: 16px; font-weight: bold;">\n          i='+(t+2)+"\n        </span>"})}))})}),h=Object.assign({},f,{sin0:Object.assign({},f.sin0,{data:[{name:"axis",fun:function(e){return Math.sin(e/Math.pow(1e4,.92))},elements:21,items:f.sin0.data[0].items}]}),cos0:Object.assign({},f.cos0,{data:[{name:"axis",fun:function(e){return Math.cos(e/Math.pow(1e4,.92))},elements:21,items:f.cos0.data[0].items}]}),sin2:Object.assign({},f.sin2,{data:[{name:"axis",fun:function(e){return Math.sin(e/Math.pow(1e4,.96))},elements:21,items:f.sin2.data[0].items}]}),cos2:Object.assign({},f.cos2,{data:[{name:"axis",fun:function(e){return Math.cos(e/Math.pow(1e4,.96))},elements:21,items:f.cos2.data[0].items}]}),text:Object.assign({},f.text,{items:[f.text.items[0],Object.assign({},f.text.items[1],{val:p}),f.text.items[2]]}),posDesc:Object.assign({},b.posDesc,{items:b.posDesc.items.map((function(e,t){return Object.assign({},e,{val:'<span style="font-size: 16px; font-weight: bold;">\n          i='+(t+46)+"\n        </span>"})}))})}),v={step1:g,step2:b,step3:f,step4:h},x=n("TyCH"),O=n.n(x),j=n("ZPHx"),y=Object.assign({},r.a,{SET_POS:"SET_POS"}),w=[0,1,2,3],E=[0,1,2,3];function M(e,t){var n,s,i,a=t.type;switch(t.type===y.SET&&(a=null==e[t.key]?y.SET:y.DELETE),a){case y.SET_POS:return Object.assign({},e,{positions:Object.assign({},e.positions,(n={},n[t.position]=E.reduce((function(e,n){var s;return Object.assign({},e,((s={})["i"+n]=t.value,s))}),{}),n))},E.reduce((function(e,n){var s;return Object.assign({},e,((s={})[t.position+",i"+n]=t.value,s))}),{}));case y.SET:return null==t.key?e:Object.assign({},e,((s={})[t.key]=e.positions[t.key.split(",")[0]][t.key.split(",")[1]],s));case y.DELETE:return Object.assign({},e,((i={})[t.key]=void 0,i));default:throw new Error}}t.a=function(){var e=Object(s.useState)(1),t=e[0],n=e[1],r=Object(s.useReducer)(M,Object.assign({},w.reduce((function(e,t){return Object.assign({},e,E.reduce((function(e,n){var s;return Object.assign({},e,((s={})["pos"+t+",i"+n]=t,s))}),{}))}),{}),{positions:w.reduce((function(e,t){var n;return Object.assign({},e,((n={})["pos"+t]=E.reduce((function(e,n){var s;return Object.assign({},e,((s={})["i"+n]=t,s))}),{}),n))}),{})})),c=r[0],l=r[1],p=v["step"+t],u=Object.assign({},c,w.reduce((function(e,t){return Object.assign({},e,E.reduce((function(e,n){var s;return Object.assign({},e,((s={})["pos"+t+",i"+n+"-val"]=function(e,t){var n=null;switch(t){case 0:n=p.sin0.data[0].fun;break;case 1:n=p.cos0.data[0].fun;break;case 2:n=p.sin2.data[0].fun;break;case 3:n=p.cos2.data[0].fun}return"function"==typeof n&&Number(n(c["pos"+e+",i"+t])).toFixed(3)}(t,n),s))}),{}))}),{}));return i.a.createElement("div",{className:O.a["sin-position-embedding-continaer"]},i.a.createElement(a.a,{data:p,step:t,animationHeight:680,animationWidth:1200,id:"sin-position-embedding",values:u,onUpdateValues:function(e,t,n){l({type:n,value:e,key:t})}}),i.a.createElement(j.a,{onUpdateValue:function(e,t){l({type:y.SET_POS,value:e,position:t})},colors:m.map((function(e){return e.color}))}),i.a.createElement(o.a,{onStepForward:function(){n(t+1)},onStepBackward:function(){n(t-1)},prevDisabled:t<2,nextDisabled:t===Object.keys(v).length}))}},VdUC:function(e,t,n){"use strict";n.r(t);var s=n("q1tI"),i=n.n(s),a=n("Zttt"),o=n("RXmK"),r=n("gGy4"),c=n("U7dx");t.default=function(){var e=Object(r.a)(),t=e.title,n=e.subtitle;return i.a.createElement(a.a,{title:"Positional Encoding Diagram - "+t,description:n,displayCookie:!1},i.a.createElement(o.a,{title:"Positional Encoding in Transformers",wide:!0},i.a.createElement(c.a,null)))}},ZPHx:function(e,t,n){"use strict";var s=n("q1tI"),i=n.n(s),a=n("R/WZ"),o=n("H2TA"),r=n("ofer"),c=n("6Obz"),l=Object(a.a)((function(e){return{container:{width:"100%",display:"flex",flexDirection:"row",maxWidth:"100%"},containerFullWidth:{width:"100%",display:"flex",flexDirection:"row",maxWidth:"100% !important"},sliderLabel:{marginRight:10},slider:{marginRight:10,height:8}}})),p=Object(o.a)({track:{height:4,borderRadius:4,paddingRight:4},rail:{height:4,borderRadius:4,paddingRight:4}})(c.a),u=[0,1,2,3],d=["blue","blue","blue","blue"];t.a=function(e){var t=e.onUpdateValue,n=e.colors,a=void 0===n?d:n,o=e.min,c=void 0===o?0:o,m=e.max,g=void 0===m?20:m,b=e.elements,f=void 0===b?u:b,h=e.prefix,v=void 0===h?"pos":h,x=e.style,O=void 0===x?{}:x,j=e.fullWidth,y=void 0===j||j,w=e.updateOnChange,E=void 0!==w&&w,M=e.displayElementName,k=void 0===M||M,F=l(),z=f.map((function(e){return function(n,s){t(s,"pos"+e)}}));return i.a.createElement("div",{className:y?F.containerFullWidth:F.container,style:O},f.map((function(e){return i.a.createElement(s.Fragment,{key:"post"+e},i.a.createElement(r.a,{id:"discrete-slider",gutterBottom:!0,className:F.sliderLabel},""+v+(k?e:"")),E?i.a.createElement(p,{className:F.slider,style:{color:a[e]},name:""+v+(k?e:""),"aria-label":""+v+e,defaultValue:e,"aria-labelledby":"slider-pos"+e,valueLabelDisplay:"auto",step:1,onChange:z[e],marks:!0,min:c,max:g}):i.a.createElement(p,{className:F.slider,style:{color:a[e]},name:""+v+(k?e:""),"aria-label":""+v+e,defaultValue:e,"aria-labelledby":"slider-pos"+e,valueLabelDisplay:"auto",step:1,onChangeCommitted:z[e],marks:!0,min:c,max:g}))})))}}}]);
//# sourceMappingURL=component---src-pages-diagrams-positional-encoding-js-086266451ee2955522e7.js.map